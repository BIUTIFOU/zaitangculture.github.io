<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
 <HEAD>
  <TITLE> New Document </TITLE>
  <META NAME="Generator" CONTENT="EditPlus">
  <META NAME="Author" CONTENT="">
  <META NAME="Keywords" CONTENT="">
  <META NAME="Description" CONTENT="">
  <style>
   body {
  background: #000;
  overflow: hidden;
  padding: 0;
  margin: 0;
}

canvas {
  position: absolute;
  top: 0;
  left: 0;
  cursor: crosshair;
}

canvas.drawing {
  mix-blend-mode: hard-light;
}

#stats {
  position: absolute;
  bottom: 0;
  right: 0;
}

#attention {
  font-family: 'Source Sans Pro', sans-serif;
  position: absolute;
  bottom: 20px;
  font-size: 32px;
  left: 0;
  width: 100%;
  text-align: center;
  color: #fff;
  z-index: 100;
  pointer-events: none;
  transition: transform 0.75s;
  transform: translate(0, 60px);
}

#attention.show {
  transform: translate(0, 0px);
}

  </style>
 </HEAD>

 <BODY>
  <script>
   /*!
* @license CreateJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},createjs.extend=function(a,b){"use strict";function c(){this.constructor=a}return c.prototype=b.prototype,a.prototype=new c},this.createjs=this.createjs||{},createjs.promote=function(a,b){"use strict";var c=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(d){c[(b+="_")+"constructor"]=d.constructor;for(var e in d)c.hasOwnProperty(e)&&"function"==typeof d[e]&&(c[b+e]=d[e])}return a},this.createjs=this.createjs||{},createjs.indexOf=function(a,b){"use strict";for(var c=0,d=a.length;d>c;c++)if(b===a[c])return c;return-1},this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.type=a,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!b,this.cancelable=!!c,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var b=a.prototype;b.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},b.stopPropagation=function(){this.propagationStopped=!0},b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},b.remove=function(){this.removed=!0},b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)},b.set=function(a){for(var b in a)this[b]=a[b];return this},b.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this._listeners=null,this._captureListeners=null}var b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener,a.on=b.on,a.removeEventListener=a.off=b.removeEventListener,a.removeAllEventListeners=b.removeAllEventListeners,a.hasEventListener=b.hasEventListener,a.dispatchEvent=b.dispatchEvent,a._dispatchEvent=b._dispatchEvent,a.willTrigger=b.willTrigger},b.addEventListener=function(a,b,c){var d;d=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var e=d[a];return e&&this.removeEventListener(a,b,c),e=d[a],e?e.push(b):d[a]=[b],b},b.on=function(a,b,c,d,e,f){return b.handleEvent&&(c=c||b,b=b.handleEvent),c=c||this,this.addEventListener(a,function(a){b.call(c,a,e),d&&a.remove()},f)},b.removeEventListener=function(a,b,c){var d=c?this._captureListeners:this._listeners;if(d){var e=d[a];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==b){1==g?delete d[a]:e.splice(f,1);break}}},b.off=b.removeEventListener,b.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},b.dispatchEvent=function(a,b,c){if("string"==typeof a){var d=this._listeners;if(!(b||d&&d[a]))return!0;a=new createjs.Event(a,b,c)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(e){}if(a.bubbles&&this.parent){for(var f=this,g=[f];f.parent;)g.push(f=f.parent);var h,i=g.length;for(h=i-1;h>=0&&!a.propagationStopped;h--)g[h]._dispatchEvent(a,1+(0==h));for(h=1;i>h&&!a.propagationStopped;h++)g[h]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return!a.defaultPrevented},b.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return!!(b&&b[a]||c&&c[a])},b.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;b=b.parent}return!1},b.toString=function(){return"[EventDispatcher]"},b._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d){var e=d[a.type];if(!e||!(c=e.length))return;try{a.currentTarget=this}catch(f){}try{a.eventPhase=b}catch(f){}a.removed=!1,e=e.slice();for(var g=0;c>g&&!a.immediatePropagationStopped;g++){var h=e[g];h.handleEvent?h.handleEvent(a):h(a),a.removed&&(this.off(a.type,h,1==b),a.removed=!1)}}},createjs.EventDispatcher=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"Ticker cannot be instantiated."}a.RAF_SYNCHED="synched",a.RAF="raf",a.TIMEOUT="timeout",a.useRAF=!1,a.timingMode=null,a.maxDelta=0,a.paused=!1,a.removeEventListener=null,a.removeAllEventListeners=null,a.dispatchEvent=null,a.hasEventListener=null,a._listeners=null,createjs.EventDispatcher.initialize(a),a._addEventListener=a.addEventListener,a.addEventListener=function(){return!a._inited&&a.init(),a._addEventListener.apply(a,arguments)},a._inited=!1,a._startTime=0,a._pausedTime=0,a._ticks=0,a._pausedTicks=0,a._interval=50,a._lastTime=0,a._times=null,a._tickTimes=null,a._timerId=null,a._raf=!0,a.setInterval=function(b){a._interval=b,a._inited&&a._setupTick()},a.getInterval=function(){return a._interval},a.setFPS=function(b){a.setInterval(1e3/b)},a.getFPS=function(){return 1e3/a._interval};try{Object.defineProperties(a,{interval:{get:a.getInterval,set:a.setInterval},framerate:{get:a.getFPS,set:a.setFPS}})}catch(b){console.log(b)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)},a.reset=function(){if(a._raf){var b=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;b&&b(a._timerId)}else clearTimeout(a._timerId);a.removeAllEventListeners("tick"),a._timerId=a._times=a._tickTimes=null,a._startTime=a._lastTime=a._ticks=0,a._inited=!1},a.getMeasuredTickTime=function(b){var c=0,d=a._tickTimes;if(!d||d.length<1)return-1;b=Math.min(d.length,b||0|a.getFPS());for(var e=0;b>e;e++)c+=d[e];return c/b},a.getMeasuredFPS=function(b){var c=a._times;return!c||c.length<2?-1:(b=Math.min(c.length-1,b||0|a.getFPS()),1e3/((c[0]-c[b])/b))},a.setPaused=function(b){a.paused=b},a.getPaused=function(){return a.paused},a.getTime=function(b){return a._startTime?a._getTime()-(b?a._pausedTime:0):-1},a.getEventTime=function(b){return a._startTime?(a._lastTime||a._startTime)-(b?a._pausedTime:0):-1},a.getTicks=function(b){return a._ticks-(b?a._pausedTicks:0)},a._handleSynch=function(){a._timerId=null,a._setupTick(),a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()},a._handleRAF=function(){a._timerId=null,a._setupTick(),a._tick()},a._handleTimeout=function(){a._timerId=null,a._setupTick(),a._tick()},a._setupTick=function(){if(null==a._timerId){var b=a.timingMode||a.useRAF&&a.RAF_SYNCHED;if(b==a.RAF_SYNCHED||b==a.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c)return a._timerId=c(b==a.RAF?a._handleRAF:a._handleSynch),void(a._raf=!0)}a._raf=!1,a._timerId=setTimeout(a._handleTimeout,a._interval)}},a._tick=function(){var b=a.paused,c=a._getTime(),d=c-a._lastTime;if(a._lastTime=c,a._ticks++,b&&(a._pausedTicks++,a._pausedTime+=d),a.hasEventListener("tick")){var e=new createjs.Event("tick"),f=a.maxDelta;e.delta=f&&d>f?f:d,e.paused=b,e.time=c,e.runTime=c-a._pausedTime,a.dispatchEvent(e)}for(a._tickTimes.unshift(a._getTime()-c);a._tickTimes.length>100;)a._tickTimes.pop();for(a._times.unshift(c);a._times.length>100;)a._times.pop()};var c=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);a._getTime=function(){return(c&&c.call(performance)||(new Date).getTime())-a._startTime},createjs.Ticker=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"UID cannot be instantiated"}a._nextID=0,a.get=function(){return a._nextID++},createjs.UID=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){this.Event_constructor(a,b,c),this.stageX=d,this.stageY=e,this.rawX=null==i?d:i,this.rawY=null==j?e:j,this.nativeEvent=f,this.pointerID=g,this.primary=!!h,this.relatedTarget=k}var b=createjs.extend(a,createjs.Event);b._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},b._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},b._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(b,{localX:{get:b._get_localX},localY:{get:b._get_localY},isTouch:{get:b._get_isTouch}})}catch(c){}b.clone=function(){return new a(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},b.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(a,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d,e,f){this.setValues(a,b,c,d,e,f)}var b=a.prototype;a.DEG_TO_RAD=Math.PI/180,a.identity=null,b.setValues=function(a,b,c,d,e,f){return this.a=null==a?1:a,this.b=b||0,this.c=c||0,this.d=null==d?1:d,this.tx=e||0,this.ty=f||0,this},b.append=function(a,b,c,d,e,f){var g=this.a,h=this.b,i=this.c,j=this.d;return(1!=a||0!=b||0!=c||1!=d)&&(this.a=g*a+i*b,this.b=h*a+j*b,this.c=g*c+i*d,this.d=h*c+j*d),this.tx=g*e+i*f+this.tx,this.ty=h*e+j*f+this.ty,this},b.prepend=function(a,b,c,d,e,f){var g=this.a,h=this.c,i=this.tx;return this.a=a*g+c*this.b,this.b=b*g+d*this.b,this.c=a*h+c*this.d,this.d=b*h+d*this.d,this.tx=a*i+c*this.ty+e,this.ty=b*i+d*this.ty+f,this},b.appendMatrix=function(a){return this.append(a.a,a.b,a.c,a.d,a.tx,a.ty)},b.prependMatrix=function(a){return this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty)},b.appendTransform=function(b,c,d,e,f,g,h,i,j){if(f%360)var k=f*a.DEG_TO_RAD,l=Math.cos(k),m=Math.sin(k);else l=1,m=0;return g||h?(g*=a.DEG_TO_RAD,h*=a.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),b,c),this.append(l*d,m*d,-m*e,l*e,0,0)):this.append(l*d,m*d,-m*e,l*e,b,c),(i||j)&&(this.tx-=i*this.a+j*this.c,this.ty-=i*this.b+j*this.d),this},b.prependTransform=function(b,c,d,e,f,g,h,i,j){if(f%360)var k=f*a.DEG_TO_RAD,l=Math.cos(k),m=Math.sin(k);else l=1,m=0;return(i||j)&&(this.tx-=i,this.ty-=j),g||h?(g*=a.DEG_TO_RAD,h*=a.DEG_TO_RAD,this.prepend(l*d,m*d,-m*e,l*e,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),b,c)):this.prepend(l*d,m*d,-m*e,l*e,b,c),this},b.rotate=function(b){b*=a.DEG_TO_RAD;var c=Math.cos(b),d=Math.sin(b),e=this.a,f=this.b;return this.a=e*c+this.c*d,this.b=f*c+this.d*d,this.c=-e*d+this.c*c,this.d=-f*d+this.d*c,this},b.skew=function(b,c){return b*=a.DEG_TO_RAD,c*=a.DEG_TO_RAD,this.append(Math.cos(c),Math.sin(c),-Math.sin(b),Math.cos(b),0,0),this},b.scale=function(a,b){return this.a*=a,this.b*=a,this.c*=b,this.d*=b,this},b.translate=function(a,b){return this.tx+=this.a*a+this.c*b,this.ty+=this.b*a+this.d*b,this},b.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},b.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},b.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},b.equals=function(a){return this.tx===a.tx&&this.ty===a.ty&&this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d},b.transformPoint=function(a,b,c){return c=c||{},c.x=a*this.a+b*this.c+this.tx,c.y=a*this.b+b*this.d+this.ty,c},b.decompose=function(b){null==b&&(b={}),b.x=this.tx,b.y=this.ty,b.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),b.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var c=Math.atan2(-this.c,this.d),d=Math.atan2(this.b,this.a),e=Math.abs(1-c/d);return 1e-5>e?(b.rotation=d/a.DEG_TO_RAD,this.a<0&&this.d>=0&&(b.rotation+=b.rotation<=0?180:-180),b.skewX=b.skewY=0):(b.skewX=c/a.DEG_TO_RAD,b.skewY=d/a.DEG_TO_RAD),b},b.copy=function(a){return this.setValues(a.a,a.b,a.c,a.d,a.tx,a.ty)},b.clone=function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty)},b.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},a.identity=new a,createjs.Matrix2D=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d,e){this.setValues(a,b,c,d,e)}var b=a.prototype;b.setValues=function(a,b,c,d,e){return this.visible=null==a?!0:!!a,this.alpha=null==b?1:b,this.shadow=c,this.compositeOperation=c,this.matrix=e||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},b.append=function(a,b,c,d,e){return this.alpha*=b,this.shadow=c||this.shadow,this.compositeOperation=d||this.compositeOperation,this.visible=this.visible&&a,e&&this.matrix.appendMatrix(e),this},b.prepend=function(a,b,c,d,e){return this.alpha*=b,this.shadow=this.shadow||c,this.compositeOperation=this.compositeOperation||d,this.visible=this.visible&&a,e&&this.matrix.prependMatrix(e),this},b.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},b.clone=function(){return new a(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.setValues(a,b)}var b=a.prototype;b.setValues=function(a,b){return this.x=a||0,this.y=b||0,this},b.copy=function(a){return this.x=a.x,this.y=a.y,this},b.clone=function(){return new a(this.x,this.y)},b.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d){this.setValues(a,b,c,d)}var b=a.prototype;b.setValues=function(a,b,c,d){return this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this},b.extend=function(a,b,c,d){return c=c||0,d=d||0,a+c>this.x+this.width&&(this.width=a+c-this.x),b+d>this.y+this.height&&(this.height=b+d-this.y),a<this.x&&(this.width+=this.x-a,this.x=a),b<this.y&&(this.height+=this.y-b,this.y=b),this},b.pad=function(a,b,c,d){return this.x-=b,this.y-=a,this.width+=b+d,this.height+=a+c,this},b.copy=function(a){return this.setValues(a.x,a.y,a.width,a.height)},b.contains=function(a,b,c,d){return c=c||0,d=d||0,a>=this.x&&a+c<=this.x+this.width&&b>=this.y&&b+d<=this.y+this.height},b.union=function(a){return this.clone().extend(a.x,a.y,a.width,a.height)},b.intersection=function(b){var c=b.x,d=b.y,e=c+b.width,f=d+b.height;return this.x>c&&(c=this.x),this.y>d&&(d=this.y),this.x+this.width<e&&(e=this.x+this.width),this.y+this.height<f&&(f=this.y+this.height),c>=e||d>=f?null:new a(c,d,e-c,f-d)},b.intersects=function(a){return a.x<=this.x+this.width&&this.x<=a.x+a.width&&a.y<=this.y+this.height&&this.y<=a.y+a.height},b.isEmpty=function(){return this.width<=0||this.height<=0},b.clone=function(){return new a(this.x,this.y,this.width,this.height)},b.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d,e,f,g){a.addEventListener&&(this.target=a,this.overLabel=null==c?"over":c,this.outLabel=null==b?"out":b,this.downLabel=null==d?"down":d,this.play=e,this._isPressed=!1,this._isOver=!1,this._enabled=!1,a.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),f&&(g&&(f.actionsEnabled=!1,f.gotoAndStop&&f.gotoAndStop(g)),a.hitArea=f))}var b=a.prototype;b.setEnabled=function(a){if(a!=this._enabled){var b=this.target;this._enabled=a,a?(b.cursor="pointer",b.addEventListener("rollover",this),b.addEventListener("rollout",this),b.addEventListener("mousedown",this),b.addEventListener("pressup",this),b._reset&&(b.__reset=b._reset,b._reset=this._reset)):(b.cursor=null,b.removeEventListener("rollover",this),b.removeEventListener("rollout",this),b.removeEventListener("mousedown",this),b.removeEventListener("pressup",this),b.__reset&&(b._reset=b.__reset,delete b.__reset))}},b.getEnabled=function(){return this._enabled};try{Object.defineProperties(b,{enabled:{get:b.getEnabled,set:b.setEnabled}})}catch(c){}b.toString=function(){return"[ButtonHelper]"},b.handleEvent=function(a){var b,c=this.target,d=a.type;"mousedown"==d?(this._isPressed=!0,b=this.downLabel):"pressup"==d?(this._isPressed=!1,b=this._isOver?this.overLabel:this.outLabel):"rollover"==d?(this._isOver=!0,b=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,b=this._isPressed?this.overLabel:this.outLabel),this.play?c.gotoAndPlay&&c.gotoAndPlay(b):c.gotoAndStop&&c.gotoAndStop(b)},b._reset=function(){var a=this.paused;this.__reset(),this.paused=a},createjs.ButtonHelper=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d){this.color=a||"black",this.offsetX=b||0,this.offsetY=c||0,this.blur=d||0}var b=a.prototype;a.identity=new a("transparent",0,0,0),b.toString=function(){return"[Shadow]"},b.clone=function(){return new a(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(a)}var b=createjs.extend(a,createjs.EventDispatcher);b.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(b,{animations:{get:b.getAnimations}})}catch(c){}b.getNumFrames=function(a){if(null==a)return this._frames?this._frames.length:this._numFrames||0;var b=this._data[a];return null==b?0:b.frames.length},b.getAnimation=function(a){return this._data[a]},b.getFrame=function(a){var b;return this._frames&&(b=this._frames[a])?b:null},b.getFrameBounds=function(a,b){var c=this.getFrame(a);return c?(b||new createjs.Rectangle).setValues(-c.regX,-c.regY,c.rect.width,c.rect.height):null},b.toString=function(){return"[SpriteSheet]"},b.clone=function(){throw"SpriteSheet cannot be cloned."},b._parseData=function(a){var b,c,d,e;if(null!=a){if(this.framerate=a.framerate||0,a.images&&(c=a.images.length)>0)for(e=this._images=[],b=0;c>b;b++){var f=a.images[b];if("string"==typeof f){var g=f;f=document.createElement("img"),f.src=g}e.push(f),f.getContext||f.naturalWidth||(this._loadCount++,this.complete=!1,function(a){f.onload=function(){a._handleImageLoad()}}(this))}if(null==a.frames);else if(a.frames instanceof Array)for(this._frames=[],e=a.frames,b=0,c=e.length;c>b;b++){var h=e[b];this._frames.push({image:this._images[h[4]?h[4]:0],rect:new createjs.Rectangle(h[0],h[1],h[2],h[3]),regX:h[5]||0,regY:h[6]||0})}else d=a.frames,this._frameWidth=d.width,this._frameHeight=d.height,this._regX=d.regX||0,this._regY=d.regY||0,this._spacing=d.spacing||0,this._margin=d.margin||0,this._numFrames=d.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(d=a.animations)){this._data={};var i;for(i in d){var j={name:i},k=d[i];if("number"==typeof k)e=j.frames=[k];else if(k instanceof Array)if(1==k.length)j.frames=[k[0]];else for(j.speed=k[3],j.next=k[2],e=j.frames=[],b=k[0];b<=k[1];b++)e.push(b);else{j.speed=k.speed,j.next=k.next;var l=k.frames;e=j.frames="number"==typeof l?[l]:l.slice(0)}(j.next===!0||void 0===j.next)&&(j.next=i),(j.next===!1||e.length<2&&j.next==i)&&(j.next=null),j.speed||(j.speed=1),this._animations.push(i),this._data[i]=j}}}},b._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},b._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var a=this._numFrames||1e5,b=0,c=this._frameWidth,d=this._frameHeight,e=this._spacing,f=this._margin;a:for(var g=0,h=this._images;g<h.length;g++)for(var i=h[g],j=i.width,k=i.height,l=f;k-f-d>=l;){for(var m=f;j-f-c>=m;){if(b>=a)break a;b++,this._frames.push({image:i,rect:new createjs.Rectangle(m,l,c,d),regX:this._regX,regY:this._regY}),m+=c+e}l+=d+e}this._numFrames=b}},createjs.SpriteSheet=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var b=a.prototype,c=a;a.getRGB=function(a,b,c,d){return null!=a&&null==c&&(d=b,c=255&a,b=a>>8&255,a=a>>16&255),null==d?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"},a.getHSL=function(a,b,c,d){return null==d?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"},a.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},a.STROKE_CAPS_MAP=["butt","round","square"],a.STROKE_JOINTS_MAP=["miter","round","bevel"];var d=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");d.getContext&&(a._ctx=d.getContext("2d"),d.width=d.height=1),b.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(b,{instructions:{get:b.getInstructions}})}catch(e){}b.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},b.draw=function(a,b){this._updateInstructions();for(var c=this._instructions,d=this._storeIndex,e=c.length;e>d;d++)c[d].exec(a,b)},b.drawAsPath=function(a){this._updateInstructions();for(var b,c=this._instructions,d=this._storeIndex,e=c.length;e>d;d++)(b=c[d]).path!==!1&&b.exec(a)},b.moveTo=function(a,b){return this.append(new c.MoveTo(a,b),!0)},b.lineTo=function(a,b){return this.append(new c.LineTo(a,b))},b.arcTo=function(a,b,d,e,f){return this.append(new c.ArcTo(a,b,d,e,f))},b.arc=function(a,b,d,e,f,g){return this.append(new c.Arc(a,b,d,e,f,g))},b.quadraticCurveTo=function(a,b,d,e){return this.append(new c.QuadraticCurveTo(a,b,d,e))},b.bezierCurveTo=function(a,b,d,e,f,g){return this.append(new c.BezierCurveTo(a,b,d,e,f,g))},b.rect=function(a,b,d,e){return this.append(new c.Rect(a,b,d,e))},b.closePath=function(){return this._activeInstructions.length?this.append(new c.ClosePath):this},b.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},b.beginFill=function(a){return this._setFill(a?new c.Fill(a):null)},b.beginLinearGradientFill=function(a,b,d,e,f,g){return this._setFill((new c.Fill).linearGradient(a,b,d,e,f,g))},b.beginRadialGradientFill=function(a,b,d,e,f,g,h,i){return this._setFill((new c.Fill).radialGradient(a,b,d,e,f,g,h,i))},b.beginBitmapFill=function(a,b,d){return this._setFill(new c.Fill(null,d).bitmap(a,b))},b.endFill=function(){return this.beginFill()},b.setStrokeStyle=function(a,b,d,e,f){return this._updateInstructions(!0),this._strokeStyle=this.command=new c.StrokeStyle(a,b,d,e,f),this._stroke&&(this._stroke.ignoreScale=f),this._strokeIgnoreScale=f,this},b.setStrokeDash=function(a,b){return this._updateInstructions(!0),this._strokeDash=this.command=new c.StrokeDash(a,b),this},b.beginStroke=function(a){return this._setStroke(a?new c.Stroke(a):null)},b.beginLinearGradientStroke=function(a,b,d,e,f,g){return this._setStroke((new c.Stroke).linearGradient(a,b,d,e,f,g))},b.beginRadialGradientStroke=function(a,b,d,e,f,g,h,i){return this._setStroke((new c.Stroke).radialGradient(a,b,d,e,f,g,h,i))},b.beginBitmapStroke=function(a,b){return this._setStroke((new c.Stroke).bitmap(a,b))},b.endStroke=function(){return this.beginStroke()},b.curveTo=b.quadraticCurveTo,b.drawRect=b.rect,b.drawRoundRect=function(a,b,c,d,e){return this.drawRoundRectComplex(a,b,c,d,e,e,e,e)},b.drawRoundRectComplex=function(a,b,d,e,f,g,h,i){return this.append(new c.RoundRect(a,b,d,e,f,g,h,i))},b.drawCircle=function(a,b,d){return this.append(new c.Circle(a,b,d))},b.drawEllipse=function(a,b,d,e){return this.append(new c.Ellipse(a,b,d,e))},b.drawPolyStar=function(a,b,d,e,f,g){return this.append(new c.PolyStar(a,b,d,e,f,g))},b.append=function(a,b){return this._activeInstructions.push(a),this.command=a,b||(this._dirty=!0),this},b.decodePath=function(b){for(var c=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],d=[2,2,4,6,0],e=0,f=b.length,g=[],h=0,i=0,j=a.BASE_64;f>e;){var k=b.charAt(e),l=j[k],m=l>>3,n=c[m];if(!n||3&l)throw"bad path data (@"+e+"): "+k;var o=d[m];m||(h=i=0),g.length=0,e++;for(var p=(l>>2&1)+2,q=0;o>q;q++){var r=j[b.charAt(e)],s=r>>5?-1:1;r=(31&r)<<6|j[b.charAt(e+1)],3==p&&(r=r<<6|j[b.charAt(e+2)]),r=s*r/10,q%2?h=r+=h:i=r+=i,g[q]=r,e+=p}n.apply(this,g)}return this},b.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},b.unstore=function(){return this._storeIndex=0,this},b.clone=function(){var b=new a;return b.command=this.command,b._stroke=this._stroke,b._strokeStyle=this._strokeStyle,b._strokeDash=this._strokeDash,b._strokeIgnoreScale=this._strokeIgnoreScale,b._fill=this._fill,b._instructions=this._instructions.slice(),b._commitIndex=this._commitIndex,b._activeInstructions=this._activeInstructions.slice(),b._dirty=this._dirty,b._storeIndex=this._storeIndex,b},b.toString=function(){return"[Graphics]"},b.mt=b.moveTo,b.lt=b.lineTo,b.at=b.arcTo,b.bt=b.bezierCurveTo,b.qt=b.quadraticCurveTo,b.a=b.arc,b.r=b.rect,b.cp=b.closePath,b.c=b.clear,b.f=b.beginFill,b.lf=b.beginLinearGradientFill,b.rf=b.beginRadialGradientFill,b.bf=b.beginBitmapFill,b.ef=b.endFill,b.ss=b.setStrokeStyle,b.sd=b.setStrokeDash,b.s=b.beginStroke,b.ls=b.beginLinearGradientStroke,b.rs=b.beginRadialGradientStroke,b.bs=b.beginBitmapStroke,b.es=b.endStroke,b.dr=b.drawRect,b.rr=b.drawRoundRect,b.rc=b.drawRoundRectComplex,b.dc=b.drawCircle,b.de=b.drawEllipse,b.dp=b.drawPolyStar,b.p=b.decodePath,b._updateInstructions=function(b){var c=this._instructions,d=this._activeInstructions,e=this._commitIndex;if(this._dirty&&d.length){c.length=e,c.push(a.beginCmd);var f=d.length,g=c.length;c.length=g+f;for(var h=0;f>h;h++)c[h+g]=d[h];this._fill&&c.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,c.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,c.push(this._strokeStyle)),c.push(this._stroke)),this._dirty=!1}b&&(d.length=0,this._commitIndex=c.length)},b._setFill=function(a){return this._updateInstructions(!0),this.command=this._fill=a,this},b._setStroke=function(a){return this._updateInstructions(!0),(this.command=this._stroke=a)&&(a.ignoreScale=this._strokeIgnoreScale),this},(c.LineTo=function(a,b){this.x=a,this.y=b}).prototype.exec=function(a){a.lineTo(this.x,this.y)},(c.MoveTo=function(a,b){this.x=a,this.y=b}).prototype.exec=function(a){a.moveTo(this.x,this.y)},(c.ArcTo=function(a,b,c,d,e){this.x1=a,this.y1=b,this.x2=c,this.y2=d,this.radius=e}).prototype.exec=function(a){a.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(c.Arc=function(a,b,c,d,e,f){this.x=a,this.y=b,this.radius=c,this.startAngle=d,this.endAngle=e,this.anticlockwise=!!f}).prototype.exec=function(a){a.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(c.QuadraticCurveTo=function(a,b,c,d){this.cpx=a,this.cpy=b,this.x=c,this.y=d}).prototype.exec=function(a){a.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(c.BezierCurveTo=function(a,b,c,d,e,f){this.cp1x=a,this.cp1y=b,this.cp2x=c,this.cp2y=d,this.x=e,this.y=f}).prototype.exec=function(a){a.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(c.Rect=function(a,b,c,d){this.x=a,this.y=b,this.w=c,this.h=d}).prototype.exec=function(a){a.rect(this.x,this.y,this.w,this.h)},(c.ClosePath=function(){}).prototype.exec=function(a){a.closePath()},(c.BeginPath=function(){}).prototype.exec=function(a){a.beginPath()},b=(c.Fill=function(a,b){this.style=a,this.matrix=b}).prototype,b.exec=function(a){if(this.style){a.fillStyle=this.style;var b=this.matrix;b&&(a.save(),a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty)),a.fill(),b&&a.restore()}},b.linearGradient=function(b,c,d,e,f,g){for(var h=this.style=a._ctx.createLinearGradient(d,e,f,g),i=0,j=b.length;j>i;i++)h.addColorStop(c[i],b[i]);return h.props={colors:b,ratios:c,x0:d,y0:e,x1:f,y1:g,type:"linear"},this},b.radialGradient=function(b,c,d,e,f,g,h,i){for(var j=this.style=a._ctx.createRadialGradient(d,e,f,g,h,i),k=0,l=b.length;l>k;k++)j.addColorStop(c[k],b[k]);return j.props={colors:b,ratios:c,x0:d,y0:e,r0:f,x1:g,y1:h,r1:i,type:"radial"},this},b.bitmap=function(b,c){if(b.naturalWidth||b.getContext||b.readyState>=2){var d=this.style=a._ctx.createPattern(b,c||"");d.props={image:b,repetition:c,type:"bitmap"}}return this},b.path=!1,b=(c.Stroke=function(a,b){this.style=a,this.ignoreScale=b}).prototype,b.exec=function(a){this.style&&(a.strokeStyle=this.style,this.ignoreScale&&(a.save(),a.setTransform(1,0,0,1,0,0)),a.stroke(),this.ignoreScale&&a.restore())},b.linearGradient=c.Fill.prototype.linearGradient,b.radialGradient=c.Fill.prototype.radialGradient,b.bitmap=c.Fill.prototype.bitmap,b.path=!1,b=(c.StrokeStyle=function(a,b,c,d){this.width=a,this.caps=b,this.joints=c,this.miterLimit=d}).prototype,b.exec=function(b){b.lineWidth=null==this.width?"1":this.width,b.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:a.STROKE_CAPS_MAP[this.caps],b.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:a.STROKE_JOINTS_MAP[this.joints],b.miterLimit=null==this.miterLimit?"10":this.miterLimit},b.path=!1,(c.StrokeDash=function(a,b){this.segments=a,this.offset=b||0}).prototype.exec=function(a){a.setLineDash&&(a.setLineDash(this.segments||c.StrokeDash.EMPTY_SEGMENTS),a.lineDashOffset=this.offset||0)},c.StrokeDash.EMPTY_SEGMENTS=[],(c.RoundRect=function(a,b,c,d,e,f,g,h){this.x=a,this.y=b,this.w=c,this.h=d,this.radiusTL=e,this.radiusTR=f,this.radiusBR=g,this.radiusBL=h}).prototype.exec=function(a){var b=(j>i?i:j)/2,c=0,d=0,e=0,f=0,g=this.x,h=this.y,i=this.w,j=this.h,k=this.radiusTL,l=this.radiusTR,m=this.radiusBR,n=this.radiusBL;0>k&&(k*=c=-1),k>b&&(k=b),0>l&&(l*=d=-1),l>b&&(l=b),0>m&&(m*=e=-1),m>b&&(m=b),0>n&&(n*=f=-1),n>b&&(n=b),a.moveTo(g+i-l,h),a.arcTo(g+i+l*d,h-l*d,g+i,h+l,l),a.lineTo(g+i,h+j-m),a.arcTo(g+i+m*e,h+j+m*e,g+i-m,h+j,m),a.lineTo(g+n,h+j),a.arcTo(g-n*f,h+j+n*f,g,h+j-n,n),a.lineTo(g,h+k),a.arcTo(g-k*c,h-k*c,g+k,h,k),a.closePath()},(c.Circle=function(a,b,c){this.x=a,this.y=b,this.radius=c}).prototype.exec=function(a){a.arc(this.x,this.y,this.radius,0,2*Math.PI)},(c.Ellipse=function(a,b,c,d){this.x=a,this.y=b,this.w=c,this.h=d}).prototype.exec=function(a){var b=this.x,c=this.y,d=this.w,e=this.h,f=.5522848,g=d/2*f,h=e/2*f,i=b+d,j=c+e,k=b+d/2,l=c+e/2;a.moveTo(b,l),a.bezierCurveTo(b,l-h,k-g,c,k,c),a.bezierCurveTo(k+g,c,i,l-h,i,l),a.bezierCurveTo(i,l+h,k+g,j,k,j),a.bezierCurveTo(k-g,j,b,l+h,b,l)},(c.PolyStar=function(a,b,c,d,e,f){this.x=a,this.y=b,this.radius=c,this.sides=d,this.pointSize=e,this.angle=f}).prototype.exec=function(a){var b=this.x,c=this.y,d=this.radius,e=(this.angle||0)/180*Math.PI,f=this.sides,g=1-(this.pointSize||0),h=Math.PI/f;a.moveTo(b+Math.cos(e)*d,c+Math.sin(e)*d);for(var i=0;f>i;i++)e+=h,1!=g&&a.lineTo(b+Math.cos(e)*d*g,c+Math.sin(e)*d*g),e+=h,a.lineTo(b+Math.cos(e)*d,c+Math.sin(e)*d);a.closePath()},a.beginCmd=new c.BeginPath,createjs.Graphics=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null;

}var b=createjs.extend(a,createjs.EventDispatcher);a._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],a.suppressCrossDomainErrors=!1,a._snapToPixelEnabled=!1;var c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");c.getContext&&(a._hitTestCanvas=c,a._hitTestContext=c.getContext("2d"),c.width=c.height=1),a._nextCacheID=1,b.getStage=function(){for(var a=this,b=createjs.Stage;a.parent;)a=a.parent;return a instanceof b?a:null};try{Object.defineProperties(b,{stage:{get:b.getStage}})}catch(d){}b.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},b.draw=function(a,b){var c=this.cacheCanvas;if(b||!c)return!1;var d=this._cacheScale;return a.drawImage(c,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,c.width/d,c.height/d),!0},b.updateContext=function(b){var c=this,d=c.mask,e=c._props.matrix;d&&d.graphics&&!d.graphics.isEmpty()&&(d.getMatrix(e),b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),d.graphics.drawAsPath(b),b.clip(),e.invert(),b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),this.getMatrix(e);var f=e.tx,g=e.ty;a._snapToPixelEnabled&&c.snapToPixel&&(f=f+(0>f?-.5:.5)|0,g=g+(0>g?-.5:.5)|0),b.transform(e.a,e.b,e.c,e.d,f,g),b.globalAlpha*=c.alpha,c.compositeOperation&&(b.globalCompositeOperation=c.compositeOperation),c.shadow&&this._applyShadow(b,c.shadow)},b.cache=function(a,b,c,d,e){e=e||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=c,this._cacheHeight=d,this._cacheOffsetX=a,this._cacheOffsetY=b,this._cacheScale=e,this.updateCache()},b.updateCache=function(b){var c=this.cacheCanvas;if(!c)throw"cache() must be called before updateCache()";var d=this._cacheScale,e=this._cacheOffsetX*d,f=this._cacheOffsetY*d,g=this._cacheWidth,h=this._cacheHeight,i=c.getContext("2d"),j=this._getFilterBounds();e+=this._filterOffsetX=j.x,f+=this._filterOffsetY=j.y,g=Math.ceil(g*d)+j.width,h=Math.ceil(h*d)+j.height,g!=c.width||h!=c.height?(c.width=g,c.height=h):b||i.clearRect(0,0,g+1,h+1),i.save(),i.globalCompositeOperation=b,i.setTransform(d,0,0,d,-e,-f),this.draw(i,!0),this._applyFilters(),i.restore(),this.cacheID=a._nextCacheID++},b.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},b.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},b.localToGlobal=function(a,b,c){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(a,b,c||new createjs.Point)},b.globalToLocal=function(a,b,c){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(a,b,c||new createjs.Point)},b.localToLocal=function(a,b,c,d){return d=this.localToGlobal(a,b,d),c.globalToLocal(d.x,d.y,d)},b.setTransform=function(a,b,c,d,e,f,g,h,i){return this.x=a||0,this.y=b||0,this.scaleX=null==c?1:c,this.scaleY=null==d?1:d,this.rotation=e||0,this.skewX=f||0,this.skewY=g||0,this.regX=h||0,this.regY=i||0,this},b.getMatrix=function(a){var b=this,c=a&&a.identity()||new createjs.Matrix2D;return b.transformMatrix?c.copy(b.transformMatrix):c.appendTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY)},b.getConcatenatedMatrix=function(a){for(var b=this,c=this.getMatrix(a);b=b.parent;)c.prependMatrix(b.getMatrix(b._props.matrix));return c},b.getConcatenatedDisplayProps=function(a){a=a?a.identity():new createjs.DisplayProps;var b=this,c=b.getMatrix(a.matrix);do a.prepend(b.visible,b.alpha,b.shadow,b.compositeOperation),b!=this&&c.prependMatrix(b.getMatrix(b._props.matrix));while(b=b.parent);return a},b.hitTest=function(b,c){var d=a._hitTestContext;d.setTransform(1,0,0,1,-b,-c),this.draw(d);var e=this._testHit(d);return d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,2,2),e},b.set=function(a){for(var b in a)this[b]=a[b];return this},b.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var a=this.cacheCanvas;if(a){var b=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,a.width/b,a.height/b)}return null},b.getTransformedBounds=function(){return this._getBounds()},b.setBounds=function(a,b,c,d){null==a&&(this._bounds=a),this._bounds=(this._bounds||new createjs.Rectangle).setValues(a,b,c,d)},b.clone=function(){return this._cloneProps(new a)},b.toString=function(){return"[DisplayObject (name="+this.name+")]"},b._cloneProps=function(a){return a.alpha=this.alpha,a.mouseEnabled=this.mouseEnabled,a.tickEnabled=this.tickEnabled,a.name=this.name,a.regX=this.regX,a.regY=this.regY,a.rotation=this.rotation,a.scaleX=this.scaleX,a.scaleY=this.scaleY,a.shadow=this.shadow,a.skewX=this.skewX,a.skewY=this.skewY,a.visible=this.visible,a.x=this.x,a.y=this.y,a.compositeOperation=this.compositeOperation,a.snapToPixel=this.snapToPixel,a.filters=null==this.filters?null:this.filters.slice(0),a.mask=this.mask,a.hitArea=this.hitArea,a.cursor=this.cursor,a._bounds=this._bounds,a},b._applyShadow=function(a,b){b=b||Shadow.identity,a.shadowColor=b.color,a.shadowOffsetX=b.offsetX,a.shadowOffsetY=b.offsetY,a.shadowBlur=b.blur},b._tick=function(a){var b=this._listeners;b&&b.tick&&(a.target=null,a.propagationStopped=a.immediatePropagationStopped=!1,this.dispatchEvent(a))},b._testHit=function(b){try{var c=b.getImageData(0,0,1,1).data[3]>1}catch(d){if(!a.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return c},b._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var a=this.filters.length,b=this.cacheCanvas.getContext("2d"),c=this.cacheCanvas.width,d=this.cacheCanvas.height,e=0;a>e;e++)this.filters[e].applyFilter(b,0,0,c,d)},b._getFilterBounds=function(){var a,b=this.filters,c=this._rectangle.setValues(0,0,0,0);if(!b||!(a=b.length))return c;for(var d=0;a>d;d++){var e=this.filters[d];e.getBounds&&e.getBounds(c)}return c},b._getBounds=function(a,b){return this._transformBounds(this.getBounds(),a,b)},b._transformBounds=function(a,b,c){if(!a)return a;var d=a.x,e=a.y,f=a.width,g=a.height,h=this._props.matrix;h=c?h.identity():this.getMatrix(h),(d||e)&&h.appendTransform(0,0,1,1,0,0,0,-d,-e),b&&h.prependMatrix(b);var i=f*h.a,j=f*h.b,k=g*h.c,l=g*h.d,m=h.tx,n=h.ty,o=m,p=m,q=n,r=n;return(d=i+m)<o?o=d:d>p&&(p=d),(d=i+k+m)<o?o=d:d>p&&(p=d),(d=k+m)<o?o=d:d>p&&(p=d),(e=j+n)<q?q=e:e>r&&(r=e),(e=j+l+n)<q?q=e:e>r&&(r=e),(e=l+n)<q?q=e:e>r&&(r=e),a.setValues(o,q,p-o,r-q)},b._hasMouseEventListener=function(){for(var b=a._MOUSE_EVENTS,c=0,d=b.length;d>c;c++)if(this.hasEventListener(b[c]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var b=createjs.extend(a,createjs.DisplayObject);b.getNumChildren=function(){return this.children.length};try{Object.defineProperties(b,{numChildren:{get:b.getNumChildren}})}catch(c){}b.initialize=a,b.isVisible=function(){var a=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;for(var c=this.children.slice(),d=0,e=c.length;e>d;d++){var f=c[d];f.isVisible()&&(a.save(),f.updateContext(a),f.draw(a),a.restore())}return!0},b.addChild=function(a){if(null==a)return a;var b=arguments.length;if(b>1){for(var c=0;b>c;c++)this.addChild(arguments[c]);return arguments[b-1]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.push(a),a.dispatchEvent("added"),a},b.addChildAt=function(a,b){var c=arguments.length,d=arguments[c-1];if(0>d||d>this.children.length)return arguments[c-2];if(c>2){for(var e=0;c-1>e;e++)this.addChildAt(arguments[e],d+e);return arguments[c-2]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),a.dispatchEvent("added"),a},b.removeChild=function(a){var b=arguments.length;if(b>1){for(var c=!0,d=0;b>d;d++)c=c&&this.removeChild(arguments[d]);return c}return this.removeChildAt(createjs.indexOf(this.children,a))},b.removeChildAt=function(a){var b=arguments.length;if(b>1){for(var c=[],d=0;b>d;d++)c[d]=arguments[d];c.sort(function(a,b){return b-a});for(var e=!0,d=0;b>d;d++)e=e&&this.removeChildAt(c[d]);return e}if(0>a||a>this.children.length-1)return!1;var f=this.children[a];return f&&(f.parent=null),this.children.splice(a,1),f.dispatchEvent("removed"),!0},b.removeAllChildren=function(){for(var a=this.children;a.length;)this.removeChildAt(0)},b.getChildAt=function(a){return this.children[a]},b.getChildByName=function(a){for(var b=this.children,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},b.sortChildren=function(a){this.children.sort(a)},b.getChildIndex=function(a){return createjs.indexOf(this.children,a)},b.swapChildrenAt=function(a,b){var c=this.children,d=c[a],e=c[b];d&&e&&(c[a]=e,c[b]=d)},b.swapChildren=function(a,b){for(var c,d,e=this.children,f=0,g=e.length;g>f&&(e[f]==a&&(c=f),e[f]==b&&(d=f),null==c||null==d);f++);f!=g&&(e[c]=b,e[d]=a)},b.setChildIndex=function(a,b){var c=this.children,d=c.length;if(!(a.parent!=this||0>b||b>=d)){for(var e=0;d>e&&c[e]!=a;e++);e!=d&&e!=b&&(c.splice(e,1),c.splice(b,0,a))}},b.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1},b.hitTest=function(a,b){return null!=this.getObjectUnderPoint(a,b)},b.getObjectsUnderPoint=function(a,b,c){var d=[],e=this.localToGlobal(a,b);return this._getObjectsUnderPoint(e.x,e.y,d,c>0,1==c),d},b.getObjectUnderPoint=function(a,b,c){var d=this.localToGlobal(a,b);return this._getObjectsUnderPoint(d.x,d.y,null,c>0,1==c)},b.getBounds=function(){return this._getBounds(null,!0)},b.getTransformedBounds=function(){return this._getBounds()},b.clone=function(b){var c=this._cloneProps(new a);return b&&this._cloneChildren(c),c},b.toString=function(){return"[Container (name="+this.name+")]"},b._tick=function(a){if(this.tickChildren)for(var b=this.children.length-1;b>=0;b--){var c=this.children[b];c.tickEnabled&&c._tick&&c._tick(a)}this.DisplayObject__tick(a)},b._cloneChildren=function(a){a.children.length&&a.removeAllChildren();for(var b=a.children,c=0,d=this.children.length;d>c;c++){var e=this.children[c].clone(!0);e.parent=a,b.push(e)}},b._getObjectsUnderPoint=function(b,c,d,e,f,g){if(g=g||0,!g&&!this._testMask(this,b,c))return null;var h,i=createjs.DisplayObject._hitTestContext;f=f||e&&this._hasMouseEventListener();for(var j=this.children,k=j.length,l=k-1;l>=0;l--){var m=j[l],n=m.hitArea;if(m.visible&&(n||m.isVisible())&&(!e||m.mouseEnabled)&&(n||this._testMask(m,b,c)))if(!n&&m instanceof a){var o=m._getObjectsUnderPoint(b,c,d,e,f,g+1);if(!d&&o)return e&&!this.mouseChildren?this:o}else{if(e&&!f&&!m._hasMouseEventListener())continue;var p=m.getConcatenatedDisplayProps(m._props);if(h=p.matrix,n&&(h.appendMatrix(n.getMatrix(n._props.matrix)),p.alpha=n.alpha),i.globalAlpha=p.alpha,i.setTransform(h.a,h.b,h.c,h.d,h.tx-b,h.ty-c),(n||m).draw(i),!this._testHit(i))continue;if(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,2,2),!d)return e&&!this.mouseChildren?this:m;d.push(m)}}return null},b._testMask=function(a,b,c){var d=a.mask;if(!d||!d.graphics||d.graphics.isEmpty())return!0;var e=this._props.matrix,f=a.parent;e=f?f.getConcatenatedMatrix(e):e.identity(),e=d.getMatrix(d._props.matrix).prependMatrix(e);var g=createjs.DisplayObject._hitTestContext;return g.setTransform(e.a,e.b,e.c,e.d,e.tx-b,e.ty-c),d.graphics.drawAsPath(g),g.fillStyle="#000",g.fill(),this._testHit(g)?(g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,2,2),!0):!1},b._getBounds=function(a,b){var c=this.DisplayObject_getBounds();if(c)return this._transformBounds(c,a,b);var d=this._props.matrix;d=b?d.identity():this.getMatrix(d),a&&d.prependMatrix(a);for(var e=this.children.length,f=null,g=0;e>g;g++){var h=this.children[g];h.visible&&(c=h._getBounds(d))&&(f?f.extend(c.x,c.y,c.width,c.height):f=c.clone())}return f},createjs.Container=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof a?document.getElementById(a):a,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var b=createjs.extend(a,createjs.Container);b._get_nextStage=function(){return this._nextStage},b._set_nextStage=function(a){this._nextStage&&(this._nextStage._prevStage=null),a&&(a._prevStage=this),this._nextStage=a};try{Object.defineProperties(b,{nextStage:{get:b._get_nextStage,set:b._set_nextStage}})}catch(c){}b.update=function(a){if(this.canvas&&(this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart",!1,!0)!==!1)){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var b=this.drawRect,c=this.canvas.getContext("2d");c.setTransform(1,0,0,1,0,0),this.autoClear&&(b?c.clearRect(b.x,b.y,b.width,b.height):c.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),c.save(),this.drawRect&&(c.beginPath(),c.rect(b.x,b.y,b.width,b.height),c.clip()),this.updateContext(c),this.draw(c,!1),c.restore(),this.dispatchEvent("drawend")}},b.tick=function(a){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var b=new createjs.Event("tick");if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);this._tick(b),this.dispatchEvent("tickend")}},b.handleEvent=function(a){"tick"==a.type&&this.update(a)},b.clear=function(){if(this.canvas){var a=this.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},b.toDataURL=function(a,b){var c,d=this.canvas.getContext("2d"),e=this.canvas.width,f=this.canvas.height;if(a){c=d.getImageData(0,0,e,f);var g=d.globalCompositeOperation;d.globalCompositeOperation="destination-over",d.fillStyle=a,d.fillRect(0,0,e,f)}var h=this.canvas.toDataURL(b||"image/png");return a&&(d.putImageData(c,0,0),d.globalCompositeOperation=g),h},b.enableMouseOver=function(a){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==a&&this._testMouseOver(!0)),null==a)a=20;else if(0>=a)return;var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1e3/Math.min(50,a))},b.enableDOMEvents=function(a){null==a&&(a=!0);var b,c,d=this._eventListeners;if(!a&&d){for(b in d)c=d[b],c.t.removeEventListener(b,c.f,!1);this._eventListeners=null}else if(a&&!d&&this.canvas){var e=window.addEventListener?window:document,f=this;d=this._eventListeners={},d.mouseup={t:e,f:function(a){f._handleMouseUp(a)}},d.mousemove={t:e,f:function(a){f._handleMouseMove(a)}},d.dblclick={t:this.canvas,f:function(a){f._handleDoubleClick(a)}},d.mousedown={t:this.canvas,f:function(a){f._handleMouseDown(a)}};for(b in d)c=d[b],c.t.addEventListener(b,c.f,!1)}},b.clone=function(){throw"Stage cannot be cloned."},b.toString=function(){return"[Stage (name="+this.name+")]"},b._getElementRect=function(a){var b;try{b=a.getBoundingClientRect()}catch(c){b={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var d=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),e=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),f=window.getComputedStyle?getComputedStyle(a,null):a.currentStyle,g=parseInt(f.paddingLeft)+parseInt(f.borderLeftWidth),h=parseInt(f.paddingTop)+parseInt(f.borderTopWidth),i=parseInt(f.paddingRight)+parseInt(f.borderRightWidth),j=parseInt(f.paddingBottom)+parseInt(f.borderBottomWidth);return{left:b.left+d+g,right:b.right+d-i,top:b.top+e+h,bottom:b.bottom+e-j}},b._getPointerData=function(a){var b=this._pointerData[a];return b||(b=this._pointerData[a]={x:0,y:0}),b},b._handleMouseMove=function(a){a||(a=window.event),this._handlePointerMove(-1,a,a.pageX,a.pageY)},b._handlePointerMove=function(a,b,c,d,e){if((!this._prevStage||void 0!==e)&&this.canvas){var f=this._nextStage,g=this._getPointerData(a),h=g.inBounds;this._updatePointerPosition(a,b,c,d),(h||g.inBounds||this.mouseMoveOutside)&&(-1===a&&g.inBounds==!h&&this._dispatchMouseEvent(this,h?"mouseleave":"mouseenter",!1,a,g,b),this._dispatchMouseEvent(this,"stagemousemove",!1,a,g,b),this._dispatchMouseEvent(g.target,"pressmove",!0,a,g,b)),f&&f._handlePointerMove(a,b,c,d,null)}},b._updatePointerPosition=function(a,b,c,d){var e=this._getElementRect(this.canvas);c-=e.left,d-=e.top;var f=this.canvas.width,g=this.canvas.height;c/=(e.right-e.left)/f,d/=(e.bottom-e.top)/g;var h=this._getPointerData(a);(h.inBounds=c>=0&&d>=0&&f-1>=c&&g-1>=d)?(h.x=c,h.y=d):this.mouseMoveOutside&&(h.x=0>c?0:c>f-1?f-1:c,h.y=0>d?0:d>g-1?g-1:d),h.posEvtObj=b,h.rawX=c,h.rawY=d,(a===this._primaryPointerID||-1===a)&&(this.mouseX=h.x,this.mouseY=h.y,this.mouseInBounds=h.inBounds)},b._handleMouseUp=function(a){this._handlePointerUp(-1,a,!1)},b._handlePointerUp=function(a,b,c,d){var e=this._nextStage,f=this._getPointerData(a);if(!this._prevStage||void 0!==d){var g=null,h=f.target;d||!h&&!e||(g=this._getObjectsUnderPoint(f.x,f.y,null,!0)),f.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,a,f,b,g),f.down=!1),g==h&&this._dispatchMouseEvent(h,"click",!0,a,f,b),this._dispatchMouseEvent(h,"pressup",!0,a,f,b),c?(a==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[a]):f.target=null,e&&e._handlePointerUp(a,b,c,d||g&&this)}},b._handleMouseDown=function(a){this._handlePointerDown(-1,a,a.pageX,a.pageY)},b._handlePointerDown=function(a,b,c,d,e){this.preventSelection&&b.preventDefault(),(null==this._primaryPointerID||-1===a)&&(this._primaryPointerID=a),null!=d&&this._updatePointerPosition(a,b,c,d);var f=null,g=this._nextStage,h=this._getPointerData(a);e||(f=h.target=this._getObjectsUnderPoint(h.x,h.y,null,!0)),h.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,a,h,b,f),h.down=!0),this._dispatchMouseEvent(f,"mousedown",!0,a,h,b),g&&g._handlePointerDown(a,b,c,d,e||f&&this)},b._testMouseOver=function(a,b,c){if(!this._prevStage||void 0!==b){var d=this._nextStage;if(!this._mouseOverIntervalID)return void(d&&d._testMouseOver(a,b,c));var e=this._getPointerData(-1);if(e&&(a||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var f,g,h,i=e.posEvtObj,j=c||i&&i.target==this.canvas,k=null,l=-1,m="";!b&&(a||this.mouseInBounds&&j)&&(k=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var n=this._mouseOverTarget||[],o=n[n.length-1],p=this._mouseOverTarget=[];for(f=k;f;)p.unshift(f),m||(m=f.cursor),f=f.parent;for(this.canvas.style.cursor=m,!b&&c&&(c.canvas.style.cursor=m),g=0,h=p.length;h>g&&p[g]==n[g];g++)l=g;for(o!=k&&this._dispatchMouseEvent(o,"mouseout",!0,-1,e,i,k),g=n.length-1;g>l;g--)this._dispatchMouseEvent(n[g],"rollout",!1,-1,e,i,k);for(g=p.length-1;g>l;g--)this._dispatchMouseEvent(p[g],"rollover",!1,-1,e,i,o);o!=k&&this._dispatchMouseEvent(k,"mouseover",!0,-1,e,i,o),d&&d._testMouseOver(a,b||k&&this,c||j&&this)}}},b._handleDoubleClick=function(a,b){var c=null,d=this._nextStage,e=this._getPointerData(-1);b||(c=this._getObjectsUnderPoint(e.x,e.y,null,!0),this._dispatchMouseEvent(c,"dblclick",!0,-1,e,a)),d&&d._handleDoubleClick(a,b||c&&this)},b._dispatchMouseEvent=function(a,b,c,d,e,f,g){if(a&&(c||a.hasEventListener(b))){var h=new createjs.MouseEvent(b,c,!1,e.x,e.y,f,d,d===this._primaryPointerID||-1===d,e.rawX,e.rawY,g);a.dispatchEvent(h)}},createjs.Stage=createjs.promote(a,"Container")}(),this.createjs=this.createjs||{},function(){function a(a){this.DisplayObject_constructor(),"string"==typeof a?(this.image=document.createElement("img"),this.image.src=a):this.image=a,this.sourceRect=null}var b=createjs.extend(a,createjs.DisplayObject);b.initialize=a,b.isVisible=function(){var a=this.image,b=this.cacheCanvas||a&&(a.naturalWidth||a.getContext||a.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},b.draw=function(a,b){if(this.DisplayObject_draw(a,b)||!this.image)return!0;var c=this.image,d=this.sourceRect;if(d){var e=d.x,f=d.y,g=e+d.width,h=f+d.height,i=0,j=0,k=c.width,l=c.height;0>e&&(i-=e,e=0),g>k&&(g=k),0>f&&(j-=f,f=0),h>l&&(h=l),a.drawImage(c,e,f,g-e,h-f,i,j,g-e,h-f)}else a.drawImage(c,0,0);return!0},b.getBounds=function(){var a=this.DisplayObject_getBounds();if(a)return a;var b=this.image,c=this.sourceRect||b,d=b&&(b.naturalWidth||b.getContext||b.readyState>=2);return d?this._rectangle.setValues(0,0,c.width,c.height):null},b.clone=function(){var b=new a(this.image);return this.sourceRect&&(b.sourceRect=this.sourceRect.clone()),this._cloneProps(b),b},b.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=a,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=b&&this.gotoAndPlay(b)}var b=createjs.extend(a,createjs.DisplayObject);b.initialize=a,b.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this._normalizeFrame();var c=this.spriteSheet.getFrame(0|this._currentFrame);if(!c)return!1;var d=c.rect;return d.width&&d.height&&a.drawImage(c.image,d.x,d.y,d.width,d.height,-c.regX,-c.regY,d.width,d.height),!0},b.play=function(){this.paused=!1},b.stop=function(){this.paused=!0},b.gotoAndPlay=function(a){this.paused=!1,this._skipAdvance=!0,this._goto(a)},b.gotoAndStop=function(a){this.paused=!0,this._goto(a)},b.advance=function(a){var b=this.framerate||this.spriteSheet.framerate,c=b&&null!=a?a/(1e3/b):1;this._normalizeFrame(c)},b.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},b.clone=function(){return this._cloneProps(new a(this.spriteSheet))},b.toString=function(){return"[Sprite (name="+this.name+")]"},b._cloneProps=function(a){return this.DisplayObject__cloneProps(a),a.currentFrame=this.currentFrame,a.currentAnimation=this.currentAnimation,a.paused=this.paused,a.currentAnimationFrame=this.currentAnimationFrame,a.framerate=this.framerate,a._animation=this._animation,a._currentFrame=this._currentFrame,a._skipAdvance=this._skipAdvance,a},b._tick=function(a){this.paused||(this._skipAdvance||this.advance(a&&a.delta),this._skipAdvance=!1),this.DisplayObject__tick(a)},b._normalizeFrame=function(a){a=a||0;var b,c=this._animation,d=this.paused,e=this._currentFrame;if(c){var f=c.speed||1,g=this.currentAnimationFrame;if(b=c.frames.length,g+a*f>=b){var h=c.next;if(this._dispatchAnimationEnd(c,e,d,h,b-1))return;if(h)return this._goto(h,a-(b-g)/f);this.paused=!0,g=c.frames.length-1}else g+=a*f;this.currentAnimationFrame=g,this._currentFrame=c.frames[0|g]}else if(e=this._currentFrame+=a,b=this.spriteSheet.getNumFrames(),e>=b&&b>0&&!this._dispatchAnimationEnd(c,e,d,b-1)&&(this._currentFrame-=b)>=b)return this._normalizeFrame();e=0|this._currentFrame,this.currentFrame!=e&&(this.currentFrame=e,this.dispatchEvent("change"))},b._dispatchAnimationEnd=function(a,b,c,d,e){var f=a?a.name:null;if(this.hasEventListener("animationend")){var g=new createjs.Event("animationend");g.name=f,g.next=d,this.dispatchEvent(g)}var h=this._animation!=a||this._currentFrame!=b;return h||c||!this.paused||(this.currentAnimationFrame=e,h=!0),h},b._goto=function(a,b){if(this.currentAnimationFrame=0,isNaN(a)){var c=this.spriteSheet.getAnimation(a);c&&(this._animation=c,this.currentAnimation=a,this._normalizeFrame(b))}else this.currentAnimation=this._animation=null,this._currentFrame=a,this._normalizeFrame()},createjs.Sprite=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.DisplayObject_constructor(),this.graphics=a?a:new createjs.Graphics}var b=createjs.extend(a,createjs.DisplayObject);b.isVisible=function(){var a=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this.graphics.draw(a,this),!0)},b.clone=function(b){var c=b&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new a(c))},b.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.DisplayObject_constructor(),this.text=a,this.font=b,this.color=c,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var b=createjs.extend(a,createjs.DisplayObject),c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");c.getContext&&(a._workingContext=c.getContext("2d"),c.width=c.height=1),a.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},a.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},b.isVisible=function(){var a=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;var c=this.color||"#000";return this.outline?(a.strokeStyle=c,a.lineWidth=1*this.outline):a.fillStyle=c,this._drawText(this._prepContext(a)),!0},b.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},b.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},b.getMeasuredHeight=function(){return this._drawText(null,{}).height},b.getBounds=function(){var b=this.DisplayObject_getBounds();if(b)return b;if(null==this.text||""===this.text)return null;var c=this._drawText(null,{}),d=this.maxWidth&&this.maxWidth<c.width?this.maxWidth:c.width,e=d*a.H_OFFSETS[this.textAlign||"left"],f=this.lineHeight||this.getMeasuredLineHeight(),g=f*a.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(e,g,d,c.height)},b.getMetrics=function(){var b={lines:[]};return b.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),b.vOffset=b.lineHeight*a.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,b,b.lines)},b.clone=function(){return this._cloneProps(new a(this.text,this.font,this.color))},b.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},b._cloneProps=function(a){return this.DisplayObject__cloneProps(a),a.textAlign=this.textAlign,a.textBaseline=this.textBaseline,a.maxWidth=this.maxWidth,a.outline=this.outline,a.lineHeight=this.lineHeight,a.lineWidth=this.lineWidth,a},b._prepContext=function(a){return a.font=this.font||"10px sans-serif",a.textAlign=this.textAlign||"left",a.textBaseline=this.textBaseline||"top",a},b._drawText=function(b,c,d){var e=!!b;e||(b=a._workingContext,b.save(),this._prepContext(b));for(var f=this.lineHeight||this.getMeasuredLineHeight(),g=0,h=0,i=String(this.text).split(/(?:\r\n|\r|\n)/),j=0,k=i.length;k>j;j++){var l=i[j],m=null;if(null!=this.lineWidth&&(m=b.measureText(l).width)>this.lineWidth){var n=l.split(/(\s)/);l=n[0],m=b.measureText(l).width;for(var o=1,p=n.length;p>o;o+=2){var q=b.measureText(n[o]+n[o+1]).width;m+q>this.lineWidth?(e&&this._drawTextLine(b,l,h*f),d&&d.push(l),m>g&&(g=m),l=n[o+1],m=b.measureText(l).width,h++):(l+=n[o]+n[o+1],m+=q)}}e&&this._drawTextLine(b,l,h*f),d&&d.push(l),c&&null==m&&(m=b.measureText(l).width),m>g&&(g=m),h++}return c&&(c.width=g,c.height=h*f),e||b.restore(),c},b._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth||65535):a.fillText(b,0,c,this.maxWidth||65535)},b._getMeasuredWidth=function(b){var c=a._workingContext;c.save();var d=this._prepContext(c).measureText(b).width;return c.restore(),d},createjs.Text=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.Container_constructor(),this.text=a||"",this.spriteSheet=b,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var b=createjs.extend(a,createjs.Container);a.maxPoolSize=100,a._spritePool=[],b.draw=function(a,b){this.DisplayObject_draw(a,b)||(this._updateText(),this.Container_draw(a,b))},b.getBounds=function(){return this._updateText(),this.Container_getBounds()},b.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&a)},b.clone=function(){return this._cloneProps(new a(this.text,this.spriteSheet))},b.addChild=b.addChildAt=b.removeChild=b.removeChildAt=b.removeAllChildren=function(){},b._cloneProps=function(a){return this.Container__cloneProps(a),a.lineHeight=this.lineHeight,a.letterSpacing=this.letterSpacing,a.spaceWidth=this.spaceWidth,a},b._getFrameIndex=function(a,b){var c,d=b.getAnimation(a);return d||(a!=(c=a.toUpperCase())||a!=(c=a.toLowerCase())||(c=null),c&&(d=b.getAnimation(c))),d&&d.frames[0]},b._getFrame=function(a,b){var c=this._getFrameIndex(a,b);return null==c?c:b.getFrame(c)},b._getLineHeight=function(a){var b=this._getFrame("1",a)||this._getFrame("T",a)||this._getFrame("L",a)||a.getFrame(0);return b?b.rect.height:1},b._getSpaceWidth=function(a){var b=this._getFrame("1",a)||this._getFrame("l",a)||this._getFrame("e",a)||this._getFrame("a",a)||a.getFrame(0);return b?b.rect.width:1},b._updateText=function(){var b,c=0,d=0,e=this._oldProps,f=!1,g=this.spaceWidth,h=this.lineHeight,i=this.spriteSheet,j=a._spritePool,k=this.children,l=0,m=k.length;for(var n in e)e[n]!=this[n]&&(e[n]=this[n],f=!0);if(f){var o=!!this._getFrame(" ",i);o||g||(g=this._getSpaceWidth(i)),h||(h=this._getLineHeight(i));for(var p=0,q=this.text.length;q>p;p++){var r=this.text.charAt(p);if(" "!=r||o)if("\n"!=r&&"\r"!=r){var s=this._getFrameIndex(r,i);null!=s&&(m>l?b=k[l]:(k.push(b=j.length?j.pop():new createjs.Sprite),b.parent=this,m++),b.spriteSheet=i,b.gotoAndStop(s),b.x=c,b.y=d,l++,c+=b.getBounds().width+this.letterSpacing)}else"\r"==r&&"\n"==this.text.charAt(p+1)&&p++,c=0,d+=h;else c+=g}for(;m>l;)j.push(b=k.pop()),b.parent=null,m--;j.length>a.maxPoolSize&&(j.length=a.maxPoolSize)}},createjs.BitmapText=createjs.promote(a,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"SpriteSheetUtils cannot be instantiated"}var b=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");b.getContext&&(a._workingCanvas=b,a._workingContext=b.getContext("2d"),b.width=b.height=1),a.addFlippedFrames=function(b,c,d,e){if(c||d||e){var f=0;c&&a._flip(b,++f,!0,!1),d&&a._flip(b,++f,!1,!0),e&&a._flip(b,++f,!0,!0)}},a.extractFrame=function(b,c){isNaN(c)&&(c=b.getAnimation(c).frames[0]);var d=b.getFrame(c);if(!d)return null;var e=d.rect,f=a._workingCanvas;f.width=e.width,f.height=e.height,a._workingContext.drawImage(d.image,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var g=document.createElement("img");return g.src=f.toDataURL("image/png"),g},a.mergeAlpha=function(a,b,c){c||(c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),c.width=Math.max(b.width,a.width),c.height=Math.max(b.height,a.height);var d=c.getContext("2d");return d.save(),d.drawImage(a,0,0),d.globalCompositeOperation="destination-in",d.drawImage(b,0,0),d.restore(),c},a._flip=function(b,c,d,e){for(var f=b._images,g=a._workingCanvas,h=a._workingContext,i=f.length/c,j=0;i>j;j++){var k=f[j];k.__tmp=j,
h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,g.width+1,g.height+1),g.width=k.width,g.height=k.height,h.setTransform(d?-1:1,0,0,e?-1:1,d?k.width:0,e?k.height:0),h.drawImage(k,0,0);var l=document.createElement("img");l.src=g.toDataURL("image/png"),l.width=k.width,l.height=k.height,f.push(l)}var m=b._frames,n=m.length/c;for(j=0;n>j;j++){k=m[j];var o=k.rect.clone();l=f[k.image.__tmp+i*c];var p={image:l,rect:o,regX:k.regX,regY:k.regY};d&&(o.x=l.width-o.x-o.width,p.regX=o.width-k.regX),e&&(o.y=l.height-o.y-o.height,p.regY=o.height-k.regY),m.push(p)}var q="_"+(d?"h":"")+(e?"v":""),r=b._animations,s=b._data,t=r.length/c;for(j=0;t>j;j++){var u=r[j];k=s[u];var v={name:u+q,speed:k.speed,next:k.next,frames:[]};k.next&&(v.next+=q),m=k.frames;for(var w=0,x=m.length;x>w;w++)v.frames.push(m[w]+n*c);s[v.name]=v,r.push(v.name)}},createjs.SpriteSheetUtils=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var b=createjs.extend(a,createjs.EventDispatcher);a.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",a.ERR_RUNNING="a build is already running",b.addFrame=function(b,c,d,e,f){if(this._data)throw a.ERR_RUNNING;var g=c||b.bounds||b.nominalBounds;return!g&&b.getBounds&&(g=b.getBounds()),g?(d=d||1,this._frames.push({source:b,sourceRect:g,scale:d,funct:e,data:f,index:this._frames.length,height:g.height*d})-1):null},b.addAnimation=function(b,c,d,e){if(this._data)throw a.ERR_RUNNING;this._animations[b]={frames:c,next:d,frequency:e}},b.addMovieClip=function(b,c,d,e,f,g){if(this._data)throw a.ERR_RUNNING;var h=b.frameBounds,i=c||b.bounds||b.nominalBounds;if(!i&&b.getBounds&&(i=b.getBounds()),i||h){var j,k,l=this._frames.length,m=b.timeline.duration;for(j=0;m>j;j++){var n=h&&h[j]?h[j]:i;this.addFrame(b,n,d,this._setupMovieClipFrame,{i:j,f:e,d:f})}var o=b.timeline._labels,p=[];for(var q in o)p.push({index:o[q],label:q});if(p.length)for(p.sort(function(a,b){return a.index-b.index}),j=0,k=p.length;k>j;j++){for(var r=p[j].label,s=l+p[j].index,t=l+(j==k-1?m:p[j+1].index),u=[],v=s;t>v;v++)u.push(v);(!g||(r=g(r,b,s,t)))&&this.addAnimation(r,u,!0)}}},b.build=function(){if(this._data)throw a.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},b.buildAsync=function(b){if(this._data)throw a.ERR_RUNNING;this.timeSlice=b,this._startBuild();var c=this;this._timerID=setTimeout(function(){c._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},b.stopAsync=function(){clearTimeout(this._timerID),this._data=null},b.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},b.toString=function(){return"[SpriteSheetBuilder]"},b._startBuild=function(){var b=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var c=[];this._data={images:[],frames:c,animations:this._animations};var d=this._frames.slice();if(d.sort(function(a,b){return a.height<=b.height?-1:1}),d[d.length-1].height+2*b>this.maxHeight)throw a.ERR_DIMENSIONS;for(var e=0,f=0,g=0;d.length;){var h=this._fillRow(d,e,g,c,b);if(h.w>f&&(f=h.w),e+=h.h,!h.h||!d.length){var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.width=this._getSize(f,this.maxWidth),i.height=this._getSize(e,this.maxHeight),this._data.images[g]=i,h.h||(f=e=0,g++)}}},b._setupMovieClipFrame=function(a,b){var c=a.actionsEnabled;a.actionsEnabled=!1,a.gotoAndStop(b.i),a.actionsEnabled=c,b.f&&b.f(a,b.d,b.i)},b._getSize=function(a,b){for(var c=4;Math.pow(2,++c)<a;);return Math.min(b,Math.pow(2,c))},b._fillRow=function(b,c,d,e,f){var g=this.maxWidth,h=this.maxHeight;c+=f;for(var i=h-c,j=f,k=0,l=b.length-1;l>=0;l--){var m=b[l],n=this._scale*m.scale,o=m.sourceRect,p=m.source,q=Math.floor(n*o.x-f),r=Math.floor(n*o.y-f),s=Math.ceil(n*o.height+2*f),t=Math.ceil(n*o.width+2*f);if(t>g)throw a.ERR_DIMENSIONS;s>i||j+t>g||(m.img=d,m.rect=new createjs.Rectangle(j,c,t,s),k=k||s,b.splice(l,1),e[m.index]=[j,c,t,s,d,Math.round(-q+n*p.regX-f),Math.round(-r+n*p.regY-f)],j+=t)}return{w:j,h:k}},b._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},b._run=function(){for(var a=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),b=(new Date).getTime()+a,c=!1;b>(new Date).getTime();)if(!this._drawNext()){c=!0;break}if(c)this._endBuild();else{var d=this;this._timerID=setTimeout(function(){d._run()},50-a)}var e=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var f=new createjs.Event("progress");f.progress=e,this.dispatchEvent(f)}},b._drawNext=function(){var a=this._frames[this._index],b=a.scale*this._scale,c=a.rect,d=a.sourceRect,e=this._data.images[a.img],f=e.getContext("2d");return a.funct&&a.funct(a.source,a.data),f.save(),f.beginPath(),f.rect(c.x,c.y,c.width,c.height),f.clip(),f.translate(Math.ceil(c.x-d.x*b),Math.ceil(c.y-d.y*b)),f.scale(b,b),a.source.draw(f),f.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.DisplayObject_constructor(),"string"==typeof a&&(a=document.getElementById(a)),this.mouseEnabled=!1;var b=a.style;b.position="absolute",b.transformOrigin=b.WebkitTransformOrigin=b.msTransformOrigin=b.MozTransformOrigin=b.OTransformOrigin="0% 0%",this.htmlElement=a,this._oldProps=null}var b=createjs.extend(a,createjs.DisplayObject);b.isVisible=function(){return null!=this.htmlElement},b.draw=function(){return!0},b.cache=function(){},b.uncache=function(){},b.updateCache=function(){},b.hitTest=function(){},b.localToGlobal=function(){},b.globalToLocal=function(){},b.localToLocal=function(){},b.clone=function(){throw"DOMElement cannot be cloned."},b.toString=function(){return"[DOMElement (name="+this.name+")]"},b._tick=function(a){var b=this.getStage();b&&b.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(a)},b._handleDrawEnd=function(){var a=this.htmlElement;if(a){var b=a.style,c=this.getConcatenatedDisplayProps(this._props),d=c.matrix,e=c.visible?"visible":"hidden";if(e!=b.visibility&&(b.visibility=e),c.visible){var f=this._oldProps,g=f&&f.matrix,h=1e4;if(!g||!g.equals(d)){var i="matrix("+(d.a*h|0)/h+","+(d.b*h|0)/h+","+(d.c*h|0)/h+","+(d.d*h|0)/h+","+(d.tx+.5|0);b.transform=b.WebkitTransform=b.OTransform=b.msTransform=i+","+(d.ty+.5|0)+")",b.MozTransform=i+"px,"+(d.ty+.5|0)+"px)",f||(f=this._oldProps=new createjs.DisplayProps(!0,0/0)),f.matrix.copy(d)}f.alpha!=c.alpha&&(b.opacity=""+(c.alpha*h|0)/h,f.alpha=c.alpha)}}},createjs.DOMElement=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){}var b=a.prototype;b.getBounds=function(a){return a},b.applyFilter=function(a,b,c,d,e,f,g,h){f=f||a,null==g&&(g=b),null==h&&(h=c);try{var i=a.getImageData(b,c,d,e)}catch(j){return!1}return this._applyFilter(i)?(f.putImageData(i,g,h),!0):!1},b.toString=function(){return"[Filter]"},b.clone=function(){return new a},b._applyFilter=function(){return!0},createjs.Filter=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){(isNaN(a)||0>a)&&(a=0),(isNaN(b)||0>b)&&(b=0),(isNaN(c)||1>c)&&(c=1),this.blurX=0|a,this.blurY=0|b,this.quality=0|c}var b=createjs.extend(a,createjs.Filter);a.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],a.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],b.getBounds=function(a){var b=0|this.blurX,c=0|this.blurY;if(0>=b&&0>=c)return a;var d=Math.pow(this.quality,.2);return(a||new createjs.Rectangle).pad(b*d+1,c*d+1,b*d+1,c*d+1)},b.clone=function(){return new a(this.blurX,this.blurY,this.quality)},b.toString=function(){return"[BlurFilter]"},b._applyFilter=function(b){var c=this.blurX>>1;if(isNaN(c)||0>c)return!1;var d=this.blurY>>1;if(isNaN(d)||0>d)return!1;if(0==c&&0==d)return!1;var e=this.quality;(isNaN(e)||1>e)&&(e=1),e|=0,e>3&&(e=3),1>e&&(e=1);var f=b.data,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=c+c+1|0,w=d+d+1|0,x=0|b.width,y=0|b.height,z=x-1|0,A=y-1|0,B=c+1|0,C=d+1|0,D={r:0,b:0,g:0,a:0},E=D;for(i=1;v>i;i++)E=E.n={r:0,b:0,g:0,a:0};E.n=D;var F={r:0,b:0,g:0,a:0},G=F;for(i=1;w>i;i++)G=G.n={r:0,b:0,g:0,a:0};G.n=F;for(var H=null,I=0|a.MUL_TABLE[c],J=0|a.SHG_TABLE[c],K=0|a.MUL_TABLE[d],L=0|a.SHG_TABLE[d];e-->0;){m=l=0;var M=I,N=J;for(h=y;--h>-1;){for(n=B*(r=f[0|l]),o=B*(s=f[l+1|0]),p=B*(t=f[l+2|0]),q=B*(u=f[l+3|0]),E=D,i=B;--i>-1;)E.r=r,E.g=s,E.b=t,E.a=u,E=E.n;for(i=1;B>i;i++)j=l+((i>z?z:i)<<2)|0,n+=E.r=f[j],o+=E.g=f[j+1],p+=E.b=f[j+2],q+=E.a=f[j+3],E=E.n;for(H=D,g=0;x>g;g++)f[l++]=n*M>>>N,f[l++]=o*M>>>N,f[l++]=p*M>>>N,f[l++]=q*M>>>N,j=m+((j=g+c+1)<z?j:z)<<2,n-=H.r-(H.r=f[j]),o-=H.g-(H.g=f[j+1]),p-=H.b-(H.b=f[j+2]),q-=H.a-(H.a=f[j+3]),H=H.n;m+=x}for(M=K,N=L,g=0;x>g;g++){for(l=g<<2|0,n=C*(r=f[l])|0,o=C*(s=f[l+1|0])|0,p=C*(t=f[l+2|0])|0,q=C*(u=f[l+3|0])|0,G=F,i=0;C>i;i++)G.r=r,G.g=s,G.b=t,G.a=u,G=G.n;for(k=x,i=1;d>=i;i++)l=k+g<<2,n+=G.r=f[l],o+=G.g=f[l+1],p+=G.b=f[l+2],q+=G.a=f[l+3],G=G.n,A>i&&(k+=x);if(l=g,H=F,e>0)for(h=0;y>h;h++)j=l<<2,f[j+3]=u=q*M>>>N,u>0?(f[j]=n*M>>>N,f[j+1]=o*M>>>N,f[j+2]=p*M>>>N):f[j]=f[j+1]=f[j+2]=0,j=g+((j=h+C)<A?j:A)*x<<2,n-=H.r-(H.r=f[j]),o-=H.g-(H.g=f[j+1]),p-=H.b-(H.b=f[j+2]),q-=H.a-(H.a=f[j+3]),H=H.n,l+=x;else for(h=0;y>h;h++)j=l<<2,f[j+3]=u=q*M>>>N,u>0?(u=255/u,f[j]=(n*M>>>N)*u,f[j+1]=(o*M>>>N)*u,f[j+2]=(p*M>>>N)*u):f[j]=f[j+1]=f[j+2]=0,j=g+((j=h+C)<A?j:A)*x<<2,n-=H.r-(H.r=f[j]),o-=H.g-(H.g=f[j+1]),p-=H.b-(H.b=f[j+2]),q-=H.a-(H.a=f[j+3]),H=H.n,l+=x}}return!0},createjs.BlurFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.alphaMap=a,this._alphaMap=null,this._mapData=null}var b=createjs.extend(a,createjs.Filter);b.clone=function(){var b=new a(this.alphaMap);return b._alphaMap=this._alphaMap,b._mapData=this._mapData,b},b.toString=function(){return"[AlphaMapFilter]"},b._applyFilter=function(a){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var b=a.data,c=this._mapData,d=0,e=b.length;e>d;d+=4)b[d+3]=c[d]||0;return!0},b._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var a,b=this._alphaMap=this.alphaMap,c=b;b instanceof HTMLCanvasElement?a=c.getContext("2d"):(c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),c.width=b.width,c.height=b.height,a=c.getContext("2d"),a.drawImage(b,0,0));try{var d=a.getImageData(0,0,b.width,b.height)}catch(e){return!1}return this._mapData=d.data,!0},createjs.AlphaMapFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.mask=a}var b=createjs.extend(a,createjs.Filter);b.applyFilter=function(a,b,c,d,e,f,g,h){return this.mask?(f=f||a,null==g&&(g=b),null==h&&(h=c),f.save(),a!=f?!1:(f.globalCompositeOperation="destination-in",f.drawImage(this.mask,g,h),f.restore(),!0)):!0},b.clone=function(){return new a(this.mask)},b.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d,e,f,g,h){this.redMultiplier=null!=a?a:1,this.greenMultiplier=null!=b?b:1,this.blueMultiplier=null!=c?c:1,this.alphaMultiplier=null!=d?d:1,this.redOffset=e||0,this.greenOffset=f||0,this.blueOffset=g||0,this.alphaOffset=h||0}var b=createjs.extend(a,createjs.Filter);b.toString=function(){return"[ColorFilter]"},b.clone=function(){return new a(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},b._applyFilter=function(a){for(var b=a.data,c=b.length,d=0;c>d;d+=4)b[d]=b[d]*this.redMultiplier+this.redOffset,b[d+1]=b[d+1]*this.greenMultiplier+this.greenOffset,b[d+2]=b[d+2]*this.blueMultiplier+this.blueOffset,b[d+3]=b[d+3]*this.alphaMultiplier+this.alphaOffset;return!0},createjs.ColorFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d){this.setColor(a,b,c,d)}var b=a.prototype;a.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],a.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],a.LENGTH=a.IDENTITY_MATRIX.length,b.setColor=function(a,b,c,d){return this.reset().adjustColor(a,b,c,d)},b.reset=function(){return this.copy(a.IDENTITY_MATRIX)},b.adjustColor=function(a,b,c,d){return this.adjustHue(d),this.adjustContrast(b),this.adjustBrightness(a),this.adjustSaturation(c)},b.adjustBrightness=function(a){return 0==a||isNaN(a)?this:(a=this._cleanValue(a,255),this._multiplyMatrix([1,0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0,0,0,0,0,1]),this)},b.adjustContrast=function(b){if(0==b||isNaN(b))return this;b=this._cleanValue(b,100);var c;return 0>b?c=127+b/100*127:(c=b%1,c=0==c?a.DELTA_INDEX[b]:a.DELTA_INDEX[b<<0]*(1-c)+a.DELTA_INDEX[(b<<0)+1]*c,c=127*c+127),this._multiplyMatrix([c/127,0,0,0,.5*(127-c),0,c/127,0,0,.5*(127-c),0,0,c/127,0,.5*(127-c),0,0,0,1,0,0,0,0,0,1]),this},b.adjustSaturation=function(a){if(0==a||isNaN(a))return this;a=this._cleanValue(a,100);var b=1+(a>0?3*a/100:a/100),c=.3086,d=.6094,e=.082;return this._multiplyMatrix([c*(1-b)+b,d*(1-b),e*(1-b),0,0,c*(1-b),d*(1-b)+b,e*(1-b),0,0,c*(1-b),d*(1-b),e*(1-b)+b,0,0,0,0,0,1,0,0,0,0,0,1]),this},b.adjustHue=function(a){if(0==a||isNaN(a))return this;a=this._cleanValue(a,180)/180*Math.PI;var b=Math.cos(a),c=Math.sin(a),d=.213,e=.715,f=.072;return this._multiplyMatrix([d+b*(1-d)+c*-d,e+b*-e+c*-e,f+b*-f+c*(1-f),0,0,d+b*-d+.143*c,e+b*(1-e)+.14*c,f+b*-f+c*-.283,0,0,d+b*-d+c*-(1-d),e+b*-e+c*e,f+b*(1-f)+c*f,0,0,0,0,0,1,0,0,0,0,0,1]),this},b.concat=function(b){return b=this._fixMatrix(b),b.length!=a.LENGTH?this:(this._multiplyMatrix(b),this)},b.clone=function(){return(new a).copy(this)},b.toArray=function(){for(var b=[],c=0,d=a.LENGTH;d>c;c++)b[c]=this[c];return b},b.copy=function(b){for(var c=a.LENGTH,d=0;c>d;d++)this[d]=b[d];return this},b.toString=function(){return"[ColorMatrix]"},b._multiplyMatrix=function(a){var b,c,d,e=[];for(b=0;5>b;b++){for(c=0;5>c;c++)e[c]=this[c+5*b];for(c=0;5>c;c++){var f=0;for(d=0;5>d;d++)f+=a[c+5*d]*e[d];this[c+5*b]=f}}},b._cleanValue=function(a,b){return Math.min(b,Math.max(-b,a))},b._fixMatrix=function(b){return b instanceof a&&(b=b.toArray()),b.length<a.LENGTH?b=b.slice(0,b.length).concat(a.IDENTITY_MATRIX.slice(b.length,a.LENGTH)):b.length>a.LENGTH&&(b=b.slice(0,a.LENGTH)),b},createjs.ColorMatrix=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.matrix=a}var b=createjs.extend(a,createjs.Filter);b.toString=function(){return"[ColorMatrixFilter]"},b.clone=function(){return new a(this.matrix)},b._applyFilter=function(a){for(var b,c,d,e,f=a.data,g=f.length,h=this.matrix,i=h[0],j=h[1],k=h[2],l=h[3],m=h[4],n=h[5],o=h[6],p=h[7],q=h[8],r=h[9],s=h[10],t=h[11],u=h[12],v=h[13],w=h[14],x=h[15],y=h[16],z=h[17],A=h[18],B=h[19],C=0;g>C;C+=4)b=f[C],c=f[C+1],d=f[C+2],e=f[C+3],f[C]=b*i+c*j+d*k+e*l+m,f[C+1]=b*n+c*o+d*p+e*q+r,f[C+2]=b*s+c*t+d*u+e*v+w,f[C+3]=b*x+c*y+d*z+e*A+B;return!0},createjs.ColorMatrixFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"Touch cannot be instantiated"}a.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},a.enable=function(b,c,d){return b&&b.canvas&&a.isSupported()?b.__touch?!0:(b.__touch={pointers:{},multitouch:!c,preventDefault:!d,count:0},"ontouchstart"in window?a._IOS_enable(b):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&a._IE_enable(b),!0):!1},a.disable=function(b){b&&("ontouchstart"in window?a._IOS_disable(b):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&a._IE_disable(b),delete b.__touch)},a._IOS_enable=function(b){var c=b.canvas,d=b.__touch.f=function(c){a._IOS_handleEvent(b,c)};c.addEventListener("touchstart",d,!1),c.addEventListener("touchmove",d,!1),c.addEventListener("touchend",d,!1),c.addEventListener("touchcancel",d,!1)},a._IOS_disable=function(a){var b=a.canvas;if(b){var c=a.__touch.f;b.removeEventListener("touchstart",c,!1),b.removeEventListener("touchmove",c,!1),b.removeEventListener("touchend",c,!1),b.removeEventListener("touchcancel",c,!1)}},a._IOS_handleEvent=function(a,b){if(a){a.__touch.preventDefault&&b.preventDefault&&b.preventDefault();for(var c=b.changedTouches,d=b.type,e=0,f=c.length;f>e;e++){var g=c[e],h=g.identifier;g.target==a.canvas&&("touchstart"==d?this._handleStart(a,h,b,g.pageX,g.pageY):"touchmove"==d?this._handleMove(a,h,b,g.pageX,g.pageY):("touchend"==d||"touchcancel"==d)&&this._handleEnd(a,h,b))}}},a._IE_enable=function(b){var c=b.canvas,d=b.__touch.f=function(c){a._IE_handleEvent(b,c)};void 0===window.navigator.pointerEnabled?(c.addEventListener("MSPointerDown",d,!1),window.addEventListener("MSPointerMove",d,!1),window.addEventListener("MSPointerUp",d,!1),window.addEventListener("MSPointerCancel",d,!1),b.__touch.preventDefault&&(c.style.msTouchAction="none")):(c.addEventListener("pointerdown",d,!1),window.addEventListener("pointermove",d,!1),window.addEventListener("pointerup",d,!1),window.addEventListener("pointercancel",d,!1),b.__touch.preventDefault&&(c.style.touchAction="none")),b.__touch.activeIDs={}},a._IE_disable=function(a){var b=a.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",b,!1),window.removeEventListener("MSPointerUp",b,!1),window.removeEventListener("MSPointerCancel",b,!1),a.canvas&&a.canvas.removeEventListener("MSPointerDown",b,!1)):(window.removeEventListener("pointermove",b,!1),window.removeEventListener("pointerup",b,!1),window.removeEventListener("pointercancel",b,!1),a.canvas&&a.canvas.removeEventListener("pointerdown",b,!1))},a._IE_handleEvent=function(a,b){if(a){a.__touch.preventDefault&&b.preventDefault&&b.preventDefault();var c=b.type,d=b.pointerId,e=a.__touch.activeIDs;if("MSPointerDown"==c||"pointerdown"==c){if(b.srcElement!=a.canvas)return;e[d]=!0,this._handleStart(a,d,b,b.pageX,b.pageY)}else e[d]&&("MSPointerMove"==c||"pointermove"==c?this._handleMove(a,d,b,b.pageX,b.pageY):("MSPointerUp"==c||"MSPointerCancel"==c||"pointerup"==c||"pointercancel"==c)&&(delete e[d],this._handleEnd(a,d,b)))}},a._handleStart=function(a,b,c,d,e){var f=a.__touch;if(f.multitouch||!f.count){var g=f.pointers;g[b]||(g[b]=!0,f.count++,a._handlePointerDown(b,c,d,e))}},a._handleMove=function(a,b,c,d,e){a.__touch.pointers[b]&&a._handlePointerMove(b,c,d,e)},a._handleEnd=function(a,b,c){var d=a.__touch,e=d.pointers;e[b]&&(d.count--,a._handlePointerUp(b,c,!0),delete e[b])},createjs.Touch=a}(),this.createjs=this.createjs||{},function(){"use strict";var a=createjs.EaselJS=createjs.EaselJS||{};a.version="0.8.1",a.buildDate="Thu, 21 May 2015 16:17:39 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var a=createjs.PreloadJS=createjs.PreloadJS||{};a.version="0.6.1",a.buildDate="Thu, 21 May 2015 16:17:37 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}}}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"BrowserDetect cannot be instantiated"}var b=a.agent=window.navigator.userAgent;a.isWindowPhone=b.indexOf("IEMobile")>-1||b.indexOf("Windows Phone")>-1,a.isFirefox=b.indexOf("Firefox")>-1,a.isOpera=null!=window.opera,a.isChrome=b.indexOf("Chrome")>-1,a.isIOS=(b.indexOf("iPod")>-1||b.indexOf("iPhone")>-1||b.indexOf("iPad")>-1)&&!a.isWindowPhone,a.isAndroid=b.indexOf("Android")>-1&&!a.isWindowPhone,a.isBlackberry=b.indexOf("Blackberry")>-1,createjs.BrowserDetect=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.Event_constructor("error"),this.title=a,this.message=b,this.data=c}var b=createjs.extend(a,createjs.Event);b.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(a,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.Event_constructor("progress"),this.loaded=a,this.total=null==b?1:b,this.progress=0==b?0:this.loaded/this.total}var b=createjs.extend(a,createjs.Event);b.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(a,"Event")}(window),function(){function a(b,d){function f(a){if(f[a]!==q)return f[a];var b;if("bug-string-char-index"==a)b="a"!="a"[0];else if("json"==a)b=f("json-stringify")&&f("json-parse");else{var c,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var i=d.stringify,k="function"==typeof i&&t;if(k){(c=function(){return 1}).toJSON=c;try{k="0"===i(0)&&"0"===i(new g)&&'""'==i(new h)&&i(s)===q&&i(q)===q&&i()===q&&"1"===i(c)&&"[1]"==i([c])&&"[null]"==i([q])&&"null"==i(null)&&"[null,null,null]"==i([q,s,null])&&i({a:[c,!0,!1,null,"\x00\b\n\f\r	"]})==e&&"1"===i(null,c)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new j(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new j(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new j(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new j(-1))}catch(l){k=!1}}b=k}if("json-parse"==a){var m=d.parse;if("function"==typeof m)try{if(0===m("0")&&!m(!1)){c=m(e);var n=5==c.a.length&&1===c.a[0];if(n){try{n=!m('"	"')}catch(l){}if(n)try{n=1!==m("01")}catch(l){}if(n)try{n=1!==m("1.")}catch(l){}}}}catch(l){n=!1}b=n}}return f[a]=!!b}b||(b=e.Object()),d||(d=e.Object());var g=b.Number||e.Number,h=b.String||e.String,i=b.Object||e.Object,j=b.Date||e.Date,k=b.SyntaxError||e.SyntaxError,l=b.TypeError||e.TypeError,m=b.Math||e.Math,n=b.JSON||e.JSON;"object"==typeof n&&n&&(d.stringify=n.stringify,d.parse=n.parse);var o,p,q,r=i.prototype,s=r.toString,t=new j(-0xc782b5b800cec);try{t=-109252==t.getUTCFullYear()&&0===t.getUTCMonth()&&1===t.getUTCDate()&&10==t.getUTCHours()&&37==t.getUTCMinutes()&&6==t.getUTCSeconds()&&708==t.getUTCMilliseconds()}catch(u){}if(!f("json")){var v="[object Function]",w="[object Date]",x="[object Number]",y="[object String]",z="[object Array]",A="[object Boolean]",B=f("bug-string-char-index");if(!t)var C=m.floor,D=[0,31,59,90,120,151,181,212,243,273,304,334],E=function(a,b){return D[b]+365*(a-1970)+C((a-1969+(b=+(b>1)))/4)-C((a-1901+b)/100)+C((a-1601+b)/400)};if((o=r.hasOwnProperty)||(o=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=s?o=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,o=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,o.call(this,a)}),p=function(a,b){var d,e,f,g=0;(d=function(){this.valueOf=0}).prototype.valueOf=0,e=new d;for(f in e)o.call(e,f)&&g++;return d=e=null,g?p=2==g?function(a,b){var c,d={},e=s.call(a)==v;for(c in a)e&&"prototype"==c||o.call(d,c)||!(d[c]=1)||!o.call(a,c)||b(c)}:function(a,b){var c,d,e=s.call(a)==v;for(c in a)e&&"prototype"==c||!o.call(a,c)||(d="constructor"===c)||b(c);(d||o.call(a,c="constructor"))&&b(c)}:(e=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(a,b){var d,f,g=s.call(a)==v,h=!g&&"function"!=typeof a.constructor&&c[typeof a.hasOwnProperty]&&a.hasOwnProperty||o;for(d in a)g&&"prototype"==d||!h.call(a,d)||b(d);for(f=e.length;d=e[--f];h.call(a,d)&&b(d));}),p(a,b)},!f("json-stringify")){var F={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},G="000000",H=function(a,b){return(G+(b||0)).slice(-a)},I="\\u00",J=function(a){for(var b='"',c=0,d=a.length,e=!B||d>10,f=e&&(B?a.split(""):a);d>c;c++){var g=a.charCodeAt(c);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=F[g];break;default:if(32>g){b+=I+H(2,g.toString(16));break}b+=e?f[c]:a.charAt(c)}}return b+'"'},K=function(a,b,c,d,e,f,g){var h,i,j,k,m,n,r,t,u,v,B,D,F,G,I,L;try{h=b[a]}catch(M){}if("object"==typeof h&&h)if(i=s.call(h),i!=w||o.call(h,"toJSON"))"function"==typeof h.toJSON&&(i!=x&&i!=y&&i!=z||o.call(h,"toJSON"))&&(h=h.toJSON(a));else if(h>-1/0&&1/0>h){if(E){for(m=C(h/864e5),j=C(m/365.2425)+1970-1;E(j+1,0)<=m;j++);for(k=C((m-E(j,0))/30.42);E(j,k+1)<=m;k++);m=1+m-E(j,k),n=(h%864e5+864e5)%864e5,r=C(n/36e5)%24,t=C(n/6e4)%60,u=C(n/1e3)%60,v=n%1e3}else j=h.getUTCFullYear(),k=h.getUTCMonth(),m=h.getUTCDate(),r=h.getUTCHours(),t=h.getUTCMinutes(),u=h.getUTCSeconds(),v=h.getUTCMilliseconds();h=(0>=j||j>=1e4?(0>j?"-":"+")+H(6,0>j?-j:j):H(4,j))+"-"+H(2,k+1)+"-"+H(2,m)+"T"+H(2,r)+":"+H(2,t)+":"+H(2,u)+"."+H(3,v)+"Z"}else h=null;if(c&&(h=c.call(b,a,h)),null===h)return"null";if(i=s.call(h),i==A)return""+h;if(i==x)return h>-1/0&&1/0>h?""+h:"null";if(i==y)return J(""+h);if("object"==typeof h){for(G=g.length;G--;)if(g[G]===h)throw l();if(g.push(h),B=[],I=f,f+=e,i==z){for(F=0,G=h.length;G>F;F++)D=K(F,h,c,d,e,f,g),B.push(D===q?"null":D);L=B.length?e?"[\n"+f+B.join(",\n"+f)+"\n"+I+"]":"["+B.join(",")+"]":"[]"}else p(d||h,function(a){var b=K(a,h,c,d,e,f,g);b!==q&&B.push(J(a)+":"+(e?" ":"")+b)}),L=B.length?e?"{\n"+f+B.join(",\n"+f)+"\n"+I+"}":"{"+B.join(",")+"}":"{}";return g.pop(),L}};d.stringify=function(a,b,d){var e,f,g,h;if(c[typeof b]&&b)if((h=s.call(b))==v)f=b;else if(h==z){g={};for(var i,j=0,k=b.length;k>j;i=b[j++],h=s.call(i),(h==y||h==x)&&(g[i]=1));}if(d)if((h=s.call(d))==x){if((d-=d%1)>0)for(e="",d>10&&(d=10);e.length<d;e+=" ");}else h==y&&(e=d.length<=10?d:d.slice(0,10));return K("",(i={},i[""]=a,i),f,g,e,"",[])}}if(!f("json-parse")){var L,M,N=h.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},P=function(){throw L=M=null,k()},Q=function(){for(var a,b,c,d,e,f=M,g=f.length;g>L;)switch(e=f.charCodeAt(L)){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=B?f.charAt(L):f[L],L++,a;case 34:for(a="@",L++;g>L;)if(e=f.charCodeAt(L),32>e)P();else if(92==e)switch(e=f.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=O[e],L++;break;case 117:for(b=++L,c=L+4;c>L;L++)e=f.charCodeAt(L),e>=48&&57>=e||e>=97&&102>=e||e>=65&&70>=e||P();a+=N("0x"+f.slice(b,L));break;default:P()}else{if(34==e)break;for(e=f.charCodeAt(L),b=L;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++L);a+=f.slice(b,L)}if(34==f.charCodeAt(L))return L++,a;P();default:if(b=L,45==e&&(d=!0,e=f.charCodeAt(++L)),e>=48&&57>=e){for(48==e&&(e=f.charCodeAt(L+1),e>=48&&57>=e)&&P(),d=!1;g>L&&(e=f.charCodeAt(L),e>=48&&57>=e);L++);if(46==f.charCodeAt(L)){for(c=++L;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==L&&P(),L=c}if(e=f.charCodeAt(L),101==e||69==e){for(e=f.charCodeAt(++L),(43==e||45==e)&&L++,c=L;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==L&&P(),L=c}return+f.slice(b,L)}if(d&&P(),"true"==f.slice(L,L+4))return L+=4,!0;if("false"==f.slice(L,L+5))return L+=5,!1;if("null"==f.slice(L,L+4))return L+=4,null;P()}return"$"},R=function(a){var b,c;if("$"==a&&P(),"string"==typeof a){if("@"==(B?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=Q(),"]"!=a;c||(c=!0))c&&(","==a?(a=Q(),"]"==a&&P()):P()),","==a&&P(),b.push(R(a));return b}if("{"==a){for(b={};a=Q(),"}"!=a;c||(c=!0))c&&(","==a?(a=Q(),"}"==a&&P()):P()),(","==a||"string"!=typeof a||"@"!=(B?a.charAt(0):a[0])||":"!=Q())&&P(),b[a.slice(1)]=R(Q());return b}P()}return a},S=function(a,b,c){var d=T(a,b,c);d===q?delete a[b]:a[b]=d},T=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if(s.call(e)==z)for(d=e.length;d--;)S(e,d,c);else p(e,function(a){S(e,a,c)});return c.call(a,b,e)};d.parse=function(a,b){var c,d;return L=0,M=""+a,c=R(Q()),"$"!=Q()&&P(),L=M=null,b&&s.call(b)==v?T((d={},d[""]=c,d),"",b):c}}}return d.runInContext=a,d}var b="function"==typeof define&&define.amd,c={"function":!0,object:!0},d=c[typeof exports]&&exports&&!exports.nodeType&&exports,e=c[typeof window]&&window||this,f=d&&c[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!f||f.global!==f&&f.window!==f&&f.self!==f||(e=f),d&&!b)a(e,d);else{var g=e.JSON,h=e.JSON3,i=!1,j=a(e,e.JSON3={noConflict:function(){return i||(i=!0,e.JSON=g,e.JSON3=h,g=h=null),j}});e.JSON={parse:j.parse,stringify:j.stringify}}b&&define(function(){return j})}.call(this),function(){var a={};a.appendToHead=function(b){a.getHead().appendChild(b)},a.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},a.getBody=function(){return document.body||document.getElementsByTagName("body")[0]},createjs.DomUtils=a}(),function(){var a={};a.parseXML=function(a,b){var c=null;try{if(window.DOMParser){var d=new DOMParser;c=d.parseFromString(a,b)}}catch(e){}if(!c)try{c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(a)}catch(e){c=null}return c},a.parseJSON=function(a){if(null==a)return null;try{return JSON.parse(a)}catch(b){throw b}},createjs.DataUtils=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=c.LOAD_TIMEOUT_DEFAULT}var b=a.prototype={},c=a;c.LOAD_TIMEOUT_DEFAULT=8e3,c.create=function(b){if("string"==typeof b){var d=new a;return d.src=b,d}if(b instanceof c)return b;if(b instanceof Object&&b.src)return null==b.loadTimeout&&(b.loadTimeout=c.LOAD_TIMEOUT_DEFAULT),b;throw new Error("Type not recognized.")},b.set=function(a){for(var b in a)this[b]=a[b];return this},createjs.LoadItem=c}(),function(){var a={};a.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,a.RELATIVE_PATT=/^[./]*?\//i,a.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,a.parseURI=function(b){var c={absolute:!1,
relative:!1};if(null==b)return c;var d=b.indexOf("?");d>-1&&(b=b.substr(0,d));var e;return a.ABSOLUTE_PATT.test(b)?c.absolute=!0:a.RELATIVE_PATT.test(b)&&(c.relative=!0),(e=b.match(a.EXTENSION_PATT))&&(c.extension=e[1].toLowerCase()),c},a.formatQueryString=function(a,b){if(null==a)throw new Error("You must specify data.");var c=[];for(var d in a)c.push(d+"="+escape(a[d]));return b&&(c=c.concat(b)),c.join("&")},a.buildPath=function(a,b){if(null==b)return a;var c=[],d=a.indexOf("?");if(-1!=d){var e=a.slice(d+1);c=c.concat(e.split("&"))}return-1!=d?a.slice(0,d)+"?"+this._formatQueryString(b,c):a+"?"+this._formatQueryString(b,c)},a.isCrossDomain=function(a){var b=document.createElement("a");b.href=a.src;var c=document.createElement("a");c.href=location.href;var d=""!=b.hostname&&(b.port!=c.port||b.protocol!=c.protocol||b.hostname!=c.hostname);return d},a.isLocal=function(a){var b=document.createElement("a");return b.href=a.src,""==b.hostname&&"file:"==b.protocol},a.isBinary=function(a){switch(a){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},a.isImageTag=function(a){return a instanceof HTMLImageElement},a.isAudioTag=function(a){return window.HTMLAudioElement?a instanceof HTMLAudioElement:!1},a.isVideoTag=function(a){return window.HTMLVideoElement?a instanceof HTMLVideoElement:!1},a.isText=function(a){switch(a){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},a.getTypeByExtension=function(a){if(null==a)return createjs.AbstractLoader.TEXT;switch(a.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=c,this.resultFormatter=null,this._item=a?createjs.LoadItem.create(a):null,this._preferXHR=b,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var b=createjs.extend(a,createjs.EventDispatcher),c=a;c.POST="POST",c.GET="GET",c.BINARY="binary",c.CSS="css",c.IMAGE="image",c.JAVASCRIPT="javascript",c.JSON="json",c.JSONP="jsonp",c.MANIFEST="manifest",c.SOUND="sound",c.VIDEO="video",c.SPRITESHEET="spritesheet",c.SVG="svg",c.TEXT="text",c.XML="xml",b.getItem=function(){return this._item},b.getResult=function(a){return a?this._rawResult:this._result},b.getTag=function(){return this._tag},b.setTag=function(a){this._tag=a},b.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var a=new createjs.Event("initialize");a.loader=this._request,this.dispatchEvent(a),this._request.load()},b.cancel=function(){this.canceled=!0,this.destroy()},b.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},b.getLoadedItems=function(){return this._loadedItems},b._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},b._createTag=function(){return null},b._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},b._sendProgress=function(a){if(!this._isCanceled()){var b=null;"number"==typeof a?(this.progress=a,b=new createjs.ProgressEvent(this.progress)):(b=a,this.progress=a.loaded/a.total,b.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(b)}},b._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var a=new createjs.Event("complete");a.rawResult=this._rawResult,null!=this._result&&(a.result=this._result),this.dispatchEvent(a)}},b._sendError=function(a){!this._isCanceled()&&this.hasEventListener("error")&&(null==a&&(a=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(a))},b._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},b.resultFormatter=null,b.handleEvent=function(a){switch(a.type){case"complete":this._rawResult=a.target._response;var b=this.resultFormatter&&this.resultFormatter(this),c=this;b instanceof Function?b(function(a){c._result=a,c._sendComplete()}):(this._result=b||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(a);break;case"error":this._sendError(a);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(a.type)}},b.buildPath=function(a,b){return createjs.RequestUtils.buildPath(a,b)},b.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractLoader_constructor(a,b,c),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var b=createjs.extend(a,createjs.AbstractLoader);b.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},b._createTag=function(){},b._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},b._formatResult=function(a){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(a.getTag().src=a.getResult(!0)),a.getTag()},createjs.AbstractMediaLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a){this._item=a},b=createjs.extend(a,createjs.EventDispatcher);b.load=function(){},b.destroy=function(){},b.cancel=function(){},createjs.AbstractRequest=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractRequest_constructor(a),this._tag=b,this._tagSrcAttribute=c,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var b=createjs.extend(a,createjs.AbstractRequest);b.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var a=new createjs.Event("initialize");a.loader=this._tag,this.dispatchEvent(a),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},b.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;("loaded"==a.readyState||"complete"==a.readyState)&&this._handleTagComplete()},b._handleError=function(){this._clean(),this.dispatchEvent("error")},b._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},b._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},b._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},b._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},b._showTag=function(){this._tag.style.visibility=this._startTagVisibility},b._handleStalled=function(){},createjs.TagRequest=createjs.promote(a,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractRequest_constructor(a),this._tag=b,this._tagSrcAttribute=c,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var b=createjs.extend(a,createjs.TagRequest);b.load=function(){var a=createjs.proxy(this._handleStalled,this);this._stalledCallback=a;var b=createjs.proxy(this._handleProgress,this);this._handleProgress=b,this._tag.addEventListener("stalled",a),this._tag.addEventListener("progress",b),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;("loaded"==a.readyState||"complete"==a.readyState)&&this._handleTagComplete()},b._handleStalled=function(){},b._handleProgress=function(a){if(a&&!(a.loaded>0&&0==a.total)){var b=new createjs.ProgressEvent(a.loaded,a.total);this.dispatchEvent(b)}},b._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(a,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractRequest_constructor(a),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(a)}var b=createjs.extend(a,createjs.AbstractRequest);a.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],b.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response},b.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},b.load=function(){if(null==this._request)return void this._handleError();null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(a){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,a))}},b.setResponseType=function(a){"blob"===a&&(a=window.URL?"blob":"arraybuffer",this._responseType=a),this._request.responseType=a},b.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},b.getResponseHeader=function(a){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(a):null},b._handleProgress=function(a){if(a&&!(a.loaded>0&&0==a.total)){var b=new createjs.ProgressEvent(a.loaded,a.total);this.dispatchEvent(b)}},b._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},b._handleAbort=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,a))},b._handleError=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(a.message))},b._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},b._handleLoad=function(){if(!this.loaded){this.loaded=!0;var a=this._checkError();if(a)return void this._handleError(a);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(b){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===b.name&&window.BlobBuilder){var c=new BlobBuilder;c.append(this._response),this._response=c.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},b._handleTimeout=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,a))},b._checkError=function(){var a=parseInt(this._request.status);switch(a){case 404:case 0:return new Error(a)}return null},b._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(a){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(a){}return null},b._createXHR=function(a){var b=createjs.RequestUtils.isCrossDomain(a),c={},d=null;if(window.XMLHttpRequest)d=new XMLHttpRequest,b&&void 0===d.withCredentials&&window.XDomainRequest&&(d=new XDomainRequest);else{for(var e=0,f=s.ACTIVEX_VERSIONS.length;f>e;e++){var g=s.ACTIVEX_VERSIONS[e];try{d=new ActiveXObject(g);break}catch(h){}}if(null==d)return!1}null==a.mimeType&&createjs.RequestUtils.isText(a.type)&&(a.mimeType="text/plain; charset=utf-8"),a.mimeType&&d.overrideMimeType&&d.overrideMimeType(a.mimeType),this._xhrLevel="string"==typeof d.responseType?2:1;var i=null;if(i=a.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(a.src,a.values):a.src,d.open(a.method||createjs.AbstractLoader.GET,i,!0),b&&d instanceof XMLHttpRequest&&1==this._xhrLevel&&(c.Origin=location.origin),a.values&&a.method==createjs.AbstractLoader.POST&&(c["Content-Type"]="application/x-www-form-urlencoded"),b||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),a.headers)for(var j in a.headers)c[j]=a.headers[j];for(j in c)d.setRequestHeader(j,c[j]);return d instanceof XMLHttpRequest&&void 0!==a.withCredentials&&(d.withCredentials=a.withCredentials),this._request=d,!0},b._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},b.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(a,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(a,b,c)}var b=createjs.extend(a,createjs.AbstractLoader),c=a;b.init=function(a,b,c){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(a),this._paused=!1,this._basePath=b,this._crossOrigin=c,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=0/0},c.loadTimeout=8e3,c.LOAD_TIMEOUT=0,c.BINARY=createjs.AbstractLoader.BINARY,c.CSS=createjs.AbstractLoader.CSS,c.IMAGE=createjs.AbstractLoader.IMAGE,c.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,c.JSON=createjs.AbstractLoader.JSON,c.JSONP=createjs.AbstractLoader.JSONP,c.MANIFEST=createjs.AbstractLoader.MANIFEST,c.SOUND=createjs.AbstractLoader.SOUND,c.VIDEO=createjs.AbstractLoader.VIDEO,c.SVG=createjs.AbstractLoader.SVG,c.TEXT=createjs.AbstractLoader.TEXT,c.XML=createjs.AbstractLoader.XML,c.POST=createjs.AbstractLoader.POST,c.GET=createjs.AbstractLoader.GET,b.registerLoader=function(a){if(!a||!a.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(a))throw new Error("loader already exists.");this._availableLoaders.unshift(a)},b.unregisterLoader=function(a){var b=this._availableLoaders.indexOf(a);-1!=b&&b<this._defaultLoaderLength-1&&this._availableLoaders.splice(b,1)},b.setUseXHR=function(a){return this.setPreferXHR(a)},b.setPreferXHR=function(a){return this.preferXHR=0!=a&&null!=window.XMLHttpRequest,this.preferXHR},b.removeAll=function(){this.remove()},b.remove=function(a){var b=null;if(!a||a instanceof Array){if(a)b=a;else if(arguments.length>0)return}else b=[a];var c=!1;if(b){for(;b.length;){var d=b.pop(),e=this.getResult(d);for(f=this._loadQueue.length-1;f>=0;f--)if(g=this._loadQueue[f].getItem(),g.id==d||g.src==d){this._loadQueue.splice(f,1)[0].cancel();break}for(f=this._loadQueueBackup.length-1;f>=0;f--)if(g=this._loadQueueBackup[f].getItem(),g.id==d||g.src==d){this._loadQueueBackup.splice(f,1)[0].cancel();break}if(e)this._disposeItem(this.getItem(d));else for(var f=this._currentLoads.length-1;f>=0;f--){var g=this._currentLoads[f].getItem();if(g.id==d||g.src==d){this._currentLoads.splice(f,1)[0].cancel(),c=!0;break}}}c&&this._loadNext()}else{this.close();for(var h in this._loadItemsById)this._disposeItem(this._loadItemsById[h]);this.init(this.preferXHR,this._basePath)}},b.reset=function(){this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);for(var b=[],c=0,d=this._loadQueueBackup.length;d>c;c++)b.push(this._loadQueueBackup[c].getItem());this.loadManifest(b,!1)},b.installPlugin=function(a){if(null!=a&&null!=a.getPreloadHandlers){this._plugins.push(a);var b=a.getPreloadHandlers();if(b.scope=a,null!=b.types)for(var c=0,d=b.types.length;d>c;c++)this._typeCallbacks[b.types[c]]=b;if(null!=b.extensions)for(c=0,d=b.extensions.length;d>c;c++)this._extensionCallbacks[b.extensions[c]]=b}},b.setMaxConnections=function(a){this._maxConnections=a,!this._paused&&this._loadQueue.length>0&&this._loadNext()},b.loadFile=function(a,b,c){if(null==a){var d=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(d)}this._addItem(a,null,c),this.setPaused(b!==!1?!1:!0)},b.loadManifest=function(a,b,d){var e=null,f=null;if(a instanceof Array){if(0==a.length){var g=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(g)}e=a}else if("string"==typeof a)e=[{src:a,type:c.MANIFEST}];else{if("object"!=typeof a){var g=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(g)}if(void 0!==a.src){if(null==a.type)a.type=c.MANIFEST;else if(a.type!=c.MANIFEST){var g=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(g)}e=[a]}else void 0!==a.manifest&&(e=a.manifest,f=a.path)}for(var h=0,i=e.length;i>h;h++)this._addItem(e[h],f,d);this.setPaused(b!==!1?!1:!0)},b.load=function(){this.setPaused(!1)},b.getItem=function(a){return this._loadItemsById[a]||this._loadItemsBySrc[a]},b.getResult=function(a,b){var c=this._loadItemsById[a]||this._loadItemsBySrc[a];if(null==c)return null;var d=c.id;return b&&this._loadedRawResults[d]?this._loadedRawResults[d]:this._loadedResults[d]},b.getItems=function(a){var b=[];for(var c in this._loadItemsById){var d=this._loadItemsById[c],e=this.getResult(c);(a!==!0||null!=e)&&b.push({item:d,result:e,rawResult:this.getResult(c,!0)})}return b},b.setPaused=function(a){this._paused=a,this._paused||this._loadNext()},b.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=0/0},b._addItem=function(a,b,c){var d=this._createLoadItem(a,b,c);if(null!=d){var e=this._createLoader(d);null!=e&&("plugins"in e&&(e.plugins=this._plugins),d._loader=e,this._loadQueue.push(e),this._loadQueueBackup.push(e),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&d.type==createjs.LoadQueue.JAVASCRIPT||d.maintainOrder===!0)&&(this._scriptOrder.push(d),this._loadedScripts.push(null)))}},b._createLoadItem=function(a,b,c){var d=createjs.LoadItem.create(a);if(null==d)return null;var e="",f=c||this._basePath;if(d.src instanceof Object){if(!d.type)return null;if(b){e=b;var g=createjs.RequestUtils.parseURI(b);null==f||g.absolute||g.relative||(e=f+e)}else null!=f&&(e=f)}else{var h=createjs.RequestUtils.parseURI(d.src);h.extension&&(d.ext=h.extension),null==d.type&&(d.type=createjs.RequestUtils.getTypeByExtension(d.ext));var i=d.src;if(!h.absolute&&!h.relative)if(b){e=b;var g=createjs.RequestUtils.parseURI(b);i=b+i,null==f||g.absolute||g.relative||(e=f+e)}else null!=f&&(e=f);d.src=e+d.src}d.path=e,(void 0===d.id||null===d.id||""===d.id)&&(d.id=i);var j=this._typeCallbacks[d.type]||this._extensionCallbacks[d.ext];if(j){var k=j.callback.call(j.scope,d,this);if(k===!1)return null;k===!0||null!=k&&(d._loader=k),h=createjs.RequestUtils.parseURI(d.src),null!=h.extension&&(d.ext=h.extension)}return this._loadItemsById[d.id]=d,this._loadItemsBySrc[d.src]=d,null==d.crossOrigin&&(d.crossOrigin=this._crossOrigin),d},b._createLoader=function(a){if(null!=a._loader)return a._loader;for(var b=this.preferXHR,c=0;c<this._availableLoaders.length;c++){var d=this._availableLoaders[c];if(d&&d.canLoadItem(a))return new d(a,b)}return null},b._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var a=0;a<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);a++){var b=this._loadQueue[a];this._canStartLoad(b)&&(this._loadQueue.splice(a,1),a--,this._loadItem(b))}}},b._loadItem=function(a){a.on("fileload",this._handleFileLoad,this),a.on("progress",this._handleProgress,this),a.on("complete",this._handleFileComplete,this),a.on("error",this._handleError,this),a.on("fileerror",this._handleFileError,this),this._currentLoads.push(a),this._sendFileStart(a.getItem()),a.load()},b._handleFileLoad=function(a){a.target=null,this.dispatchEvent(a)},b._handleFileError=function(a){var b=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,a.item);this._sendError(b)},b._handleError=function(a){var b=a.target;this._numItemsLoaded++,this._finishOrderedItem(b,!0),this._updateProgress();var c=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,b.getItem());this._sendError(c),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(b),this._cleanLoadItem(b),this._loadNext())},b._handleFileComplete=function(a){var b=a.target,c=b.getItem(),d=b.getResult();this._loadedResults[c.id]=d;var e=b.getResult(!0);null!=e&&e!==d&&(this._loadedRawResults[c.id]=e),this._saveLoadedItems(b),this._removeLoadItem(b),this._finishOrderedItem(b)||this._processFinishedLoad(c,b),this._cleanLoadItem(b)},b._saveLoadedItems=function(a){var b=a.getLoadedItems();if(null!==b)for(var c=0;c<b.length;c++){var d=b[c].item;this._loadItemsBySrc[d.src]=d,this._loadItemsById[d.id]=d,this._loadedResults[d.id]=b[c].result,this._loadedRawResults[d.id]=b[c].rawResult}},b._finishOrderedItem=function(a,b){var c=a.getItem();if(this.maintainScriptOrder&&c.type==createjs.LoadQueue.JAVASCRIPT||c.maintainOrder){a instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var d=createjs.indexOf(this._scriptOrder,c);return-1==d?!1:(this._loadedScripts[d]=b===!0?!0:c,this._checkScriptLoadOrder(),!0)}return!1},b._checkScriptLoadOrder=function(){for(var a=this._loadedScripts.length,b=0;a>b;b++){var c=this._loadedScripts[b];if(null===c)break;if(c!==!0){var d=this._loadedResults[c.id];c.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(d);var e=c._loader;this._processFinishedLoad(c,e),this._loadedScripts[b]=!0}}},b._processFinishedLoad=function(a,b){this._numItemsLoaded++,this.maintainScriptOrder||a.type!=createjs.LoadQueue.JAVASCRIPT||createjs.DomUtils.appendToHead(a.result),this._updateProgress(),this._sendFileComplete(a,b),this._loadNext()},b._canStartLoad=function(a){if(!this.maintainScriptOrder||a.preferXHR)return!0;var b=a.getItem();if(b.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var c=this._scriptOrder.indexOf(b),d=0;c>d;){var e=this._loadedScripts[d];if(null==e)return!1;d++}return this._currentlyLoadingScript=!0,!0},b._removeLoadItem=function(a){for(var b=this._currentLoads.length,c=0;b>c;c++)if(this._currentLoads[c]==a){this._currentLoads.splice(c,1);break}},b._cleanLoadItem=function(a){var b=a.getItem();b&&delete b._loader},b._handleProgress=function(a){var b=a.target;this._sendFileProgress(b.getItem(),b.progress),this._updateProgress()},b._updateProgress=function(){var a=this._numItemsLoaded/this._numItems,b=this._numItems-this._numItemsLoaded;if(b>0){for(var c=0,d=0,e=this._currentLoads.length;e>d;d++)c+=this._currentLoads[d].progress;a+=c/b*(b/this._numItems)}this._lastProgress!=a&&(this._sendProgress(a),this._lastProgress=a)},b._disposeItem=function(a){delete this._loadedResults[a.id],delete this._loadedRawResults[a.id],delete this._loadItemsById[a.id],delete this._loadItemsBySrc[a.src]},b._sendFileProgress=function(a,b){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var c=new createjs.Event("fileprogress");c.progress=b,c.loaded=b,c.total=1,c.item=a,this.dispatchEvent(c)}},b._sendFileComplete=function(a,b){if(!this._isCanceled()&&!this._paused){var c=new createjs.Event("fileload");c.loader=b,c.item=a,c.result=this._loadedResults[a.id],c.rawResult=this._loadedRawResults[a.id],a.completeHandler&&a.completeHandler(c),this.hasEventListener("fileload")&&this.dispatchEvent(c)}},b._sendFileStart=function(a){var b=new createjs.Event("filestart");b.item=a,this.hasEventListener("filestart")&&this.dispatchEvent(b)},b.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.TEXT)}var b=(createjs.extend(a,createjs.AbstractLoader),a);b.canLoadItem=function(a){return a.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.BINARY},b._updateXHR=function(a){a.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractLoader_constructor(a,b,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=document.createElement(b?"style":"link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.CSS},b._formatResult=function(a){if(this._preferXHR){var b=a.getTag();if(b.styleSheet)b.styleSheet.cssText=a.getResult(!0);else{var c=document.createTextNode(a.getResult(!0));b.appendChild(c)}}else b=this._tag;return createjs.DomUtils.appendToHead(b),b},createjs.CSSLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractLoader_constructor(a,b,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(a)?this._tag=a:createjs.RequestUtils.isImageTag(a.src)?this._tag=a.src:createjs.RequestUtils.isImageTag(a.tag)&&(this._tag=a.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.IMAGE},b.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var a=this._item.crossOrigin;1==a&&(a="Anonymous"),null==a||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=a),this.AbstractLoader_load()},b._updateXHR=function(a){a.loader.mimeType="text/plain; charset=x-user-defined-binary",a.loader.setResponseType&&a.loader.setResponseType("blob")},b._formatResult=function(a){var b=this;return function(c){var d=b._tag,e=window.URL||window.webkitURL;if(b._preferXHR)if(e){var f=e.createObjectURL(a.getResult(!0));d.src=f,d.onload=function(){e.revokeObjectURL(b.src)}}else d.src=a.getItem().src;else;d.complete?c(d):d.onload=function(){c(this)}}},createjs.ImageLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractLoader_constructor(a,b,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.JAVASCRIPT},b._formatResult=function(a){var b=a.getTag();return this._preferXHR&&(b.text=a.getResult(!0)),b},createjs.JavaScriptLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.JSON&&!a._loadAsJSONP;

},b._formatResult=function(a){var b=null;try{b=createjs.DataUtils.parseJSON(a.getResult(!0))}catch(c){var d=new createjs.ErrorEvent("JSON_FORMAT",null,c);return this._sendError(d),c}return b},createjs.JSONLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.JSONP||a._loadAsJSONP},b.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},b.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},b._handleLoad=function(a){this._result=this._rawResult=a,this._sendComplete(),this._dispose()},b._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},b._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.MANIFEST_PROGRESS=.25,c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.MANIFEST},b.load=function(){this.AbstractLoader_load()},b._createRequest=function(){var a=this._item.callback;this._request=null!=a?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},b.handleEvent=function(a){switch(a.type){case"complete":return this._rawResult=a.target.getResult(!0),this._result=a.target.getResult(),this._sendProgress(c.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return a.loaded*=c.MANIFEST_PROGRESS,this.progress=a.loaded/a.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(a)}this.AbstractLoader_handleEvent(a)},b.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},b._loadManifest=function(a){if(a&&a.manifest){var b=this._manifestQueue=new createjs.LoadQueue;b.on("fileload",this._handleManifestFileLoad,this),b.on("progress",this._handleManifestProgress,this),b.on("complete",this._handleManifestComplete,this,!0),b.on("error",this._handleManifestError,this,!0);for(var c=0,d=this.plugins.length;d>c;c++)b.installPlugin(this.plugins[c]);b.loadManifest(a)}else this._sendComplete()},b._handleManifestFileLoad=function(a){a.target=null,this.dispatchEvent(a)},b._handleManifestComplete=function(){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},b._handleManifestProgress=function(a){this.progress=a.progress*(1-c.MANIFEST_PROGRESS)+c.MANIFEST_PROGRESS,this._sendProgress(this.progress)},b._handleManifestError=function(a){var b=new createjs.Event("fileerror");b.item=a.data,this.dispatchEvent(b)},createjs.ManifestLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractMediaLoader_constructor(a,b,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(a)?this._tag=a:createjs.RequestUtils.isAudioTag(a.src)?this._tag=a:createjs.RequestUtils.isAudioTag(a.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(a)?a:a.src),null!=this._tag&&(this._preferXHR=!1)}var b=createjs.extend(a,createjs.AbstractMediaLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.SOUND},b._createTag=function(a){var b=document.createElement("audio");return b.autoplay=!1,b.preload="none",b.src=a,b},createjs.SoundLoader=createjs.promote(a,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractMediaLoader_constructor(a,b,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(a)||createjs.RequestUtils.isVideoTag(a.src)?(this.setTag(createjs.RequestUtils.isVideoTag(a)?a:a.src),this._preferXHR=!1):this.setTag(this._createTag())}var b=createjs.extend(a,createjs.AbstractMediaLoader),c=a;b._createTag=function(){return document.createElement("video")},c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(a,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.SPRITESHEET_PROGRESS=.25,c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.SPRITESHEET},b.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},b._createRequest=function(){var a=this._item.callback;this._request=null!=a&&a instanceof Function?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},b.handleEvent=function(a){switch(a.type){case"complete":return this._rawResult=a.target.getResult(!0),this._result=a.target.getResult(),this._sendProgress(c.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return a.loaded*=c.SPRITESHEET_PROGRESS,this.progress=a.loaded/a.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(a)}this.AbstractLoader_handleEvent(a)},b._loadManifest=function(a){if(a&&a.images){var b=this._manifestQueue=new createjs.LoadQueue;b.on("complete",this._handleManifestComplete,this,!0),b.on("fileload",this._handleManifestFileLoad,this),b.on("progress",this._handleManifestProgress,this),b.on("error",this._handleManifestError,this,!0),b.loadManifest(a.images)}},b._handleManifestFileLoad=function(a){var b=a.result;if(null!=b){var c=this.getResult().images,d=c.indexOf(a.item.src);c[d]=b}},b._handleManifestComplete=function(){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},b._handleManifestProgress=function(a){this.progress=a.progress*(1-c.SPRITESHEET_PROGRESS)+c.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},b._handleManifestError=function(a){var b=new createjs.Event("fileerror");b.item=a.data,this.dispatchEvent(b)},createjs.SpriteSheetLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractLoader_constructor(a,b,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",b?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.SVG},b._formatResult=function(a){var b=createjs.DataUtils.parseXML(a.getResult(!0),"text/xml"),c=a.getTag();return!this._preferXHR&&document.body.contains(c)&&document.body.removeChild(c),null!=b.documentElement?(c.appendChild(b.documentElement),c.style.visibility="visible",c):b},createjs.SVGLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.XML},b._formatResult=function(a){return createjs.DataUtils.parseXML(a.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var a=createjs.SoundJS=createjs.SoundJS||{};a.version="0.6.1",a.buildDate="Thu, 21 May 2015 16:17:37 GMT"}(),this.createjs=this.createjs||{},createjs.indexOf=function(a,b){"use strict";for(var c=0,d=a.length;d>c;c++)if(b===a[c])return c;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}}}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},b=a.prototype={},c=a;c.create=function(a){if(a instanceof c||a instanceof Object){var b=new createjs.PlayPropsConfig;return b.set(a),b}throw new Error("Type not recognized.")},b.set=function(a){for(var b in a)this[b]=a[b];return this},b.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=c}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"Sound cannot be instantiated"}function b(a,b){this.init(a,b)}var c=a;c.INTERRUPT_ANY="any",c.INTERRUPT_EARLY="early",c.INTERRUPT_LATE="late",c.INTERRUPT_NONE="none",c.PLAY_INITED="playInited",c.PLAY_SUCCEEDED="playSucceeded",c.PLAY_INTERRUPTED="playInterrupted",c.PLAY_FINISHED="playFinished",c.PLAY_FAILED="playFailed",c.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],c.EXTENSION_MAP={m4a:"mp4"},c.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,c.defaultInterruptBehavior=c.INTERRUPT_NONE,c.alternateExtensions=[],c.activePlugin=null,c._masterVolume=1,Object.defineProperty(c,"volume",{get:function(){return this._masterVolume},set:function(a){if(null==Number(a))return!1;if(a=Math.max(0,Math.min(1,a)),c._masterVolume=a,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(a))for(var b=this._instances,d=0,e=b.length;e>d;d++)b[d].setMasterVolume(a)}}),c._masterMute=!1,Object.defineProperty(c,"muted",{get:function(){return this._masterMute},set:function(a){if(null==a)return!1;if(this._masterMute=a,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var b=this._instances,c=0,d=b.length;d>c;c++)b[c].setMasterMute(a);return!0}}),Object.defineProperty(c,"capabilities",{get:function(){return null==c.activePlugin?null:c.activePlugin._capabilities},set:function(){return!1}}),c._pluginsRegistered=!1,c._lastID=0,c._instances=[],c._idHash={},c._preloadHash={},c._defaultPlayPropsHash={},c.addEventListener=null,c.removeEventListener=null,c.removeAllEventListeners=null,c.dispatchEvent=null,c.hasEventListener=null,c._listeners=null,createjs.EventDispatcher.initialize(c),c.getPreloadHandlers=function(){return{callback:createjs.proxy(c.initLoad,c),types:["sound"],extensions:c.SUPPORTED_EXTENSIONS}},c._handleLoadComplete=function(a){var b=a.target.getItem().src;if(c._preloadHash[b])for(var d=0,e=c._preloadHash[b].length;e>d;d++){var f=c._preloadHash[b][d];if(c._preloadHash[b][d]=!0,c.hasEventListener("fileload")){var a=new createjs.Event("fileload");a.src=f.src,a.id=f.id,a.data=f.data,a.sprite=f.sprite,c.dispatchEvent(a)}}},c._handleLoadError=function(a){var b=a.target.getItem().src;if(c._preloadHash[b])for(var d=0,e=c._preloadHash[b].length;e>d;d++){var f=c._preloadHash[b][d];if(c._preloadHash[b][d]=!1,c.hasEventListener("fileerror")){var a=new createjs.Event("fileerror");a.src=f.src,a.id=f.id,a.data=f.data,a.sprite=f.sprite,c.dispatchEvent(a)}}},c._registerPlugin=function(a){return a.isSupported()?(c.activePlugin=new a,!0):!1},c.registerPlugins=function(a){c._pluginsRegistered=!0;for(var b=0,d=a.length;d>b;b++)if(c._registerPlugin(a[b]))return!0;return!1},c.initializeDefaultPlugins=function(){return null!=c.activePlugin?!0:c._pluginsRegistered?!1:c.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},c.isReady=function(){return null!=c.activePlugin},c.getCapabilities=function(){return null==c.activePlugin?null:c.activePlugin._capabilities},c.getCapability=function(a){return null==c.activePlugin?null:c.activePlugin._capabilities[a]},c.initLoad=function(a){return c._registerSound(a)},c._registerSound=function(a){if(!c.initializeDefaultPlugins())return!1;var d;if(a.src instanceof Object?(d=c._parseSrc(a.src),d.src=a.path+d.src):d=c._parsePath(a.src),null==d)return!1;a.src=d.src,a.type="sound";var e=a.data,f=null;if(null!=e&&(isNaN(e.channels)?isNaN(e)||(f=parseInt(e)):f=parseInt(e.channels),e.audioSprite))for(var g,h=e.audioSprite.length;h--;)g=e.audioSprite[h],c._idHash[g.id]={src:a.src,startTime:parseInt(g.startTime),duration:parseInt(g.duration)},g.defaultPlayProps&&(c._defaultPlayPropsHash[g.id]=createjs.PlayPropsConfig.create(g.defaultPlayProps));null!=a.id&&(c._idHash[a.id]={src:a.src});var i=c.activePlugin.register(a);return b.create(a.src,f),null!=e&&isNaN(e)?a.data.channels=f||b.maxPerChannel():a.data=f||b.maxPerChannel(),i.type&&(a.type=i.type),a.defaultPlayProps&&(c._defaultPlayPropsHash[a.src]=createjs.PlayPropsConfig.create(a.defaultPlayProps)),i},c.registerSound=function(a,b,d,e,f){var g={src:a,id:b,data:d,defaultPlayProps:f};a instanceof Object&&a.src&&(e=b,g=a),g=createjs.LoadItem.create(g),g.path=e,null==e||g.src instanceof Object||(g.src=e+a);var h=c._registerSound(g);if(!h)return!1;if(c._preloadHash[g.src]||(c._preloadHash[g.src]=[]),c._preloadHash[g.src].push(g),1==c._preloadHash[g.src].length)h.on("complete",createjs.proxy(this._handleLoadComplete,this)),h.on("error",createjs.proxy(this._handleLoadError,this)),c.activePlugin.preload(h);else if(1==c._preloadHash[g.src][0])return!0;return g},c.registerSounds=function(a,b){var c=[];a.path&&(b?b+=a.path:b=a.path,a=a.manifest);for(var d=0,e=a.length;e>d;d++)c[d]=createjs.Sound.registerSound(a[d].src,a[d].id,a[d].data,b,a[d].defaultPlayProps);return c},c.removeSound=function(a,d){if(null==c.activePlugin)return!1;a instanceof Object&&a.src&&(a=a.src);var e;if(a instanceof Object?e=c._parseSrc(a):(a=c._getSrcById(a).src,e=c._parsePath(a)),null==e)return!1;a=e.src,null!=d&&(a=d+a);for(var f in c._idHash)c._idHash[f].src==a&&delete c._idHash[f];return b.removeSrc(a),delete c._preloadHash[a],c.activePlugin.removeSound(a),!0},c.removeSounds=function(a,b){var c=[];a.path&&(b?b+=a.path:b=a.path,a=a.manifest);for(var d=0,e=a.length;e>d;d++)c[d]=createjs.Sound.removeSound(a[d].src,b);return c},c.removeAllSounds=function(){c._idHash={},c._preloadHash={},b.removeAll(),c.activePlugin&&c.activePlugin.removeAllSounds()},c.loadComplete=function(a){if(!c.isReady())return!1;var b=c._parsePath(a);return a=b?c._getSrcById(b.src).src:c._getSrcById(a).src,void 0==c._preloadHash[a]?!1:1==c._preloadHash[a][0]},c._parsePath=function(a){"string"!=typeof a&&(a=a.toString());var b=a.match(c.FILE_PATTERN);if(null==b)return!1;for(var d=b[4],e=b[5],f=c.capabilities,g=0;!f[e];)if(e=c.alternateExtensions[g++],g>c.alternateExtensions.length)return null;a=a.replace("."+b[5],"."+e);var h={name:d,src:a,extension:e};return h},c._parseSrc=function(a){var b={name:void 0,src:void 0,extension:void 0},d=c.capabilities;for(var e in a)if(a.hasOwnProperty(e)&&d[e]){b.src=a[e],b.extension=e;break}if(!b.src)return!1;var f=b.src.lastIndexOf("/");return b.name=-1!=f?b.src.slice(f+1):b.src,b},c.play=function(a,b,d,e,f,g,h,i,j){var k;k=createjs.PlayPropsConfig.create(b instanceof Object||b instanceof createjs.PlayPropsConfig?b:{interrupt:b,delay:d,offset:e,loop:f,volume:g,pan:h,startTime:i,duration:j});var l=c.createInstance(a,k.startTime,k.duration),m=c._playInstance(l,k);return m||l._playFailed(),l},c.createInstance=function(a,d,e){if(!c.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(a,d,e);var f=c._defaultPlayPropsHash[a];a=c._getSrcById(a);var g=c._parsePath(a.src),h=null;return null!=g&&null!=g.src?(b.create(g.src),null==d&&(d=a.startTime),h=c.activePlugin.create(g.src,d,e||a.duration),f=f||c._defaultPlayPropsHash[g.src],f&&h.applyPlayProps(f)):h=new createjs.DefaultSoundInstance(a,d,e),h.uniqueId=c._lastID++,h},c.stop=function(){for(var a=this._instances,b=a.length;b--;)a[b].stop()},c.setVolume=function(a){if(null==Number(a))return!1;if(a=Math.max(0,Math.min(1,a)),c._masterVolume=a,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(a))for(var b=this._instances,d=0,e=b.length;e>d;d++)b[d].setMasterVolume(a)},c.getVolume=function(){return this._masterVolume},c.setMute=function(a){if(null==a)return!1;if(this._masterMute=a,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var b=this._instances,c=0,d=b.length;d>c;c++)b[c].setMasterMute(a);return!0},c.getMute=function(){return this._masterMute},c.setDefaultPlayProps=function(a,b){a=c._getSrcById(a),c._defaultPlayPropsHash[c._parsePath(a.src).src]=createjs.PlayPropsConfig.create(b)},c.getDefaultPlayProps=function(a){return a=c._getSrcById(a),c._defaultPlayPropsHash[c._parsePath(a.src).src]},c._playInstance=function(a,b){var d=c._defaultPlayPropsHash[a.src]||{};if(null==b.interrupt&&(b.interrupt=d.interrupt||c.defaultInterruptBehavior),null==b.delay&&(b.delay=d.delay||0),null==b.offset&&(b.offset=a.getPosition()),null==b.loop&&(b.loop=a.loop),null==b.volume&&(b.volume=a.volume),null==b.pan&&(b.pan=a.pan),0==b.delay){var e=c._beginPlaying(a,b);if(!e)return!1}else{var f=setTimeout(function(){c._beginPlaying(a,b)},b.delay);a.delayTimeoutId=f}return this._instances.push(a),!0},c._beginPlaying=function(a,c){if(!b.add(a,c.interrupt))return!1;var d=a._beginPlaying(c);if(!d){var e=createjs.indexOf(this._instances,a);return e>-1&&this._instances.splice(e,1),!1}return!0},c._getSrcById=function(a){return c._idHash[a]||{src:a}},c._playFinished=function(a){b.remove(a);var c=createjs.indexOf(this._instances,a);c>-1&&this._instances.splice(c,1)},createjs.Sound=a,b.channels={},b.create=function(a,c){var d=b.get(a);return null==d?(b.channels[a]=new b(a,c),!0):!1},b.removeSrc=function(a){var c=b.get(a);return null==c?!1:(c._removeAll(),delete b.channels[a],!0)},b.removeAll=function(){for(var a in b.channels)b.channels[a]._removeAll();b.channels={}},b.add=function(a,c){var d=b.get(a.src);return null==d?!1:d._add(a,c)},b.remove=function(a){var c=b.get(a.src);return null==c?!1:(c._remove(a),!0)},b.maxPerChannel=function(){return d.maxDefault},b.get=function(a){return b.channels[a]};var d=b.prototype;d.constructor=b,d.src=null,d.max=null,d.maxDefault=100,d.length=0,d.init=function(a,b){this.src=a,this.max=b||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},d._get=function(a){return this._instances[a]},d._add=function(a,b){return this._getSlot(b,a)?(this._instances.push(a),this.length++,!0):!1},d._remove=function(a){var b=createjs.indexOf(this._instances,a);return-1==b?!1:(this._instances.splice(b,1),this.length--,!0)},d._removeAll=function(){for(var a=this.length-1;a>=0;a--)this._instances[a].stop()},d._getSlot=function(b){var c,d;if(b!=a.INTERRUPT_NONE&&(d=this._get(0),null==d))return!0;for(var e=0,f=this.max;f>e;e++){if(c=this._get(e),null==c)return!0;if(c.playState==a.PLAY_FINISHED||c.playState==a.PLAY_INTERRUPTED||c.playState==a.PLAY_FAILED){d=c;break}b!=a.INTERRUPT_NONE&&(b==a.INTERRUPT_EARLY&&c.getPosition()<d.getPosition()||b==a.INTERRUPT_LATE&&c.getPosition()>d.getPosition())&&(d=c)}return null!=d?(d._interrupt(),this._remove(d),!0):!1},d.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a,b,c,d){this.EventDispatcher_constructor(),this.src=a,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,b||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,c||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),d!==!1&&d!==!0&&this.setPlaybackResource(d),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},b=createjs.extend(a,createjs.EventDispatcher);b.play=function(a,b,c,d,e,f){var g;return g=createjs.PlayPropsConfig.create(a instanceof Object||a instanceof createjs.PlayPropsConfig?a:{interrupt:a,delay:b,offset:c,loop:d,volume:e,pan:f}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(g),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,g),this)},b.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},b.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},b.applyPlayProps=function(a){return null!=a.offset&&this.setPosition(a.offset),null!=a.loop&&this.setLoop(a.loop),null!=a.volume&&this.setVolume(a.volume),null!=a.pan&&this.setPan(a.pan),null!=a.startTime&&(this.setStartTime(a.startTime),this.setDuration(a.duration)),this},b.toString=function(){return"[AbstractSoundInstance]"},b.getPaused=function(){return this._paused},b.setPaused=function(a){return a!==!0&&a!==!1||this._paused==a||1==a&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=a,a?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},b.setVolume=function(a){return a==this._volume?this:(this._volume=Math.max(0,Math.min(1,a)),this._muted||this._updateVolume(),this)},b.getVolume=function(){return this._volume},b.setMuted=function(a){return a===!0||a===!1?(this._muted=a,this._updateVolume(),this):void 0},b.getMuted=function(){return this._muted},b.setPan=function(a){return a==this._pan?this:(this._pan=Math.max(-1,Math.min(1,a)),this._updatePan(),this)},b.getPan=function(){return this._pan},b.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},b.setPosition=function(a){return this._position=Math.max(0,a),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},b.getStartTime=function(){return this._startTime},b.setStartTime=function(a){return a==this._startTime?this:(this._startTime=Math.max(0,a||0),this._updateStartTime(),this)},b.getDuration=function(){return this._duration},b.setDuration=function(a){return a==this._duration?this:(this._duration=Math.max(0,a||0),this._updateDuration(),this)},b.setPlaybackResource=function(a){return this._playbackResource=a,0==this._duration&&this._setDurationFromSource(),this},b.getPlaybackResource=function(){return this._playbackResource},b.getLoop=function(){return this._loop},b.setLoop=function(a){null!=this._playbackResource&&(0!=this._loop&&0==a?this._removeLooping(a):0==this._loop&&0!=a&&this._addLooping(a)),this._loop=a},b._sendEvent=function(a){var b=new createjs.Event(a);this.dispatchEvent(b)},b._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},b._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},b._beginPlaying=function(a){return this.setPosition(a.offset),this.setLoop(a.loop),this.setVolume(a.volume),this.setPan(a.pan),null!=a.startTime&&(this.setStartTime(a.startTime),this.setDuration(a.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},b._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},b._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},b._handleSoundReady=function(){},b._updateVolume=function(){},b._updatePan=function(){},b._updateStartTime=function(){},b._updateDuration=function(){},b._setDurationFromSource=function(){},b._calculateCurrentPosition=function(){},b._updatePosition=function(){},b._removeLooping=function(){},b._addLooping=function(){},b._pause=function(){},b._resume=function(){},b._handleStop=function(){},b._handleCleanUp=function(){},b._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(a,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},b=a.prototype;a._capabilities=null,a.isSupported=function(){return!0},b.register=function(a){var b=this._loaders[a.src];return b&&!b.canceled?this._loaders[a.src]:(this._audioSources[a.src]=!0,this._soundInstances[a.src]=[],b=new this._loaderClass(a),b.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[a.src]=b,b)},b.preload=function(a){a.on("error",createjs.proxy(this._handlePreloadError,this)),a.load()},b.isPreloadStarted=function(a){return null!=this._audioSources[a]},b.isPreloadComplete=function(a){return!(null==this._audioSources[a]||1==this._audioSources[a])},b.removeSound=function(a){if(this._soundInstances[a]){for(var b=this._soundInstances[a].length;b--;){var c=this._soundInstances[a][b];c.destroy()}delete this._soundInstances[a],delete this._audioSources[a],this._loaders[a]&&this._loaders[a].destroy(),delete this._loaders[a]}},b.removeAllSounds=function(){for(var a in this._audioSources)this.removeSound(a)},b.create=function(a,b,c){this.isPreloadStarted(a)||this.preload(this.register(a));var d=new this._soundInstanceClass(a,b,c,this._audioSources[a]);return this._soundInstances[a].push(d),d},b.setVolume=function(a){return this._volume=a,this._updateVolume(),!0},b.getVolume=function(){return this._volume},b.setMute=function(){return this._updateVolume(),!0},b.toString=function(){return"[AbstractPlugin]"},b._handlePreloadComplete=function(a){var b=a.target.getItem().src;this._audioSources[b]=a.result;for(var c=0,d=this._soundInstances[b].length;d>c;c++){var e=this._soundInstances[b][c];e.setPlaybackResource(this._audioSources[b])}},b._handlePreloadError=function(){},b._updateVolume=function(){},createjs.AbstractPlugin=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.SOUND)}var b=createjs.extend(a,createjs.AbstractLoader);a.context=null,b.toString=function(){return"[WebAudioLoader]"},b._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},b._sendComplete=function(){a.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},b._handleAudioDecoded=function(a){this._result=a,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,d,e){this.AbstractSoundInstance_constructor(a,b,d,e),this.gainNode=c.context.createGain(),this.panNode=c.context.createPanner(),this.panNode.panningModel=c._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var b=createjs.extend(a,createjs.AbstractSoundInstance),c=a;c.context=null,c.destinationNode=null,c._panningModel="equalpower",b.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},b.toString=function(){return"[WebAudioSoundInstance]"},b._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},b._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},b._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},b._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},b._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},b._cleanUpAudioNode=function(a){return a&&(a.stop(0),a.disconnect(0),a=null),a},b._handleSoundReady=function(){this.gainNode.connect(c.destinationNode);var a=.001*this._duration,b=.001*this._position;b>a&&(b=a),this.sourceNode=this._createAndPlayAudioNode(c.context.currentTime-a,b),this._playbackStartTime=this.sourceNode.startTime-b,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(a-b)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},b._createAndPlayAudioNode=function(a,b){var d=c.context.createBufferSource();d.buffer=this.playbackResource,d.connect(this.panNode);var e=.001*this._duration;return d.startTime=a+e,d.start(d.startTime,b+.001*this._startTime,e-b),d},b._pause=function(){this._position=1e3*(c.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},b._resume=function(){this._handleSoundReady()},b._updateVolume=function(){var a=this._muted?0:this._volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)},b._calculateCurrentPosition=function(){return 1e3*(c.context.currentTime-this._playbackStartTime)},b._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},b._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},b._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(a,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.AbstractPlugin_constructor(),this._panningModel=c._panningModel,this.context=c.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=c._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var b=createjs.extend(a,createjs.AbstractPlugin),c=a;c._capabilities=null,c._panningModel="equalpower",c.context=null,c.isSupported=function(){var a=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;

return"file:"!=location.protocol||a||this._isFileXHRSupported()?(c._generateCapabilities(),null==c.context?!1:!0):!1},c.playEmptySound=function(){if(null!=c.context){var a=c.context.createBufferSource();a.buffer=c.context.createBuffer(1,1,22050),a.connect(c.context.destination),a.start(0,0,0)}},c._isFileXHRSupported=function(){var a=!0,b=new XMLHttpRequest;try{b.open("GET","WebAudioPluginTest.fail",!1)}catch(c){return a=!1}b.onerror=function(){a=!1},b.onload=function(){a=404==this.status||200==this.status||0==this.status&&""!=this.response};try{b.send()}catch(c){a=!1}return a},c._generateCapabilities=function(){if(null==c._capabilities){var a=document.createElement("audio");if(null==a.canPlayType)return null;if(null==c.context)if(window.AudioContext)c.context=new AudioContext;else{if(!window.webkitAudioContext)return null;c.context=new webkitAudioContext}c._compatibilitySetUp(),c.playEmptySound(),c._capabilities={panning:!0,volume:!0,tracks:-1};for(var b=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=b.length;f>e;e++){var g=b[e],h=d[g]||g;c._capabilities[g]="no"!=a.canPlayType("audio/"+g)&&""!=a.canPlayType("audio/"+g)||"no"!=a.canPlayType("audio/"+h)&&""!=a.canPlayType("audio/"+h)}c.context.destination.numberOfChannels<2&&(c._capabilities.panning=!1)}},c._compatibilitySetUp=function(){if(c._panningModel="equalpower",!c.context.createGain){c.context.createGain=c.context.createGainNode;var a=c.context.createBufferSource();a.__proto__.start=a.__proto__.noteGrainOn,a.__proto__.stop=a.__proto__.noteOff,c._panningModel=0}},b.toString=function(){return"[WebAudioPlugin]"},b._addPropsToClasses=function(){var a=this._soundInstanceClass;a.context=this.context,a.destinationNode=this.gainNode,a._panningModel=this._panningModel,this._loaderClass.context=this.context},b._updateVolume=function(){var a=createjs.Sound._masterMute?0:this._volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)},createjs.WebAudioPlugin=createjs.promote(a,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"HTMLAudioTagPool cannot be instantiated"}function b(){this._tags=[]}var c=a;c._tags={},c._tagPool=new b,c._tagUsed={},c.get=function(a){var b=c._tags[a];return null==b?(b=c._tags[a]=c._tagPool.get(),b.src=a):c._tagUsed[a]?(b=c._tagPool.get(),b.src=a):c._tagUsed[a]=!0,b},c.set=function(a,b){b==c._tags[a]?c._tagUsed[a]=!1:c._tagPool.set(b)},c.remove=function(a){var b=c._tags[a];return null==b?!1:(c._tagPool.set(b),delete c._tags[a],delete c._tagUsed[a],!0)},c.getDuration=function(a){var b=c._tags[a];return null==b?0:1e3*b.duration},createjs.HTMLAudioTagPool=a;var d=b.prototype;d.constructor=b,d.get=function(){var a;return a=0==this._tags.length?this._createTag():this._tags.pop(),null==a.parentNode&&document.body.appendChild(a),a},d.set=function(a){var b=createjs.indexOf(this._tags,a);-1==b&&(this._tags.src=null,this._tags.push(a))},d.toString=function(){return"[TagPool]"},d._createTag=function(){var a=document.createElement("audio");return a.autoplay=!1,a.preload="none",a}}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d){this.AbstractSoundInstance_constructor(a,b,c,d),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),c?this._audioSpriteStopTime=.001*(b+c):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var b=createjs.extend(a,createjs.AbstractSoundInstance);b.setMasterVolume=function(){this._updateVolume()},b.setMasterMute=function(){this._updateVolume()},b.toString=function(){return"[HTMLAudioSoundInstance]"},b._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},b._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},b._handleCleanUp=function(){var a=this._playbackResource;if(null!=a){a.pause(),a.loop=!1,a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{a.currentTime=this._startTime}catch(b){}createjs.HTMLAudioTagPool.set(this.src,a),this._playbackResource=null}},b._beginPlaying=function(a){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(a)},b._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var a=this._playbackResource;return a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.preload="auto",void a.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},b._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},b._pause=function(){this._playbackResource.pause()},b._resume=function(){this._playbackResource.play()},b._updateVolume=function(){if(null!=this._playbackResource){var a=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;a!=this._playbackResource.volume&&(this._playbackResource.volume=a)}},b._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},b._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(a){this._handleSetPositionSeek(null)}},b._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},b._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},b._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},b._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},b._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(a,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=c._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var b=createjs.extend(a,createjs.AbstractPlugin),c=a;c.MAX_INSTANCES=30,c._AUDIO_READY="canplaythrough",c._AUDIO_ENDED="ended",c._AUDIO_SEEKED="seeked",c._AUDIO_STALLED="stalled",c._TIME_UPDATE="timeupdate",c._capabilities=null,c.isSupported=function(){return c._generateCapabilities(),null!=c._capabilities},c._generateCapabilities=function(){if(null==c._capabilities){var a=document.createElement("audio");if(null==a.canPlayType)return null;c._capabilities={panning:!1,volume:!0,tracks:-1};for(var b=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=b.length;f>e;e++){var g=b[e],h=d[g]||g;c._capabilities[g]="no"!=a.canPlayType("audio/"+g)&&""!=a.canPlayType("audio/"+g)||"no"!=a.canPlayType("audio/"+h)&&""!=a.canPlayType("audio/"+h)}}},b.register=function(a){var b=createjs.HTMLAudioTagPool.get(a.src),c=this.AbstractPlugin_register(a);return c.setTag(b),c},b.removeSound=function(a){this.AbstractPlugin_removeSound(a),createjs.HTMLAudioTagPool.remove(a)},b.create=function(a,b,c){var d=this.AbstractPlugin_create(a,b,c);return d.setPlaybackResource(null),d},b.toString=function(){return"[HTMLAudioPlugin]"},b.setVolume=b.getVolume=b.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(a,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function a(b,c,d){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=d||{},this.target=b,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=b,this._useTicks=!1,this._inited=!1,this._registered=!1,c&&(this._useTicks=c.useTicks,this.ignoreGlobalPause=c.ignoreGlobalPause,this.loop=c.loop,c.onChange&&this.addEventListener("change",c.onChange),c.override&&a.removeTweens(b)),c&&c.paused?this._paused=!0:createjs.Tween._register(this,!0),c&&null!=c.position&&this.setPosition(c.position,a.NONE)}var b=createjs.extend(a,createjs.EventDispatcher);a.NONE=0,a.LOOP=1,a.REVERSE=2,a.IGNORE={},a._tweens=[],a._plugins={},a.get=function(b,c,d,e){return e&&a.removeTweens(b),new a(b,c,d)},a.tick=function(b,c){for(var d=a._tweens.slice(),e=d.length-1;e>=0;e--){var f=d[e];c&&!f.ignoreGlobalPause||f._paused||f.tick(f._useTicks?1:b)}},a.handleEvent=function(a){"tick"==a.type&&this.tick(a.delta,a.paused)},a.removeTweens=function(b){if(b.tweenjs_count){for(var c=a._tweens,d=c.length-1;d>=0;d--){var e=c[d];e._target==b&&(e._paused=!0,c.splice(d,1))}b.tweenjs_count=0}},a.removeAllTweens=function(){for(var b=a._tweens,c=0,d=b.length;d>c;c++){var e=b[c];e._paused=!0,e.target&&(e.target.tweenjs_count=0)}b.length=0},a.hasActiveTweens=function(b){return b?null!=b.tweenjs_count&&!!b.tweenjs_count:a._tweens&&!!a._tweens.length},a.installPlugin=function(b,c){var d=b.priority;null==d&&(b.priority=d=0);for(var e=0,f=c.length,g=a._plugins;f>e;e++){var h=c[e];if(g[h]){for(var i=g[h],j=0,k=i.length;k>j&&!(d<i[j].priority);j++);g[h].splice(j,0,b)}else g[h]=[b]}},a._register=function(b,c){var d=b._target,e=a._tweens;if(c&&!b._registered)d&&(d.tweenjs_count=d.tweenjs_count?d.tweenjs_count+1:1),e.push(b),!a._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",a),a._inited=!0);else if(!c&&b._registered){d&&d.tweenjs_count--;for(var f=e.length;f--;)if(e[f]==b){e.splice(f,1);break}}b._registered=c},b.wait=function(a,b){if(null==a||0>=a)return this;var c=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:c,e:this._linearEase,p1:c,v:b})},b.to=function(a,b,c){return(isNaN(b)||0>b)&&(b=0),this._addStep({d:b||0,p0:this._cloneProps(this._curQueueProps),e:c,p1:this._cloneProps(this._appendQueueProps(a))})},b.call=function(a,b,c){return this._addAction({f:a,p:b?b:[this],o:c?c:this._target})},b.set=function(a,b){return this._addAction({f:this._set,o:this,p:[a,b?b:this._target]})},b.play=function(a){return a||(a=this),this.call(a.setPaused,[!1],a)},b.pause=function(a){return a||(a=this),this.call(a.setPaused,[!0],a)},b.setPosition=function(a,b){0>a&&(a=0),null==b&&(b=1);var c=a,d=!1;if(c>=this.duration&&(this.loop?c%=this.duration:(c=this.duration,d=!0)),c==this._prevPos)return d;var e=this._prevPos;if(this.position=this._prevPos=c,this._prevPosition=a,this._target)if(d)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var f=0,g=this._steps.length;g>f&&!(this._steps[f].t>c);f++);var h=this._steps[f-1];this._updateTargetProps(h,(this._stepPosition=c-h.t)/h.d)}return 0!=b&&this._actions.length>0&&(this._useTicks?this._runActions(c,c):1==b&&e>c?(e!=this.duration&&this._runActions(e,this.duration),this._runActions(0,c,!0)):this._runActions(e,c)),d&&this.setPaused(!0),this.dispatchEvent("change"),d},b.tick=function(a){this._paused||this.setPosition(this._prevPosition+a)},b.setPaused=function(b){return this._paused===!!b?this:(this._paused=!!b,a._register(this,!b),this)},b.w=b.wait,b.t=b.to,b.c=b.call,b.s=b.set,b.toString=function(){return"[Tween]"},b.clone=function(){throw"Tween can not be cloned."},b._updateTargetProps=function(b,c){var d,e,f,g,h,i;if(b||1!=c){if(this.passive=!!b.v,this.passive)return;b.e&&(c=b.e(c,0,1,1)),d=b.p0,e=b.p1}else this.passive=!1,d=e=this._curQueueProps;for(var j in this._initQueueProps){null==(g=d[j])&&(d[j]=g=this._initQueueProps[j]),null==(h=e[j])&&(e[j]=h=g),f=g==h||0==c||1==c||"number"!=typeof g?1==c?h:g:g+(h-g)*c;var k=!1;if(i=a._plugins[j])for(var l=0,m=i.length;m>l;l++){var n=i[l].tween(this,j,f,d,e,c,!!b&&d==e,!b);n==a.IGNORE?k=!0:f=n}k||(this._target[j]=f)}},b._runActions=function(a,b,c){var d=a,e=b,f=-1,g=this._actions.length,h=1;for(a>b&&(d=b,e=a,f=g,g=h=-1);(f+=h)!=g;){var i=this._actions[f],j=i.t;(j==e||j>d&&e>j||c&&j==a)&&i.f.apply(i.o,i.p)}},b._appendQueueProps=function(b){var c,d,e,f,g;for(var h in b)if(void 0===this._initQueueProps[h]){if(d=this._target[h],c=a._plugins[h])for(e=0,f=c.length;f>e;e++)d=c[e].init(this,h,d);this._initQueueProps[h]=this._curQueueProps[h]=void 0===d?null:d}else d=this._curQueueProps[h];for(var h in b){if(d=this._curQueueProps[h],c=a._plugins[h])for(g=g||{},e=0,f=c.length;f>e;e++)c[e].step&&c[e].step(this,h,d,b[h],g);this._curQueueProps[h]=b[h]}return g&&this._appendQueueProps(g),this._curQueueProps},b._cloneProps=function(a){var b={};for(var c in a)b[c]=a[c];return b},b._addStep=function(a){return a.d>0&&(this._steps.push(a),a.t=this.duration,this.duration+=a.d),this},b._addAction=function(a){return a.t=this.duration,this._actions.push(a),this},b._set=function(a,b){for(var c in a)b[c]=a[c]},createjs.Tween=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,this._registered=!1,c&&(this._useTicks=c.useTicks,this.loop=c.loop,this.ignoreGlobalPause=c.ignoreGlobalPause,c.onChange&&this.addEventListener("change",c.onChange)),a&&this.addTween.apply(this,a),this.setLabels(b),c&&c.paused?this._paused=!0:createjs.Tween._register(this,!0),c&&null!=c.position&&this.setPosition(c.position,createjs.Tween.NONE)}var b=createjs.extend(a,createjs.EventDispatcher);b.addTween=function(a){var b=arguments.length;if(b>1){for(var c=0;b>c;c++)this.addTween(arguments[c]);return arguments[0]}return 0==b?null:(this.removeTween(a),this._tweens.push(a),a.setPaused(!0),a._paused=!1,a._useTicks=this._useTicks,a.duration>this.duration&&(this.duration=a.duration),this._prevPos>=0&&a.setPosition(this._prevPos,createjs.Tween.NONE),a)},b.removeTween=function(a){var b=arguments.length;if(b>1){for(var c=!0,d=0;b>d;d++)c=c&&this.removeTween(arguments[d]);return c}if(0==b)return!1;for(var e=this._tweens,d=e.length;d--;)if(e[d]==a)return e.splice(d,1),a.duration>=this.duration&&this.updateDuration(),!0;return!1},b.addLabel=function(a,b){this._labels[a]=b;var c=this._labelList;if(c){for(var d=0,e=c.length;e>d&&!(b<c[d].position);d++);c.splice(d,0,{label:a,position:b})}},b.setLabels=function(a){this._labels=a?a:{}},b.getLabels=function(){var a=this._labelList;if(!a){a=this._labelList=[];var b=this._labels;for(var c in b)a.push({label:c,position:b[c]});a.sort(function(a,b){return a.position-b.position})}return a},b.getCurrentLabel=function(){var a=this.getLabels(),b=this.position,c=a.length;if(c){for(var d=0;c>d&&!(b<a[d].position);d++);return 0==d?null:a[d-1].label}return null},b.gotoAndPlay=function(a){this.setPaused(!1),this._goto(a)},b.gotoAndStop=function(a){this.setPaused(!0),this._goto(a)},b.setPosition=function(a,b){var c=this._calcPosition(a),d=!this.loop&&a>=this.duration;if(c==this._prevPos)return d;this._prevPosition=a,this.position=this._prevPos=c;for(var e=0,f=this._tweens.length;f>e;e++)if(this._tweens[e].setPosition(c,b),c!=this._prevPos)return!1;return d&&this.setPaused(!0),this.dispatchEvent("change"),d},b.setPaused=function(a){this._paused=!!a,createjs.Tween._register(this,!a)},b.updateDuration=function(){this.duration=0;for(var a=0,b=this._tweens.length;b>a;a++){var c=this._tweens[a];c.duration>this.duration&&(this.duration=c.duration)}},b.tick=function(a){this.setPosition(this._prevPosition+a)},b.resolve=function(a){var b=Number(a);return isNaN(b)&&(b=this._labels[a]),b},b.toString=function(){return"[Timeline]"},b.clone=function(){throw"Timeline can not be cloned."},b._goto=function(a){var b=this.resolve(a);null!=b&&this.setPosition(b)},b._calcPosition=function(a){return 0>a?0:a<this.duration?a:this.loop?a%this.duration:this.duration},createjs.Timeline=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"Ease cannot be instantiated."}a.linear=function(a){return a},a.none=a.linear,a.get=function(a){return-1>a&&(a=-1),a>1&&(a=1),function(b){return 0==a?b:0>a?b*(b*-a+1+a):b*((2-b)*a+(1-a))}},a.getPowIn=function(a){return function(b){return Math.pow(b,a)}},a.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}},a.getPowInOut=function(a){return function(b){return(b*=2)<1?.5*Math.pow(b,a):1-.5*Math.abs(Math.pow(2-b,a))}},a.quadIn=a.getPowIn(2),a.quadOut=a.getPowOut(2),a.quadInOut=a.getPowInOut(2),a.cubicIn=a.getPowIn(3),a.cubicOut=a.getPowOut(3),a.cubicInOut=a.getPowInOut(3),a.quartIn=a.getPowIn(4),a.quartOut=a.getPowOut(4),a.quartInOut=a.getPowInOut(4),a.quintIn=a.getPowIn(5),a.quintOut=a.getPowOut(5),a.quintInOut=a.getPowInOut(5),a.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)},a.sineOut=function(a){return Math.sin(a*Math.PI/2)},a.sineInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)},a.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}},a.backIn=a.getBackIn(1.7),a.getBackOut=function(a){return function(b){return--b*b*((a+1)*b+a)+1}},a.backOut=a.getBackOut(1.7),a.getBackInOut=function(a){return a*=1.525,function(b){return(b*=2)<1?.5*b*b*((a+1)*b-a):.5*((b-=2)*b*((a+1)*b+a)+2)}},a.backInOut=a.getBackInOut(1.7),a.circIn=function(a){return-(Math.sqrt(1-a*a)-1)},a.circOut=function(a){return Math.sqrt(1- --a*a)},a.circInOut=function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},a.bounceIn=function(b){return 1-a.bounceOut(1-b)},a.bounceOut=function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},a.bounceInOut=function(b){return.5>b?.5*a.bounceIn(2*b):.5*a.bounceOut(2*b-1)+.5},a.getElasticIn=function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=b/c*Math.asin(1/a);return-(a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*c/b))}},a.elasticIn=a.getElasticIn(1,.3),a.getElasticOut=function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=b/c*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-e)*c/b)+1}},a.elasticOut=a.getElasticOut(1,.3),a.getElasticInOut=function(a,b){var c=2*Math.PI;return function(d){var e=b/c*Math.asin(1/a);return(d*=2)<1?-.5*a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*c/b):a*Math.pow(2,-10*(d-=1))*Math.sin((d-e)*c/b)*.5+1}},a.elasticInOut=a.getElasticInOut(1,.3*1.5),createjs.Ease=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"MotionGuidePlugin cannot be instantiated."}a.priority=0,a._rotOffS,a._rotOffE,a._rotNormS,a._rotNormE,a.install=function(){return createjs.Tween.installPlugin(a,["guide","x","y","rotation"]),createjs.Tween.IGNORE},a.init=function(a,b,c){var d=a.target;return d.hasOwnProperty("x")||(d.x=0),d.hasOwnProperty("y")||(d.y=0),d.hasOwnProperty("rotation")||(d.rotation=0),"rotation"==b&&(a.__needsRot=!0),"guide"==b?null:c},a.step=function(b,c,d,e,f){if("rotation"==c&&(b.__rotGlobalS=d,b.__rotGlobalE=e,a.testRotData(b,f)),"guide"!=c)return e;var g,h=e;h.hasOwnProperty("path")||(h.path=[]);var i=h.path;if(h.hasOwnProperty("end")||(h.end=1),h.hasOwnProperty("start")||(h.start=d&&d.hasOwnProperty("end")&&d.path===i?d.end:0),h.hasOwnProperty("_segments")&&h._length)return e;var j=i.length,k=10;if(!(j>=6&&(j-2)%4==0))throw"invalid 'path' data, please see documentation for valid paths";h._segments=[],h._length=0;for(var l=2;j>l;l+=4){for(var m,n,o=i[l-2],p=i[l-1],q=i[l+0],r=i[l+1],s=i[l+2],t=i[l+3],u=o,v=p,w=0,x=[],y=1;k>=y;y++){var z=y/k,A=1-z;m=A*A*o+2*A*z*q+z*z*s,n=A*A*p+2*A*z*r+z*z*t,w+=x[x.push(Math.sqrt((g=m-u)*g+(g=n-v)*g))-1],u=m,v=n}h._segments.push(w),h._segments.push(x),h._length+=w}g=h.orient,h.orient=!0;var B={};return a.calc(h,h.start,B),b.__rotPathS=Number(B.rotation.toFixed(5)),a.calc(h,h.end,B),b.__rotPathE=Number(B.rotation.toFixed(5)),h.orient=!1,a.calc(h,h.end,f),h.orient=g,h.orient?(b.__guideData=h,a.testRotData(b,f),e):e},a.testRotData=function(a,b){if(void 0===a.__rotGlobalS||void 0===a.__rotGlobalE){if(a.__needsRot)return;a.__rotGlobalS=a.__rotGlobalE=void 0!==a._curQueueProps.rotation?a._curQueueProps.rotation:b.rotation=a.target.rotation||0}if(void 0!==a.__guideData){var c=a.__guideData,d=a.__rotGlobalE-a.__rotGlobalS,e=a.__rotPathE-a.__rotPathS,f=d-e;if("auto"==c.orient)f>180?f-=360:-180>f&&(f+=360);else if("cw"==c.orient){for(;0>f;)f+=360;0==f&&d>0&&180!=d&&(f+=360)}else if("ccw"==c.orient){for(f=d-(e>180?360-e:e);f>0;)f-=360;0==f&&0>d&&-180!=d&&(f-=360)}c.rotDelta=f,c.rotOffS=a.__rotGlobalS-a.__rotPathS,a.__rotGlobalS=a.__rotGlobalE=a.__guideData=a.__needsRot=void 0}},a.tween=function(b,c,d,e,f,g,h){var i=f.guide;if(void 0==i||i===e.guide)return d;if(i.lastRatio!=g){var j=(i.end-i.start)*(h?i.end:g)+i.start;switch(a.calc(i,j,b.target),i.orient){case"cw":case"ccw":case"auto":b.target.rotation+=i.rotOffS+i.rotDelta*g;break;case"fixed":default:b.target.rotation+=i.rotOffS}i.lastRatio=g}return"rotation"!=c||i.orient&&"false"!=i.orient?b.target[c]:d},a.calc=function(b,c,d){void 0==b._segments&&a.validate(b),void 0==d&&(d={x:0,y:0,rotation:0});for(var e=b._segments,f=b.path,g=b._length*c,h=e.length-2,i=0;g>e[i]&&h>i;)g-=e[i],i+=2;var j=e[i+1],k=0;for(h=j.length-1;g>j[k]&&h>k;)g-=j[k],k++;var l=k/++h+g/(h*j[k]);i=2*i+2;var m=1-l;return d.x=m*m*f[i-2]+2*m*l*f[i+0]+l*l*f[i+2],d.y=m*m*f[i-1]+2*m*l*f[i+1]+l*l*f[i+3],b.orient&&(d.rotation=57.2957795*Math.atan2((f[i+1]-f[i-1])*m+(f[i+3]-f[i+1])*l,(f[i+0]-f[i-2])*m+(f[i+2]-f[i+0])*l)),d},createjs.MotionGuidePlugin=a}(),this.createjs=this.createjs||{},function(){"use strict";var a=createjs.TweenJS=createjs.TweenJS||{};a.version="0.6.1",a.buildDate="Thu, 21 May 2015 16:17:37 GMT"}();
  </script>
  <script>
   (function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.PIXI=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(f,g,e){(function(i){f("./polyfill");var h=g.exports=f("./core");h.extras=f("./extras");h.filters=f("./filters");h.interaction=f("./interaction");h.loaders=f("./loaders");h.mesh=f("./mesh");h.loader=new h.loaders.Loader();Object.assign(h,f("./deprecation"));i.PIXI=h}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./core":29,"./deprecation":78,"./extras":85,"./filters":102,"./interaction":117,"./loaders":120,"./mesh":126,"./polyfill":130}],2:[function(f,g,e){(function(h){
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){var m={};var y,t;y=this;if(y!=null){t=y.async}m.noConflict=function(){y.async=t;return m};function A(F){var G=false;return function(){if(G){throw new Error("Callback was already called.")}G=true;F.apply(y,arguments)}}var E=Object.prototype.toString;var p=Array.isArray||function(F){return E.call(F)==="[object Array]"};var B=function(F,H){if(F.forEach){return F.forEach(H)}for(var G=0;G<F.length;G+=1){H(F[G],G,F)}};var i=function(F,H){if(F.map){return F.map(H)}var G=[];B(F,function(I,K,J){G.push(H(I,K,J))});return G};var D=function(F,H,G){if(F.reduce){return F.reduce(H,G)}B(F,function(I,K,J){G=H(G,I,K,J)});return G};var k=function(H){if(Object.keys){return Object.keys(H)}var G=[];for(var F in H){if(H.hasOwnProperty(F)){G.push(F)}}return G};if(typeof h==="undefined"||!(h.nextTick)){if(typeof setImmediate==="function"){m.nextTick=function(F){setImmediate(F)};m.setImmediate=m.nextTick}else{m.nextTick=function(F){setTimeout(F,0)};m.setImmediate=m.nextTick}}else{m.nextTick=h.nextTick;if(typeof setImmediate!=="undefined"){m.setImmediate=function(F){setImmediate(F)}}else{m.setImmediate=m.nextTick}}m.each=function(F,I,J){J=J||function(){};if(!F.length){return J()}var H=0;B(F,function(K){I(K,A(G))});function G(K){if(K){J(K);J=function(){}}else{H+=1;if(H>=F.length){J()}}}};m.forEach=m.each;m.eachSeries=function(F,I,J){J=J||function(){};if(!F.length){return J()}var H=0;var G=function(){I(F[H],function(K){if(K){J(K);J=function(){}}else{H+=1;if(H>=F.length){J()}else{G()}}})};G()};m.forEachSeries=m.eachSeries;m.eachLimit=function(F,G,I,J){var H=o(G);H.apply(null,[F,I,J])};m.forEachLimit=m.eachLimit;var o=function(F){return function(G,K,M){M=M||function(){};if(!G.length||F<=0){return M()}var J=0;var H=0;var I=0;(function L(){if(J>=G.length){return M()}while(I<F&&H<G.length){H+=1;I+=1;K(G[H-1],function(N){if(N){M(N);M=function(){}}else{J+=1;I-=1;if(J>=G.length){M()}else{L()}}})}})()}};var z=function(F){return function(){var G=Array.prototype.slice.call(arguments);return F.apply(null,[m.each].concat(G))}};var x=function(F,G){return function(){var H=Array.prototype.slice.call(arguments);return G.apply(null,[o(F)].concat(H))}};var v=function(F){return function(){var G=Array.prototype.slice.call(arguments);return F.apply(null,[m.eachSeries].concat(G))}};var q=function(I,F,H,J){F=i(F,function(K,L){return{index:L,value:K}});if(!J){I(F,function(K,L){H(K.value,function(M){L(M)})})}else{var G=[];I(F,function(K,L){H(K.value,function(N,M){G[K.index]=M;L(N)})},function(K){J(K,G)})}};m.map=z(q);m.mapSeries=v(q);m.mapLimit=function(F,G,H,I){return l(G)(F,H,I)};var l=function(F){return x(F,q)};m.reduce=function(F,G,H,I){m.eachSeries(F,function(J,K){H(G,J,function(M,L){G=L;K(M)})},function(J){I(J,G)})};m.inject=m.reduce;m.foldl=m.reduce;m.reduceRight=function(F,G,H,J){var I=i(F,function(K){return K}).reverse();m.reduce(I,G,H,J)};m.foldr=m.reduceRight;var C=function(I,F,H,J){var G=[];F=i(F,function(K,L){return{index:L,value:K}});I(F,function(K,L){H(K.value,function(M){if(M){G.push(K)}L()})},function(K){J(i(G.sort(function(M,L){return M.index-L.index}),function(L){return L.value}))})};m.filter=z(C);m.filterSeries=v(C);m.select=m.filter;m.selectSeries=m.filterSeries;var u=function(I,F,H,J){var G=[];F=i(F,function(K,L){return{index:L,value:K}});I(F,function(K,L){H(K.value,function(M){if(!M){G.push(K)}L()})},function(K){J(i(G.sort(function(M,L){return M.index-L.index}),function(L){return L.value}))})};m.reject=z(u);m.rejectSeries=v(u);var n=function(H,F,G,I){H(F,function(J,K){G(J,function(L){if(L){I(J);I=function(){}}else{K()}})},function(J){I()})};m.detect=z(n);m.detectSeries=v(n);m.some=function(F,G,H){m.each(F,function(I,J){G(I,function(K){if(K){H(true);H=function(){}}J()})},function(I){H(false)})};m.any=m.some;m.every=function(F,G,H){m.each(F,function(I,J){G(I,function(K){if(!K){H(false);H=function(){}}J()})},function(I){H(true)})};m.all=m.every;m.sortBy=function(F,G,H){m.map(F,function(I,J){G(I,function(K,L){if(K){J(K)}else{J(null,{value:I,criteria:L})}})},function(K,I){if(K){return H(K)}else{var J=function(O,N){var M=O.criteria,L=N.criteria;return M<L?-1:M>L?1:0};H(null,i(I.sort(J),function(L){return L.value}))}})};m.auto=function(H,M){M=M||function(){};var N=k(H);var G=N.length;if(!G){return M()}var J={};var L=[];var F=function(O){L.unshift(O)};var I=function(P){for(var O=0;O<L.length;O+=1){if(L[O]===P){L.splice(O,1);return}}};var K=function(){G--;B(L.slice(0),function(O){O()})};F(function(){if(!G){var O=M;M=function(){};O(null,J)}});B(N,function(P){var O=p(H[P])?H[P]:[H[P]];var T=function(W){var U=Array.prototype.slice.call(arguments,1);if(U.length<=1){U=U[0]}if(W){var V={};B(k(J),function(X){V[X]=J[X]});V[P]=U;M(W,V);M=function(){}}else{J[P]=U;m.setImmediate(K)}};var R=O.slice(0,Math.abs(O.length-1))||[];var Q=function(){return D(R,function(V,U){return(V&&J.hasOwnProperty(U))},true)&&!J.hasOwnProperty(P)};if(Q()){O[O.length-1](T,J)}else{var S=function(){if(Q()){I(S);O[O.length-1](T,J)}};F(S)}})};m.retry=function(J,F,K){var H=5;var G=[];if(typeof J==="function"){K=F;F=J;J=H}J=parseInt(J,10)||H;var I=function(N,L){var M=function(O,P){return function(Q){O(function(S,R){Q(!S||P,{err:S,result:R})},L)}};while(J){G.push(M(F,!(J-=1)))}m.series(G,function(O,P){P=P[P.length-1];(N||K)(P.err,P.result)})};return K?I():I};m.waterfall=function(I,H){H=H||function(){};if(!p(I)){var F=new Error("First argument to waterfall must be an array of functions");return H(F)}if(!I.length){return H()}var G=function(J){return function(M){if(M){H.apply(null,arguments);H=function(){}}else{var K=Array.prototype.slice.call(arguments,1);var L=J.next();if(L){K.push(G(L))}else{K.push(H)}m.setImmediate(function(){J.apply(null,K)})}}};G(m.iterator(I))()};var j=function(G,I,H){H=H||function(){};if(p(I)){G.map(I,function(J,K){if(J){J(function(M){var L=Array.prototype.slice.call(arguments,1);if(L.length<=1){L=L[0]}K.call(null,M,L)})}},H)}else{var F={};G.each(k(I),function(J,K){I[J](function(M){var L=Array.prototype.slice.call(arguments,1);if(L.length<=1){L=L[0]}F[J]=L;K(M)})},function(J){H(J,F)})}};m.parallel=function(G,F){j({map:m.map,each:m.each},G,F)};m.parallelLimit=function(H,F,G){j({map:l(F),each:o(F)},H,G)};m.series=function(H,G){G=G||function(){};if(p(H)){m.mapSeries(H,function(I,J){if(I){I(function(L){var K=Array.prototype.slice.call(arguments,1);if(K.length<=1){K=K[0]}J.call(null,L,K)})}},G)}else{var F={};m.eachSeries(k(H),function(I,J){H[I](function(L){var K=Array.prototype.slice.call(arguments,1);if(K.length<=1){K=K[0]}F[I]=K;J(L)})},function(I){G(I,F)})}};m.iterator=function(G){var F=function(H){var I=function(){if(G.length){G[H].apply(null,arguments)}return I.next()};I.next=function(){return(H<G.length-1)?F(H+1):null};return I};return F(0)};m.apply=function(G){var F=Array.prototype.slice.call(arguments,1);return function(){return G.apply(null,F.concat(Array.prototype.slice.call(arguments)))}};var w=function(I,F,G,J){var H=[];I(F,function(L,K){G(L,function(M,N){H=H.concat(N||[]);K(M)})},function(K){J(K,H)})};m.concat=z(w);m.concatSeries=v(w);m.whilst=function(H,F,G){if(H()){F(function(I){if(I){return G(I)}m.whilst(H,F,G)})}else{G()}};m.doWhilst=function(F,H,G){F(function(J){if(J){return G(J)}var I=Array.prototype.slice.call(arguments,1);if(H.apply(null,I)){m.doWhilst(F,H,G)}else{G()}})};m.until=function(H,F,G){if(!H()){F(function(I){if(I){return G(I)}m.until(H,F,G)})}else{G()}};m.doUntil=function(F,H,G){F(function(J){if(J){return G(J)}var I=Array.prototype.slice.call(arguments,1);if(!H.apply(null,I)){m.doUntil(F,H,G)}else{G()}})};m.queue=function(J,H){if(H===undefined){H=1}function F(L,K,N,M){if(!L.started){L.started=true}if(!p(K)){K=[K]}if(K.length==0){return m.setImmediate(function(){if(L.drain){L.drain()}})}B(K,function(O){var P={data:O,callback:typeof M==="function"?M:null};if(N){L.tasks.unshift(P)}else{L.tasks.push(P)}if(L.saturated&&L.tasks.length===L.concurrency){L.saturated()}m.setImmediate(L.process)})}var G=0;var I={tasks:[],concurrency:H,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(K,L){F(I,K,false,L)},kill:function(){I.drain=null;I.tasks=[]},unshift:function(K,L){F(I,K,true,L)},process:function(){if(!I.paused&&G<I.concurrency&&I.tasks.length){var L=I.tasks.shift();if(I.empty&&I.tasks.length===0){I.empty()}G+=1;var M=function(){G-=1;if(L.callback){L.callback.apply(L,arguments)}if(I.drain&&I.tasks.length+G===0){I.drain()}I.process()};var K=A(M);J(L.data,K)}},length:function(){return I.tasks.length},running:function(){return G},idle:function(){return I.tasks.length+G===0},pause:function(){if(I.paused===true){return}I.paused=true;I.process()},resume:function(){if(I.paused===false){return}I.paused=false;I.process()}};return I};m.priorityQueue=function(K,I){function H(M,L){return M.priority-L.priority}function G(Q,O,P){var N=-1,L=Q.length-1;while(N<L){var M=N+((L-N+1)>>>1);if(P(O,Q[M])>=0){N=M}else{L=M-1}}return N}function F(N,M,L,O){if(!N.started){N.started=true}if(!p(M)){M=[M]}if(M.length==0){return m.setImmediate(function(){if(N.drain){N.drain()}})}B(M,function(P){var Q={data:P,priority:L,callback:typeof O==="function"?O:null};N.tasks.splice(G(N.tasks,Q,H)+1,0,Q);if(N.saturated&&N.tasks.length===N.concurrency){N.saturated()}m.setImmediate(N.process)})}var J=m.queue(K,I);J.push=function(M,L,N){F(J,M,L,N)};delete J.unshift;return J};m.cargo=function(J,I){var F=false,K=[];var G={tasks:K,payload:I,saturated:null,empty:null,drain:null,drained:true,push:function(L,M){if(!p(L)){L=[L]}B(L,function(N){K.push({data:N,callback:typeof M==="function"?M:null});G.drained=false;if(G.saturated&&K.length===I){G.saturated()}});m.setImmediate(G.process)},process:function H(){if(F){return}if(K.length===0){if(G.drain&&!G.drained){G.drain()}G.drained=true;return}var L=typeof I==="number"?K.splice(0,I):K.splice(0,K.length);var M=i(L,function(N){return N.data});if(G.empty){G.empty()}F=true;J(M,function(){F=false;var N=arguments;B(L,function(O){if(O.callback){O.callback.apply(null,N)}});H()})},length:function(){return K.length},running:function(){return F}};return G};var r=function(F){return function(H){var G=Array.prototype.slice.call(arguments,1);H.apply(null,G.concat([function(J){var I=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(J){if(console.error){console.error(J)}}else{if(console[F]){B(I,function(K){console[F](K)})}}}}]))}};m.log=r("log");m.dir=r("dir");m.memoize=function(J,H){var G={};var I={};H=H||function(K){return K};var F=function(){var K=Array.prototype.slice.call(arguments);var M=K.pop();var L=H.apply(null,K);if(L in G){m.nextTick(function(){M.apply(null,G[L])})}else{if(L in I){I[L].push(M)}else{I[L]=[M];J.apply(null,K.concat([function(){G[L]=arguments;var P=I[L];delete I[L];for(var O=0,N=P.length;O<N;O++){P[O].apply(null,arguments)}}]))}}};F.memo=G;F.unmemoized=J;return F};m.unmemoize=function(F){return function(){return(F.unmemoized||F).apply(null,arguments)}};m.times=function(I,H,J){var F=[];for(var G=0;G<I;G++){F.push(G)}return m.map(F,H,J)};m.timesSeries=function(I,H,J){var F=[];for(var G=0;G<I;G++){F.push(G)}return m.mapSeries(F,H,J)};m.seq=function(){var F=arguments;return function(){var H=this;var G=Array.prototype.slice.call(arguments);var I=G.pop();m.reduce(F,G,function(K,L,J){L.apply(H,K.concat([function(){var N=arguments[0];var M=Array.prototype.slice.call(arguments,1);J(N,M)}]))},function(K,J){I.apply(H,[K].concat(J))})}};m.compose=function(){return m.seq.apply(null,Array.prototype.reverse.call(arguments))};var s=function(I,G){var H=function(){var K=this;var J=Array.prototype.slice.call(arguments);var L=J.pop();return I(G,function(N,M){N.apply(K,J.concat([M]))},L)};if(arguments.length>2){var F=Array.prototype.slice.call(arguments,2);return H.apply(this,F)}else{return H}};m.applyEach=z(s);m.applyEachSeries=v(s);m.forever=function(G,H){function F(I){if(I){if(H){return H(I)}throw I}G(F)}F()};if(typeof g!=="undefined"&&g.exports){g.exports=m}else{if(typeof d!=="undefined"&&d.amd){d([],function(){return m})}else{y.async=m}}}())}).call(this,f("_process"))},{_process:4}],3:[function(f,g,e){(function(m){function k(r,o){var n=0;for(var p=r.length-1;p>=0;p--){var q=r[p];if(q==="."){r.splice(p,1)}else{if(q===".."){r.splice(p,1);n++}else{if(n){r.splice(p,1);n--}}}}if(o){for(;n--;n){r.unshift("..")}}return r}var j=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var h=function(n){return j.exec(n).slice(1)};e.resolve=function(){var p="",n=false;for(var o=arguments.length-1;o>=-1&&!n;o--){var q=(o>=0)?arguments[o]:m.cwd();if(typeof q!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else{if(!q){continue}}p=q+"/"+p;n=q.charAt(0)==="/"}p=k(i(p.split("/"),function(r){return !!r}),!n).join("/");return((n?"/":"")+p)||"."};e.normalize=function(p){var o=e.isAbsolute(p),n=l(p,-1)==="/";p=k(i(p.split("/"),function(q){return !!q}),!o).join("/");if(!p&&!o){p="."}if(p&&n){p+="/"}return(o?"/":"")+p};e.isAbsolute=function(n){return n.charAt(0)==="/"};e.join=function(){var n=Array.prototype.slice.call(arguments,0);return e.normalize(i(n,function(q,o){if(typeof q!=="string"){throw new TypeError("Arguments to path.join must be strings")}return q}).join("/"))};e.relative=function(t,u){t=e.resolve(t).substr(1);u=e.resolve(u).substr(1);function p(w){var y=0;for(;y<w.length;y++){if(w[y]!==""){break}}var x=w.length-1;for(;x>=0;x--){if(w[x]!==""){break}}if(y>x){return[]}return w.slice(y,x-y+1)}var s=p(t.split("/"));var o=p(u.split("/"));var n=Math.min(s.length,o.length);var v=n;for(var r=0;r<n;r++){if(s[r]!==o[r]){v=r;break}}var q=[];for(var r=v;r<s.length;r++){q.push("..")}q=q.concat(o.slice(v));return q.join("/")};e.sep="/";e.delimiter=":";e.dirname=function(q){var n=h(q),o=n[0],p=n[1];if(!o&&!p){return"."}if(p){p=p.substr(0,p.length-1)}return o+p};e.basename=function(p,n){var o=h(p)[2];if(n&&o.substr(-1*n.length)===n){o=o.substr(0,o.length-n.length)}return o};e.extname=function(n){return h(n)[3]};function i(n,q){if(n.filter){return n.filter(q)}var p=[];for(var o=0;o<n.length;o++){if(q(n[o],o,n)){p.push(n[o])}}return p}var l="ab".substr(-1)==="b"?function(o,p,n){return o.substr(p,n)}:function(o,p,n){if(p<0){p=o.length+p}return o.substr(p,n)}}).call(this,f("_process"))},{_process:4}],4:[function(g,h,f){var k=h.exports={};var e=[];var l=false;function j(){if(l){return}l=true;var o;var m=e.length;while(m){o=e;e=[];var n=-1;while(++n<m){o[n]()}m=e.length}l=false}k.nextTick=function(m){e.push(m);if(!l){setTimeout(j,0)}};k.title="browser";k.browser=true;k.env={};k.argv=[];k.version="";k.versions={};function i(){}k.on=i;k.addListener=i;k.once=i;k.off=i;k.removeListener=i;k.removeAllListeners=i;k.emit=i;k.binding=function(m){throw new Error("process.binding is not supported")};k.cwd=function(){return"/"};k.chdir=function(m){throw new Error("process.chdir is not supported")};k.umask=function(){return 0}},{}],5:[function(f,g,e){(function(h){
/*! http://mths.be/punycode v1.2.4 by @mathias */
;(function(H){var x=typeof e=="object"&&e;var P=typeof g=="object"&&g&&g.exports==x&&g;var G=typeof h=="object"&&h;if(G.global===G||G.window===G){H=G}var m,A=2147483647,t=36,v=1,y=26,q=38,u=700,w=72,p=128,N="-",D=/^xn--/,l=/[^ -~]/,i=/\x2E|\u3002|\uFF0E|\uFF61/g,z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},o=t-v,J=Math.floor,F=String.fromCharCode,O;function I(Q){throw RangeError(z[Q])}function L(S,Q){var R=S.length;while(R--){S[R]=Q(S[R])}return S}function k(Q,R){return L(Q.split(i),R).join(".")}function s(T){var S=[],R=0,U=T.length,V,Q;while(R<U){V=T.charCodeAt(R++);if(V>=55296&&V<=56319&&R<U){Q=T.charCodeAt(R++);if((Q&64512)==56320){S.push(((V&1023)<<10)+(Q&1023)+65536)}else{S.push(V);R--}}else{S.push(V)}}return S}function K(Q){return L(Q,function(S){var R="";if(S>65535){S-=65536;R+=F(S>>>10&1023|55296);S=56320|S&1023}R+=F(S);return R}).join("")}function n(Q){if(Q-48<10){return Q-22}if(Q-65<26){return Q-65}if(Q-97<26){return Q-97}return t}function E(R,Q){return R+22+75*(R<26)-((Q!=0)<<5)}function j(T,R,S){var Q=0;T=S?J(T/u):T>>1;T+=J(T/R);for(;T>o*y>>1;Q+=t){T=J(T/o)}return J(Q+(o+1)*T/(T+q))}function C(ac){var S=[],V=ac.length,X,Y=0,R=p,Z=w,U,W,aa,Q,ad,T,ab,af,ae;U=ac.lastIndexOf(N);if(U<0){U=0}for(W=0;W<U;++W){if(ac.charCodeAt(W)>=128){I("not-basic")}S.push(ac.charCodeAt(W))}for(aa=U>0?U+1:0;aa<V;){for(Q=Y,ad=1,T=t;;T+=t){if(aa>=V){I("invalid-input")}ab=n(ac.charCodeAt(aa++));if(ab>=t||ab>J((A-Y)/ad)){I("overflow")}Y+=ab*ad;af=T<=Z?v:(T>=Z+y?y:T-Z);if(ab<af){break}ae=t-af;if(ad>J(A/ae)){I("overflow")}ad*=ae}X=S.length+1;Z=j(Y-Q,X,Q==0);if(J(Y/X)>A-R){I("overflow")}R+=J(Y/X);Y%=X;S.splice(Y++,0,R)}return K(S)}function r(ac){var T,ae,Z,R,aa,Y,U,Q,X,ag,ad,S=[],W,V,af,ab;ac=s(ac);W=ac.length;T=p;ae=0;aa=w;for(Y=0;Y<W;++Y){ad=ac[Y];if(ad<128){S.push(F(ad))}}Z=R=S.length;if(R){S.push(N)}while(Z<W){for(U=A,Y=0;Y<W;++Y){ad=ac[Y];if(ad>=T&&ad<U){U=ad}}V=Z+1;if(U-T>J((A-ae)/V)){I("overflow")}ae+=(U-T)*V;T=U;for(Y=0;Y<W;++Y){ad=ac[Y];if(ad<T&&++ae>A){I("overflow")}if(ad==T){for(Q=ae,X=t;;X+=t){ag=X<=aa?v:(X>=aa+y?y:X-aa);if(Q<ag){break}ab=Q-ag;af=t-ag;S.push(F(E(ag+ab%af,0)));Q=J(ab/af)}S.push(F(E(Q,0)));aa=j(ae,V,Z==R);ae=0;++Z}}++ae;++T}return S.join("")}function B(Q){return k(Q,function(R){return D.test(R)?C(R.slice(4).toLowerCase()):R})}function M(Q){return k(Q,function(R){return l.test(R)?"xn--"+r(R):R})}m={version:"1.2.4",ucs2:{decode:s,encode:K},decode:C,encode:r,toASCII:M,toUnicode:B};if(typeof d=="function"&&typeof d.amd=="object"&&d.amd){d("punycode",function(){return m})}else{if(x&&!x.nodeType){if(P){P.exports=m}else{for(O in m){m.hasOwnProperty(O)&&(x[O]=m[O])}}}else{H.punycode=m}}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],6:[function(g,h,f){function i(j,k){return Object.prototype.hasOwnProperty.call(j,k)}h.exports=function(p,z,y,A){z=z||"&";y=y||"=";var m={};if(typeof p!=="string"||p.length===0){return m}var o=/\+/g;p=p.split(z);var s=1000;if(A&&typeof A.maxKeys==="number"){s=A.maxKeys}var n=p.length;if(s>0&&n>s){n=s}for(var l=0;l<n;++l){var r=p[l].replace(o,"%20"),t=r.indexOf(y),q,w,j,u;if(t>=0){q=r.substr(0,t);w=r.substr(t+1)}else{q=r;w=""}j=decodeURIComponent(q);u=decodeURIComponent(w);if(!i(m,j)){m[j]=u}else{if(e(m[j])){m[j].push(u)}else{m[j]=[m[j],u]}}}return m};var e=Array.isArray||function(j){return Object.prototype.toString.call(j)==="[object Array]"}},{}],7:[function(h,i,g){var k=function(l){switch(typeof l){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}};i.exports=function(o,n,l,m){n=n||"&";l=l||"=";if(o===null){o=undefined}if(typeof o==="object"){return j(f(o),function(p){var q=encodeURIComponent(k(p))+l;if(e(o[p])){return j(o[p],function(r){return q+encodeURIComponent(k(r))}).join(n)}else{return q+encodeURIComponent(k(o[p]))}}).join(n)}if(!m){return""}return encodeURIComponent(k(m))+l+encodeURIComponent(k(o))};var e=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function j(l,o){if(l.map){return l.map(o)}var n=[];for(var m=0;m<l.length;m++){n.push(o(l[m],m))}return n}var f=Object.keys||function(n){var m=[];for(var l in n){if(Object.prototype.hasOwnProperty.call(n,l)){m.push(l)}}return m}},{}],8:[function(f,g,e){e.decode=e.parse=f("./decode");e.encode=e.stringify=f("./encode")},{"./decode":6,"./encode":7}],9:[function(p,h,D){var g=p("punycode");D.parse=A;D.resolve=r;D.resolveObject=m;D.format=t;D.Url=w;function w(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var k=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,n=["<",">",'"',"`"," ","\r","\n","\t"],f=["{","}","|","\\","^","`"].concat(n),B=["'"].concat(f),C=["%","/","?",";","#"].concat(B),y=["/","?","#"],E=255,o=/^[a-z0-9A-Z_-]{0,63}$/,j=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:true,"javascript:":true},v={javascript:true,"javascript:":true},l={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},i=p("querystring");function A(G,I,H){if(G&&s(G)&&G instanceof w){return G}var F=new w;F.parse(G,I,H);return F}w.prototype.parse=function(K,ab,ag){if(!u(K)){throw new TypeError("Parameter 'url' must be a string, not "+typeof K)}var Q=K;Q=Q.trim();var V=k.exec(Q);if(V){V=V[0];var ah=V.toLowerCase();this.protocol=ah;Q=Q.substr(V.length)}if(ag||V||Q.match(/^\/\/[^@\/]+@[^@\/]+/)){var I=Q.substr(0,2)==="//";if(I&&!(V&&v[V])){Q=Q.substr(2);this.slashes=true}}if(!v[V]&&(I||(V&&!l[V]))){var G=-1;for(var ac=0;ac<y.length;ac++){var af=Q.indexOf(y[ac]);if(af!==-1&&(G===-1||af<G)){G=af}}var O,S;if(G===-1){S=Q.lastIndexOf("@")}else{S=Q.lastIndexOf("@",G)}if(S!==-1){O=Q.slice(0,S);Q=Q.slice(S+1);this.auth=decodeURIComponent(O)}G=-1;for(var ac=0;ac<C.length;ac++){var af=Q.indexOf(C[ac]);if(af!==-1&&(G===-1||af<G)){G=af}}if(G===-1){G=Q.length}this.host=Q.slice(0,G);Q=Q.slice(G);this.parseHost();this.hostname=this.hostname||"";var J=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!J){var N=this.hostname.split(/\./);for(var ac=0,X=N.length;ac<X;ac++){var W=N[ac];if(!W){continue}if(!W.match(o)){var aj="";for(var aa=0,Y=W.length;aa<Y;aa++){if(W.charCodeAt(aa)>127){aj+="x"}else{aj+=W[aa]}}if(!aj.match(o)){var Z=N.slice(0,ac);var M=N.slice(ac+1);var P=W.match(j);if(P){Z.push(P[1]);M.unshift(P[2])}if(M.length){Q="/"+M.join(".")+Q}this.hostname=Z.join(".");break}}}}if(this.hostname.length>E){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!J){var L=this.hostname.split(".");var T=[];for(var ac=0;ac<L.length;++ac){var R=L[ac];T.push(R.match(/[^A-Za-z0-9_-]/)?"xn--"+g.encode(R):R)}this.hostname=T.join(".")}var U=this.port?":"+this.port:"";var ad=this.hostname||"";this.host=ad+U;this.href+=this.host;if(J){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(Q[0]!=="/"){Q="/"+Q}}}if(!x[ah]){for(var ac=0,X=B.length;ac<X;ac++){var ai=B[ac];var ak=encodeURIComponent(ai);if(ak===ai){ak=escape(ai)}Q=Q.split(ai).join(ak)}}var F=Q.indexOf("#");if(F!==-1){this.hash=Q.substr(F);Q=Q.slice(0,F)}var H=Q.indexOf("?");if(H!==-1){this.search=Q.substr(H);this.query=Q.substr(H+1);if(ab){this.query=i.parse(this.query)}Q=Q.slice(0,H)}else{if(ab){this.search="";this.query={}}}if(Q){this.pathname=Q}if(l[ah]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var U=this.pathname||"";var R=this.search||"";this.path=U+R}this.href=this.format();return this};function t(F){if(u(F)){F=A(F)}if(!(F instanceof w)){return w.prototype.format.call(F)}return F.format()}w.prototype.format=function(){var H=this.auth||"";if(H){H=encodeURIComponent(H);H=H.replace(/%3A/i,":");H+="@"}var L=this.protocol||"",K=this.pathname||"",J=this.hash||"",G=false,I="";if(this.host){G=H+this.host}else{if(this.hostname){G=H+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){G+=":"+this.port}}}if(this.query&&s(this.query)&&Object.keys(this.query).length){I=i.stringify(this.query)}var F=this.search||(I&&("?"+I))||"";if(L&&L.substr(-1)!==":"){L+=":"}if(this.slashes||(!L||l[L])&&G!==false){G="//"+(G||"");if(K&&K.charAt(0)!=="/"){K="/"+K}}else{if(!G){G=""}}if(J&&J.charAt(0)!=="#"){J="#"+J}if(F&&F.charAt(0)!=="?"){F="?"+F}K=K.replace(/[?#]/g,function(M){return encodeURIComponent(M)});F=F.replace("#","%23");return L+G+K+F+J};function r(G,F){return A(G,false,true).resolve(F)}w.prototype.resolve=function(F){return this.resolveObject(A(F,false,true)).format()};function m(G,F){if(!G){return F}return A(G,false,true).resolveObject(F)}w.prototype.resolveObject=function(V){if(u(V)){var H=new w();H.parse(V,false,true);V=H}var L=new w();Object.keys(this).forEach(function(X){L[X]=this[X]},this);L.hash=V.hash;if(V.href===""){L.href=L.format();return L}if(V.slashes&&!V.protocol){Object.keys(V).forEach(function(X){if(X!=="protocol"){L[X]=V[X]}});if(l[L.protocol]&&L.hostname&&!L.pathname){L.path=L.pathname="/"}L.href=L.format();return L}if(V.protocol&&V.protocol!==L.protocol){if(!l[V.protocol]){Object.keys(V).forEach(function(X){L[X]=V[X]});L.href=L.format();return L}L.protocol=V.protocol;if(!V.host&&!v[V.protocol]){var W=(V.pathname||"").split("/");while(W.length&&!(V.host=W.shift())){}if(!V.host){V.host=""}if(!V.hostname){V.hostname=""}if(W[0]!==""){W.unshift("")}if(W.length<2){W.unshift("")}L.pathname=W.join("/")}else{L.pathname=V.pathname}L.search=V.search;L.query=V.query;L.host=V.host||"";L.auth=V.auth;L.hostname=V.hostname||V.host;L.port=V.port;if(L.pathname||L.search){var P=L.pathname||"";var N=L.search||"";L.path=P+N}L.slashes=L.slashes||V.slashes;L.href=L.format();return L}var O=(L.pathname&&L.pathname.charAt(0)==="/"),S=(V.host||V.pathname&&V.pathname.charAt(0)==="/"),T=(S||O||(L.host&&V.pathname)),I=T,M=L.pathname&&L.pathname.split("/")||[],W=V.pathname&&V.pathname.split("/")||[],G=L.protocol&&!l[L.protocol];if(G){L.hostname="";L.port=null;if(L.host){if(M[0]===""){M[0]=L.host}else{M.unshift(L.host)}}L.host="";if(V.protocol){V.hostname=null;V.port=null;if(V.host){if(W[0]===""){W[0]=V.host}else{W.unshift(V.host)}}V.host=null}T=T&&(W[0]===""||M[0]==="")}if(S){L.host=(V.host||V.host==="")?V.host:L.host;L.hostname=(V.hostname||V.hostname==="")?V.hostname:L.hostname;L.search=V.search;L.query=V.query;M=W}else{if(W.length){if(!M){M=[]}M.pop();M=M.concat(W);L.search=V.search;L.query=V.query}else{if(!q(V.search)){if(G){L.hostname=L.host=M.shift();var R=L.host&&L.host.indexOf("@")>0?L.host.split("@"):false;if(R){L.auth=R.shift();L.host=L.hostname=R.shift()}}L.search=V.search;L.query=V.query;if(!z(L.pathname)||!z(L.search)){L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")}L.href=L.format();return L}}}if(!M.length){L.pathname=null;if(L.search){L.path="/"+L.search}else{L.path=null}L.href=L.format();return L}var J=M.slice(-1)[0];var F=((L.host||V.host)&&(J==="."||J==="..")||J==="");var K=0;for(var U=M.length;U>=0;U--){J=M[U];if(J=="."){M.splice(U,1)}else{if(J===".."){M.splice(U,1);K++}else{if(K){M.splice(U,1);K--}}}}if(!T&&!I){for(;K--;K){M.unshift("..")}}if(T&&M[0]!==""&&(!M[0]||M[0].charAt(0)!=="/")){M.unshift("")}if(F&&(M.join("/").substr(-1)!=="/")){M.push("")}var Q=M[0]===""||(M[0]&&M[0].charAt(0)==="/");if(G){L.hostname=L.host=Q?"":M.length?M.shift():"";var R=L.host&&L.host.indexOf("@")>0?L.host.split("@"):false;if(R){L.auth=R.shift();L.host=L.hostname=R.shift()}}T=T||(L.host&&M.length);if(T&&!Q){M.unshift("")}if(!M.length){L.pathname=null;L.path=null}else{L.pathname=M.join("/")}if(!z(L.pathname)||!z(L.search)){L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")}L.auth=V.auth||L.auth;L.slashes=L.slashes||V.slashes;L.href=L.format();return L};w.prototype.parseHost=function(){var G=this.host;var F=e.exec(G);if(F){F=F[0];if(F!==":"){this.port=F.substr(1)}G=G.substr(0,G.length-F.length)}if(G){this.hostname=G}};function u(F){return typeof F==="string"}function s(F){return typeof F==="object"&&F!==null}function z(F){return F===null}function q(F){return F==null}},{punycode:5,querystring:8}],10:[function(q,h,E){h.exports=n;function n(M,Q,N){N=N||2;var O=Q&&Q.length,K=O?Q[0]*N:M.length,P=v(M,B(M,0,K,N,true)),I=[];if(!P){return I}var J,H,G,F,S,R,T;if(O){P=x(M,Q,P,N)}if(M.length>80*N){J=G=M[0];H=F=M[1];for(var L=N;L<K;L+=N){S=M[L];R=M[L+1];if(S<J){J=S}if(R<H){H=R}if(S>G){G=S}if(R>F){F=R}}T=Math.max(G-J,F-H)}g(M,P,I,N,J,H,T);return I}function B(J,G,H,L,F){var M=0,K,I,N;for(K=G,I=H-L;K<H;K+=L){M+=(J[I]-J[K])*(J[K+1]+J[I+1]);I=K}if(F===(M>0)){for(K=G;K<H;K+=L){N=l(K,N)}}else{for(K=H-L;K>=G;K-=L){N=l(K,N)}}return N}function v(I,J,F){if(!F){F=J}var H=J,G;do{G=false;if(s(I,H.i,H.next.i)||r(I,H.prev.i,H.i,H.next.i)===0){H.prev.next=H.next;H.next.prev=H.prev;if(H.prevZ){H.prevZ.nextZ=H.nextZ}if(H.nextZ){H.nextZ.prevZ=H.prevZ}H=F=H.prev;if(H===H.next){return null}G=true}else{H=H.next}}while(G||H!==F);return F}function g(K,G,I,M,J,F,P,O){if(!G){return}if(!O&&J!==undefined){p(K,G,J,F,P)}var N=G,H,L;while(G.prev!==G.next){H=G.prev;L=G.next;if(y(K,G,J,F,P)){I.push(H.i/M);I.push(G.i/M);I.push(L.i/M);L.prev=H;H.next=L;if(G.prevZ){G.prevZ.nextZ=G.nextZ}if(G.nextZ){G.nextZ.prevZ=G.prevZ}G=L.next;N=L.next;continue}G=L;if(G===N){if(!O){g(K,v(K,G),I,M,J,F,P,1)}else{if(O===1){G=u(K,G,I,M);g(K,G,I,M,J,F,P,2)}else{if(O===2){t(K,G,I,M,J,F,P)}}}break}}}function y(am,N,aj,ag,T){var al=N.prev.i,ak=N.i,ah=N.next.i,O=am[al],L=am[al+1],ad=am[ak],aa=am[ak+1],G=am[ah],F=am[ah+1],ai=O*aa-L*ad,I=O*F-L*G,an=G*aa-F*ad,U=ai-I-an;if(U<=0){return false}var H=F-L,ac=O-G,K=L-aa,W=ad-O,Y,S,R,Q,P,X,V;if(aj!==undefined){var M=O<ad?(O<G?O:G):(ad<G?ad:G),J=L<aa?(L<F?L:F):(aa<F?aa:F),ab=O>ad?(O>G?O:G):(ad>G?ad:G),Z=L>aa?(L>F?L:F):(aa>F?aa:F),af=e(M,J,aj,ag,T),ae=e(ab,Z,aj,ag,T);V=N.nextZ;while(V&&V.z<=ae){Y=V.i;V=V.nextZ;if(Y===al||Y===ah){continue}S=am[Y];R=am[Y+1];Q=H*S+ac*R-I;if(Q>=0){P=K*S+W*R+ai;if(P>=0){X=U-Q-P;if((X>=0)&&((Q&&P)||(Q&&X)||(P&&X))){return false}}}}V=N.prevZ;while(V&&V.z>=af){Y=V.i;V=V.prevZ;if(Y===al||Y===ah){continue}S=am[Y];R=am[Y+1];Q=H*S+ac*R-I;if(Q>=0){P=K*S+W*R+ai;if(P>=0){X=U-Q-P;if((X>=0)&&((Q&&P)||(Q&&X)||(P&&X))){return false}}}}}else{V=N.next.next;while(V!==N.prev){Y=V.i;V=V.next;S=am[Y];R=am[Y+1];Q=H*S+ac*R-I;if(Q>=0){P=K*S+W*R+ai;if(P>=0){X=U-Q-P;if((X>=0)&&((Q&&P)||(Q&&X)||(P&&X))){return false}}}}}return true}function u(I,F,H,J){var G=F;do{var M=G.prev,L=G.next.next;if(M.i!==L.i&&f(I,M.i,G.i,G.next.i,L.i)&&A(I,M,L)&&A(I,L,M)){H.push(M.i/J);H.push(G.i/J);H.push(L.i/J);M.next=L;L.prev=M;var N=G.prevZ,K=G.nextZ&&G.nextZ.nextZ;if(N){N.nextZ=K}if(K){K.prevZ=N}G=F=L}G=G.next}while(G!==F);return G}function t(J,F,H,K,I,G,O){var N=F;do{var M=N.next.next;while(M!==N.prev){if(N.i!==M.i&&z(J,N,M)){var L=o(N,M);N=v(J,N,N.next);L=v(J,L,L.next);g(J,N,H,K,I,G,O);g(J,L,H,K,I,G,O);return}M=M.next}N=N.next}while(N!==F)}function x(H,O,K,J){var L=[],I,M,F,G,N;for(I=0,M=O.length;I<M;I++){F=O[I]*J;G=I<M-1?O[I+1]*J:H.length;N=v(H,B(H,F,G,J,false));if(N){L.push(m(H,N))}}L.sort(function(Q,P){return H[Q.i]-H[P.i]});for(I=0;I<L.length;I++){k(H,L[I],K);K=v(H,K,K.next)}return K}function k(I,H,G){G=C(I,H,G);if(G){var F=o(G,H);v(I,F,F.next)}}function C(ai,J,L){var V=L,Y=J.i,T=ai[Y],S=ai[Y+1],ad=-Infinity,G,ah,ae;do{ah=V.i;ae=V.next.i;if(S<=ai[ah+1]&&S>=ai[ae+1]){var af=ai[ah]+(S-ai[ah+1])*(ai[ae]-ai[ah])/(ai[ae+1]-ai[ah+1]);if(af<=T&&af>ad){ad=af;G=ai[ah]<ai[ae]?V:V.next}}V=V.next}while(V!==L);if(!G){return null}var ab=ai[G.i],aa=ai[G.i+1],H=T*aa-S*ab,P=T*S-S*ad,K=S-S,F=T-ad,X=S-aa,Z=ab-T,U=H-P-(ad*aa-S*ab),ag=U<=0?-1:1,W=G,M=Infinity,R,O,I,Q,N,ac;V=G.next;while(V!==W){R=ai[V.i];O=ai[V.i+1];I=T-R;if(I>=0&&R>=ab){Q=(K*R+F*O-P)*ag;if(Q>=0){N=(X*R+Z*O+H)*ag;if(N>=0&&U*ag-Q-N>=0){ac=Math.abs(S-O)/I;if(ac<M&&A(ai,V,J)){G=V;M=ac}}}}V=V.next}return G}function p(I,K,F,J,G){var H=K;do{if(H.z===null){H.z=e(I[H.i],I[H.i+1],F,J,G)}H.prevZ=H.prev;H.nextZ=H.next;H=H.next}while(H!==K);H.prevZ.nextZ=null;H.prevZ=null;j(H)}function j(L){var I,H,G,K,M,F,N,J,O=1;do{H=L;L=null;M=null;F=0;while(H){F++;G=H;N=0;for(I=0;I<O;I++){N++;G=G.nextZ;if(!G){break}}J=O;while(N>0||(J>0&&G)){if(N===0){K=G;G=G.nextZ;J--}else{if(J===0||!G){K=H;H=H.nextZ;N--}else{if(H.z<=G.z){K=H;H=H.nextZ;N--}else{K=G;G=G.nextZ;J--}}}if(M){M.nextZ=K}else{L=K}K.prevZ=M;M=K}H=G}M.nextZ=null;O*=2}while(F>1);return L}function e(G,J,F,I,H){G=1000*(G-F)/H;G=(G|(G<<8))&16711935;G=(G|(G<<4))&252645135;G=(G|(G<<2))&858993459;G=(G|(G<<1))&1431655765;J=1000*(J-I)/H;J=(J|(J<<8))&16711935;J=(J|(J<<4))&252645135;J=(J|(J<<2))&858993459;J=(J|(J<<1))&1431655765;return G|(J<<1)}function m(H,I){var G=I,F=I;do{if(H[G.i]<H[F.i]){F=G}G=G.next}while(G!==I);return F}function z(H,G,F){return !w(H,G,G.i,F.i)&&A(H,G,F)&&A(H,F,G)&&i(H,G,G.i,F.i)}function r(H,I,G,F){var J=(H[G+1]-H[I+1])*(H[F]-H[G])-(H[G]-H[I])*(H[F+1]-H[G+1]);return J>0?1:J<0?-1:0}function s(F,H,G){return F[H]===F[G]&&F[H+1]===F[G+1]}function f(G,I,F,H,J){return r(G,I,F,H)!==r(G,I,F,J)&&r(G,H,J,I)!==r(G,H,J,F)}function w(I,L,G,F){var H=L;do{var K=H.i,J=H.next.i;if(K!==G&&J!==G&&K!==F&&J!==F&&f(I,K,J,G,F)){return true}H=H.next}while(H!==L);return false}function A(H,G,F){return r(H,G.prev.i,G.i,G.next.i)===-1?r(H,G.i,F.i,G.next.i)!==-1&&r(H,G.i,G.prev.i,F.i)!==-1:r(H,G.i,F.i,G.prev.i)===-1||r(H,G.i,G.next.i,F.i)===-1}function i(I,F,L,J){var G=F,H=false,M=(I[L]+I[J])/2,K=(I[L+1]+I[J+1])/2;do{var O=G.i,N=G.next.i;if(((I[O+1]>K)!==(I[N+1]>K))&&(M<(I[N]-I[O])*(K-I[O+1])/(I[N+1]-I[O+1])+I[O])){H=!H}G=G.next}while(G!==F);return H}function o(H,G){var F=new D(H.i),I=new D(G.i),K=H.next,J=G.prev;H.next=G;G.prev=H;F.next=K;K.prev=F;I.next=F;F.prev=I;J.next=I;I.prev=J;return I}function l(F,H){var G=new D(F);if(!H){G.prev=G;G.next=G}else{G.next=H.next;G.prev=H;H.next.prev=G;H.next=G}return G}function D(F){this.i=F;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null}},{}],11:[function(h,g,i){var k=typeof Object.create!=="function"?"~":false;function q(t,r,s){this.fn=t;this.context=r;this.once=s||false}function p(){}p.prototype._events=undefined;p.prototype.listeners=function m(w,v){var t=k?k+w:w,x=this._events&&this._events[t];if(v){return !!x}if(!x){return[]}if(this._events[t].fn){return[this._events[t].fn]}for(var u=0,s=this._events[t].length,r=new Array(s);u<s;u++){r[u]=this._events[t][u].fn}return r};p.prototype.emit=function n(s,u,t,r,D,C){var B=k?k+s:s;if(!this._events||!this._events[B]){return false}var A=this._events[B],y=arguments.length,z,x;if("function"===typeof A.fn){if(A.once){this.removeListener(s,A.fn,undefined,true)}switch(y){case 1:return A.fn.call(A.context),true;case 2:return A.fn.call(A.context,u),true;case 3:return A.fn.call(A.context,u,t),true;case 4:return A.fn.call(A.context,u,t,r),true;case 5:return A.fn.call(A.context,u,t,r,D),true;case 6:return A.fn.call(A.context,u,t,r,D,C),true}for(x=1,z=new Array(y-1);x<y;x++){z[x-1]=arguments[x]}A.fn.apply(A.context,z)}else{var v=A.length,w;for(x=0;x<v;x++){if(A[x].once){this.removeListener(s,A[x].fn,undefined,true)}switch(y){case 1:A[x].fn.call(A[x].context);break;case 2:A[x].fn.call(A[x].context,u);break;case 3:A[x].fn.call(A[x].context,u,t);break;default:if(!z){for(w=1,z=new Array(y-1);w<y;w++){z[w-1]=arguments[w]}}A[x].fn.apply(A[x].context,z)}}}return true};p.prototype.on=function l(u,t,s){var v=new q(t,s||this),r=k?k+u:u;if(!this._events){this._events=k?{}:Object.create(null)}if(!this._events[r]){this._events[r]=v}else{if(!this._events[r].fn){this._events[r].push(v)}else{this._events[r]=[this._events[r],v]}}return this};p.prototype.once=function f(u,t,s){var v=new q(t,s||this,true),r=k?k+u:u;if(!this._events){this._events=k?{}:Object.create(null)}if(!this._events[r]){this._events[r]=v}else{if(!this._events[r].fn){this._events[r].push(v)}else{this._events[r]=[this._events[r],v]}}return this};p.prototype.removeListener=function j(r,x,t,s){var y=k?k+r:r;if(!this._events||!this._events[y]){return this}var w=this._events[y],z=[];if(x){if(w.fn){if(w.fn!==x||(s&&!w.once)||(t&&w.context!==t)){z.push(w)}}else{for(var v=0,u=w.length;v<u;v++){if(w[v].fn!==x||(s&&!w[v].once)||(t&&w[v].context!==t)){z.push(w[v])}}}}if(z.length){this._events[y]=z.length===1?z[0]:z}else{delete this._events[y]}return this};p.prototype.removeAllListeners=function o(r){if(!this._events){return this}if(r){delete this._events[k?k+r:r]}else{this._events=k?{}:Object.create(null)}return this};p.prototype.off=p.prototype.removeListener;p.prototype.addListener=p.prototype.on;p.prototype.setMaxListeners=function e(){return this};p.prefixed=k;g.exports=p},{}],12:[function(f,g,e){function h(i){if(i==null){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(i)}g.exports=Object.assign||function(n,m){var p;var l;var o=h(n);for(var k=1;k<arguments.length;k++){p=arguments[k];l=Object.keys(Object(p));for(var j=0;j<l.length;j++){o[l[j]]=p[l[j]]}}return o}},{}],13:[function(f,g,e){(function(h){
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){var m={};var y,t;y=this;if(y!=null){t=y.async}m.noConflict=function(){y.async=t;return m};function A(F){var G=false;return function(){if(G){throw new Error("Callback was already called.")}G=true;F.apply(y,arguments)}}var E=Object.prototype.toString;var p=Array.isArray||function(F){return E.call(F)==="[object Array]"};var B=function(F,H){if(F.forEach){return F.forEach(H)}for(var G=0;G<F.length;G+=1){H(F[G],G,F)}};var i=function(F,H){if(F.map){return F.map(H)}var G=[];B(F,function(I,K,J){G.push(H(I,K,J))});return G};var D=function(F,H,G){if(F.reduce){return F.reduce(H,G)}B(F,function(I,K,J){G=H(G,I,K,J)});return G};var k=function(H){if(Object.keys){return Object.keys(H)}var G=[];for(var F in H){if(H.hasOwnProperty(F)){G.push(F)}}return G};if(typeof h==="undefined"||!(h.nextTick)){if(typeof setImmediate==="function"){m.nextTick=function(F){setImmediate(F)};m.setImmediate=m.nextTick}else{m.nextTick=function(F){setTimeout(F,0)};m.setImmediate=m.nextTick}}else{m.nextTick=h.nextTick;if(typeof setImmediate!=="undefined"){m.setImmediate=function(F){setImmediate(F)}}else{m.setImmediate=m.nextTick}}m.each=function(F,I,J){J=J||function(){};if(!F.length){return J()}var H=0;B(F,function(K){I(K,A(G))});function G(K){if(K){J(K);J=function(){}}else{H+=1;if(H>=F.length){J()}}}};m.forEach=m.each;m.eachSeries=function(F,I,J){J=J||function(){};if(!F.length){return J()}var H=0;var G=function(){I(F[H],function(K){if(K){J(K);J=function(){}}else{H+=1;if(H>=F.length){J()}else{G()}}})};G()};m.forEachSeries=m.eachSeries;m.eachLimit=function(F,G,I,J){var H=o(G);H.apply(null,[F,I,J])};m.forEachLimit=m.eachLimit;var o=function(F){return function(G,K,M){M=M||function(){};if(!G.length||F<=0){return M()}var J=0;var H=0;var I=0;(function L(){if(J>=G.length){return M()}while(I<F&&H<G.length){H+=1;I+=1;K(G[H-1],function(N){if(N){M(N);M=function(){}}else{J+=1;I-=1;if(J>=G.length){M()}else{L()}}})}})()}};var z=function(F){return function(){var G=Array.prototype.slice.call(arguments);return F.apply(null,[m.each].concat(G))}};var x=function(F,G){return function(){var H=Array.prototype.slice.call(arguments);return G.apply(null,[o(F)].concat(H))}};var v=function(F){return function(){var G=Array.prototype.slice.call(arguments);return F.apply(null,[m.eachSeries].concat(G))}};var q=function(I,F,H,J){F=i(F,function(K,L){return{index:L,value:K}});if(!J){I(F,function(K,L){H(K.value,function(M){L(M)})})}else{var G=[];I(F,function(K,L){H(K.value,function(N,M){G[K.index]=M;L(N)})},function(K){J(K,G)})}};m.map=z(q);m.mapSeries=v(q);m.mapLimit=function(F,G,H,I){return l(G)(F,H,I)};var l=function(F){return x(F,q)};m.reduce=function(F,G,H,I){m.eachSeries(F,function(J,K){H(G,J,function(M,L){G=L;K(M)})},function(J){I(J,G)})};m.inject=m.reduce;m.foldl=m.reduce;m.reduceRight=function(F,G,H,J){var I=i(F,function(K){return K}).reverse();m.reduce(I,G,H,J)};m.foldr=m.reduceRight;var C=function(I,F,H,J){var G=[];F=i(F,function(K,L){return{index:L,value:K}});I(F,function(K,L){H(K.value,function(M){if(M){G.push(K)}L()})},function(K){J(i(G.sort(function(M,L){return M.index-L.index}),function(L){return L.value}))})};m.filter=z(C);m.filterSeries=v(C);m.select=m.filter;m.selectSeries=m.filterSeries;var u=function(I,F,H,J){var G=[];F=i(F,function(K,L){return{index:L,value:K}});I(F,function(K,L){H(K.value,function(M){if(!M){G.push(K)}L()})},function(K){J(i(G.sort(function(M,L){return M.index-L.index}),function(L){return L.value}))})};m.reject=z(u);m.rejectSeries=v(u);var n=function(H,F,G,I){H(F,function(J,K){G(J,function(L){if(L){I(J);I=function(){}}else{K()}})},function(J){I()})};m.detect=z(n);m.detectSeries=v(n);m.some=function(F,G,H){m.each(F,function(I,J){G(I,function(K){if(K){H(true);H=function(){}}J()})},function(I){H(false)})};m.any=m.some;m.every=function(F,G,H){m.each(F,function(I,J){G(I,function(K){if(!K){H(false);H=function(){}}J()})},function(I){H(true)})};m.all=m.every;m.sortBy=function(F,G,H){m.map(F,function(I,J){G(I,function(K,L){if(K){J(K)}else{J(null,{value:I,criteria:L})}})},function(K,I){if(K){return H(K)}else{var J=function(O,N){var M=O.criteria,L=N.criteria;return M<L?-1:M>L?1:0};H(null,i(I.sort(J),function(L){return L.value}))}})};m.auto=function(H,M){M=M||function(){};var N=k(H);var G=N.length;if(!G){return M()}var J={};var L=[];var F=function(O){L.unshift(O)};var I=function(P){for(var O=0;O<L.length;O+=1){if(L[O]===P){L.splice(O,1);return}}};var K=function(){G--;B(L.slice(0),function(O){O()})};F(function(){if(!G){var O=M;M=function(){};O(null,J)}});B(N,function(P){var O=p(H[P])?H[P]:[H[P]];var T=function(W){var U=Array.prototype.slice.call(arguments,1);if(U.length<=1){U=U[0]}if(W){var V={};B(k(J),function(X){V[X]=J[X]});V[P]=U;M(W,V);M=function(){}}else{J[P]=U;m.setImmediate(K)}};var R=O.slice(0,Math.abs(O.length-1))||[];var Q=function(){return D(R,function(V,U){return(V&&J.hasOwnProperty(U))},true)&&!J.hasOwnProperty(P)};if(Q()){O[O.length-1](T,J)}else{var S=function(){if(Q()){I(S);O[O.length-1](T,J)}};F(S)}})};m.retry=function(J,F,K){var H=5;var G=[];if(typeof J==="function"){K=F;F=J;J=H}J=parseInt(J,10)||H;var I=function(N,L){var M=function(O,P){return function(Q){O(function(S,R){Q(!S||P,{err:S,result:R})},L)}};while(J){G.push(M(F,!(J-=1)))}m.series(G,function(O,P){P=P[P.length-1];(N||K)(P.err,P.result)})};return K?I():I};m.waterfall=function(I,H){H=H||function(){};if(!p(I)){var F=new Error("First argument to waterfall must be an array of functions");return H(F)}if(!I.length){return H()}var G=function(J){return function(M){if(M){H.apply(null,arguments);H=function(){}}else{var K=Array.prototype.slice.call(arguments,1);var L=J.next();if(L){K.push(G(L))}else{K.push(H)}m.setImmediate(function(){J.apply(null,K)})}}};G(m.iterator(I))()};var j=function(G,I,H){H=H||function(){};if(p(I)){G.map(I,function(J,K){if(J){J(function(M){var L=Array.prototype.slice.call(arguments,1);if(L.length<=1){L=L[0]}K.call(null,M,L)})}},H)}else{var F={};G.each(k(I),function(J,K){I[J](function(M){var L=Array.prototype.slice.call(arguments,1);if(L.length<=1){L=L[0]}F[J]=L;K(M)})},function(J){H(J,F)})}};m.parallel=function(G,F){j({map:m.map,each:m.each},G,F)};m.parallelLimit=function(H,F,G){j({map:l(F),each:o(F)},H,G)};m.series=function(H,G){G=G||function(){};if(p(H)){m.mapSeries(H,function(I,J){if(I){I(function(L){var K=Array.prototype.slice.call(arguments,1);if(K.length<=1){K=K[0]}J.call(null,L,K)})}},G)}else{var F={};m.eachSeries(k(H),function(I,J){H[I](function(L){var K=Array.prototype.slice.call(arguments,1);if(K.length<=1){K=K[0]}F[I]=K;J(L)})},function(I){G(I,F)})}};m.iterator=function(G){var F=function(H){var I=function(){if(G.length){G[H].apply(null,arguments)}return I.next()};I.next=function(){return(H<G.length-1)?F(H+1):null};return I};return F(0)};m.apply=function(G){var F=Array.prototype.slice.call(arguments,1);return function(){return G.apply(null,F.concat(Array.prototype.slice.call(arguments)))}};var w=function(I,F,G,J){var H=[];I(F,function(L,K){G(L,function(M,N){H=H.concat(N||[]);K(M)})},function(K){J(K,H)})};m.concat=z(w);m.concatSeries=v(w);m.whilst=function(H,F,G){if(H()){F(function(I){if(I){return G(I)}m.whilst(H,F,G)})}else{G()}};m.doWhilst=function(F,H,G){F(function(J){if(J){return G(J)}var I=Array.prototype.slice.call(arguments,1);if(H.apply(null,I)){m.doWhilst(F,H,G)}else{G()}})};m.until=function(H,F,G){if(!H()){F(function(I){if(I){return G(I)}m.until(H,F,G)})}else{G()}};m.doUntil=function(F,H,G){F(function(J){if(J){return G(J)}var I=Array.prototype.slice.call(arguments,1);if(!H.apply(null,I)){m.doUntil(F,H,G)}else{G()}})};m.queue=function(J,H){if(H===undefined){H=1}function F(L,K,N,M){if(!L.started){L.started=true}if(!p(K)){K=[K]}if(K.length==0){return m.setImmediate(function(){if(L.drain){L.drain()}})}B(K,function(O){var P={data:O,callback:typeof M==="function"?M:null};if(N){L.tasks.unshift(P)}else{L.tasks.push(P)}if(L.saturated&&L.tasks.length===L.concurrency){L.saturated()}m.setImmediate(L.process)})}var G=0;var I={tasks:[],concurrency:H,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(K,L){F(I,K,false,L)},kill:function(){I.drain=null;I.tasks=[]},unshift:function(K,L){F(I,K,true,L)},process:function(){if(!I.paused&&G<I.concurrency&&I.tasks.length){var L=I.tasks.shift();if(I.empty&&I.tasks.length===0){I.empty()}G+=1;var M=function(){G-=1;if(L.callback){L.callback.apply(L,arguments)}if(I.drain&&I.tasks.length+G===0){I.drain()}I.process()};var K=A(M);J(L.data,K)}},length:function(){return I.tasks.length},running:function(){return G},idle:function(){return I.tasks.length+G===0},pause:function(){if(I.paused===true){return}I.paused=true;I.process()},resume:function(){if(I.paused===false){return}I.paused=false;I.process()}};return I};m.priorityQueue=function(K,I){function H(M,L){return M.priority-L.priority}function G(Q,O,P){var N=-1,L=Q.length-1;while(N<L){var M=N+((L-N+1)>>>1);if(P(O,Q[M])>=0){N=M}else{L=M-1}}return N}function F(N,M,L,O){if(!N.started){N.started=true}if(!p(M)){M=[M]}if(M.length==0){return m.setImmediate(function(){if(N.drain){N.drain()}})}B(M,function(P){var Q={data:P,priority:L,callback:typeof O==="function"?O:null};N.tasks.splice(G(N.tasks,Q,H)+1,0,Q);if(N.saturated&&N.tasks.length===N.concurrency){N.saturated()}m.setImmediate(N.process)})}var J=m.queue(K,I);J.push=function(M,L,N){F(J,M,L,N)};delete J.unshift;return J};m.cargo=function(J,I){var F=false,K=[];var G={tasks:K,payload:I,saturated:null,empty:null,drain:null,drained:true,push:function(L,M){if(!p(L)){L=[L]}B(L,function(N){K.push({data:N,callback:typeof M==="function"?M:null});G.drained=false;if(G.saturated&&K.length===I){G.saturated()}});m.setImmediate(G.process)},process:function H(){if(F){return}if(K.length===0){if(G.drain&&!G.drained){G.drain()}G.drained=true;return}var L=typeof I==="number"?K.splice(0,I):K.splice(0,K.length);var M=i(L,function(N){return N.data});if(G.empty){G.empty()}F=true;J(M,function(){F=false;var N=arguments;B(L,function(O){if(O.callback){O.callback.apply(null,N)}});H()})},length:function(){return K.length},running:function(){return F}};return G};var r=function(F){return function(H){var G=Array.prototype.slice.call(arguments,1);H.apply(null,G.concat([function(J){var I=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(J){if(console.error){console.error(J)}}else{if(console[F]){B(I,function(K){console[F](K)})}}}}]))}};m.log=r("log");m.dir=r("dir");m.memoize=function(J,H){var G={};var I={};H=H||function(K){return K};var F=function(){var K=Array.prototype.slice.call(arguments);var M=K.pop();var L=H.apply(null,K);if(L in G){m.nextTick(function(){M.apply(null,G[L])})}else{if(L in I){I[L].push(M)}else{I[L]=[M];J.apply(null,K.concat([function(){G[L]=arguments;var P=I[L];delete I[L];for(var O=0,N=P.length;O<N;O++){P[O].apply(null,arguments)}}]))}}};F.memo=G;F.unmemoized=J;return F};m.unmemoize=function(F){return function(){return(F.unmemoized||F).apply(null,arguments)}};m.times=function(I,H,J){var F=[];for(var G=0;G<I;G++){F.push(G)}return m.map(F,H,J)};m.timesSeries=function(I,H,J){var F=[];for(var G=0;G<I;G++){F.push(G)}return m.mapSeries(F,H,J)};m.seq=function(){var F=arguments;return function(){var H=this;var G=Array.prototype.slice.call(arguments);var I=G.pop();m.reduce(F,G,function(K,L,J){L.apply(H,K.concat([function(){var N=arguments[0];var M=Array.prototype.slice.call(arguments,1);J(N,M)}]))},function(K,J){I.apply(H,[K].concat(J))})}};m.compose=function(){return m.seq.apply(null,Array.prototype.reverse.call(arguments))};var s=function(I,G){var H=function(){var K=this;var J=Array.prototype.slice.call(arguments);var L=J.pop();return I(G,function(N,M){N.apply(K,J.concat([M]))},L)};if(arguments.length>2){var F=Array.prototype.slice.call(arguments,2);return H.apply(this,F)}else{return H}};m.applyEach=z(s);m.applyEachSeries=v(s);m.forever=function(G,H){function F(I){if(I){if(H){return H(I)}throw I}G(F)}F()};if(typeof g!=="undefined"&&g.exports){g.exports=m}else{if(typeof d!=="undefined"&&d.amd){d([],function(){return m})}else{y.async=m}}}())}).call(this,f("_process"))},{_process:4}],14:[function(f,g,e){arguments[4][11][0].apply(e,arguments)},{dup:11}],15:[function(g,h,e){var i=g("async"),f=g("url"),k=g("./Resource"),j=g("eventemitter3");function l(n,m){j.call(this);m=m||10;this.baseUrl=n||"";this.progress=0;this.loading=false;this._progressChunk=0;this._beforeMiddleware=[];this._afterMiddleware=[];this._boundLoadResource=this._loadResource.bind(this);this._boundOnLoad=this._onLoad.bind(this);this._buffer=[];this._numToLoad=0;this._queue=i.queue(this._boundLoadResource,m);this.resources={}}l.prototype=Object.create(j.prototype);l.prototype.constructor=l;h.exports=l;l.prototype.add=l.prototype.enqueue=function(p,o,n,m){if(Array.isArray(p)){for(var q=0;q<p.length;++q){this.add(p[q])}return this}if(typeof p==="object"){m=o||p.callback||p.onComplete;n=p;o=p.url;p=p.name||p.key||p.url}if(typeof o!=="string"){m=n;n=o;o=p}if(typeof o!=="string"){throw new Error("No url passed to add resource to loader.")}if(typeof n==="function"){m=n;n=null}if(this.resources[p]){throw new Error('Resource with name "'+p+'" already exists.')}o=this._handleBaseUrl(o);this.resources[p]=new k(p,o,n);if(typeof m==="function"){this.resources[p].once("afterMiddleware",m)}this._numToLoad++;if(this._queue.started){this._queue.push(this.resources[p]);this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())}else{this._buffer.push(this.resources[p]);this._progressChunk=100/this._buffer.length}return this};l.prototype._handleBaseUrl=function(m){var n=f.parse(m);if(n.protocol||n.pathname.indexOf("//")===0){return m}if(this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&m.lastIndexOf("/")!==m.length-1){return this.baseUrl+"/"+m}else{return this.baseUrl+m}};l.prototype.before=l.prototype.pre=function(m){this._beforeMiddleware.push(m);return this};l.prototype.after=l.prototype.use=function(m){this._afterMiddleware.push(m);return this};l.prototype.reset=function(){this.progress=0;this.loading=false;this._progressChunk=0;this._buffer.length=0;this._numToLoad=0;this._queue.kill();this._queue.started=false;this.resources={}};l.prototype.load=function(m){if(typeof m==="function"){this.once("complete",m)}if(this._queue.started){return this}this.emit("start",this);for(var n=0;n<this._buffer.length;++n){this._queue.push(this._buffer[n])}this._buffer.length=0;return this};l.prototype._loadResource=function(o,n){var m=this;o._dequeue=n;this._runMiddleware(o,this._beforeMiddleware,function(){o.load(m._boundOnLoad)})};l.prototype._onComplete=function(){this.emit("complete",this,this.resources)};l.prototype._onLoad=function(m){this.progress+=this._progressChunk;this.emit("progress",this,m);if(m.error){this.emit("error",m.error,this,m)}else{this.emit("load",this,m)}this._runMiddleware(m,this._afterMiddleware,function(){m.emit("afterMiddleware",m);this._numToLoad--;if(this._numToLoad===0){this._onComplete()}});m._dequeue()};l.prototype._runMiddleware=function(p,o,m){var n=this;i.eachSeries(o,function(r,q){r.call(n,p,q)},m.bind(this,p))};l.LOAD_TYPE=k.LOAD_TYPE;l.XHR_READY_STATE=k.XHR_READY_STATE;l.XHR_RESPONSE_TYPE=k.XHR_RESPONSE_TYPE},{"./Resource":16,async:13,eventemitter3:14,url:9}],16:[function(j,g,l){var n=j("eventemitter3"),k=j("url"),m=!!(window.XDomainRequest&&!("withCredentials" in (new XMLHttpRequest()))),i=null;function f(q,p,o){n.call(this);o=o||{};if(typeof q!=="string"||typeof p!=="string"){throw new Error("Both name and url are required for constructing a resource.")}this.name=q;this.url=p;this.isDataUrl=this.url.indexOf("data:")===0;this.data=null;this.crossOrigin=o.crossOrigin===true?"anonymous":null;this.loadType=o.loadType||this._determineLoadType();this.xhrType=o.xhrType;this.error=null;this.xhr=null;this.isJson=false;this.isXml=false;this.isImage=false;this.isAudio=false;this.isVideo=false;this._dequeue=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}f.prototype=Object.create(n.prototype);f.prototype.constructor=f;g.exports=f;f.prototype.complete=function(){if(this.data&&this.data.removeEventListener){this.data.removeEventListener("error",this._boundOnError);this.data.removeEventListener("load",this._boundComplete);this.data.removeEventListener("progress",this._boundOnProgress);this.data.removeEventListener("canplaythrough",this._boundComplete)}if(this.xhr){if(this.xhr.removeEventListener){this.xhr.removeEventListener("error",this._boundXhrOnError);this.xhr.removeEventListener("abort",this._boundXhrOnAbort);this.xhr.removeEventListener("progress",this._boundOnProgress);this.xhr.removeEventListener("load",this._boundXhrOnLoad)}else{this.xhr.onerror=null;this.xhr.ontimeout=null;this.xhr.onprogress=null;this.xhr.onload=null}}this.emit("complete",this)};f.prototype.load=function(o){this.emit("start",this);if(o){this.once("complete",o)}if(typeof this.crossOrigin!=="string"){this.crossOrigin=this._determineCrossOrigin(this.url)}switch(this.loadType){case f.LOAD_TYPE.IMAGE:this._loadImage();break;case f.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case f.LOAD_TYPE.VIDEO:this._loadElement("video");break;case f.LOAD_TYPE.XHR:default:if(m&&this.crossOrigin){this._loadXdr()}else{this._loadXhr()}break}};f.prototype._loadImage=function(){this.data=new Image();if(this.crossOrigin){this.data.crossOrigin=this.crossOrigin}this.data.src=this.url;this.isImage=true;this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false)};f.prototype._loadElement=function(p){this.data=document.createElement(p);if(Array.isArray(this.url)){for(var o=0;o<this.url.length;++o){this.data.appendChild(this._createSource(p,this.url[o]))}}else{this.data.appendChild(this._createSource(p,this.url))}this["is"+p[0].toUpperCase()+p.substring(1)]=true;this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false);this.data.addEventListener("canplaythrough",this._boundComplete,false);this.data.load()};f.prototype._loadXhr=function(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var o=this.xhr=new XMLHttpRequest();o.open("GET",this.url,true);if(this.xhrType===f.XHR_RESPONSE_TYPE.JSON||this.xhrType===f.XHR_RESPONSE_TYPE.DOCUMENT){o.responseType=f.XHR_RESPONSE_TYPE.TEXT}else{o.responseType=this.xhrType}o.addEventListener("error",this._boundXhrOnError,false);o.addEventListener("abort",this._boundXhrOnAbort,false);o.addEventListener("progress",this._boundOnProgress,false);o.addEventListener("load",this._boundXhrOnLoad,false);o.send()};f.prototype._loadXdr=function(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var o=this.xhr=new XDomainRequest();o.timeout=5000;o.onerror=this._boundXhrOnError;o.ontimeout=this._boundXdrOnTimeout;o.onprogress=this._boundOnProgress;o.onload=this._boundXhrOnLoad;o.open("GET",this.url,true);setTimeout(function(){o.send()},0)};f.prototype._createSource=function(p,o,r){if(!r){r=p+"/"+o.substr(o.lastIndexOf(".")+1)}var q=document.createElement("source");q.src=o;q.type=r;return q};f.prototype._onError=function(o){this.error=new Error("Failed to load element using "+o.target.nodeName);this.complete()};f.prototype._onProgress=function(o){if(o&&o.lengthComputable){this.emit("progress",this,o.loaded/o.total)}};f.prototype._xhrOnError=function(){this.error=new Error(e(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"');this.complete()};f.prototype._xhrOnAbort=function(){this.error=new Error(e(this.xhr)+" Request was aborted by the user.");this.complete()};f.prototype._xdrOnTimeout=function(){this.error=new Error(e(this.xhr)+" Request timed out.");this.complete()};f.prototype._xhrOnLoad=function(){var q=this.xhr,o=q.status!==undefined?q.status:200;if(o===200||o===204||(o===0&&q.responseText.length>0)){if(this.xhrType===f.XHR_RESPONSE_TYPE.TEXT){this.data=q.responseText}else{if(this.xhrType===f.XHR_RESPONSE_TYPE.JSON){try{this.data=JSON.parse(q.responseText);this.isJson=true}catch(p){this.error=new Error("Error trying to parse loaded json:",p)}}else{if(this.xhrType===f.XHR_RESPONSE_TYPE.DOCUMENT){try{if(window.DOMParser){var s=new DOMParser();this.data=s.parseFromString(q.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=q.responseText;this.data=r}this.isXml=true}catch(p){this.error=new Error("Error trying to parse loaded xml:",p)}}else{this.data=q.response||q.responseText}}}}else{this.error=new Error("["+q.status+"]"+q.statusText+":"+q.responseURL)}this.complete()};function e(o){return o.toString().replace("object ","")}f.prototype._determineCrossOrigin=function(p,q){if(p.indexOf("data:")===0){return""}q=q||window.location;if(!i){i=document.createElement("a")}i.href=p;p=k.parse(i.href);var o=(!p.port&&q.port==="")||(p.port===q.port);if(p.hostname!==q.hostname||!o||p.protocol!==q.protocol){return"anonymous"}return""};f.prototype._determineXhrType=function(){return f._xhrTypeMap[this._getExtension()]||f.XHR_RESPONSE_TYPE.TEXT};f.prototype._determineLoadType=function(){return f._loadTypeMap[this._getExtension()]||f.LOAD_TYPE.XHR};f.prototype._getExtension=function(){var o=this.url,p;if(this.isDataUrl){var r=o.indexOf("/");p=o.substring(r+1,o.indexOf(";",r))}else{var q=o.indexOf("?");if(q!==-1){o=o.substring(0,q)}p=o.substring(o.lastIndexOf(".")+1)}return p};f.prototype._getMimeFromXhrType=function(o){switch(o){case f.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case f.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case f.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case f.XHR_RESPONSE_TYPE.JSON:return"application/json";case f.XHR_RESPONSE_TYPE.DEFAULT:case f.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}};f.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};f.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};f.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};f._loadTypeMap={gif:f.LOAD_TYPE.IMAGE,png:f.LOAD_TYPE.IMAGE,bmp:f.LOAD_TYPE.IMAGE,jpg:f.LOAD_TYPE.IMAGE,jpeg:f.LOAD_TYPE.IMAGE,tif:f.LOAD_TYPE.IMAGE,tiff:f.LOAD_TYPE.IMAGE,webp:f.LOAD_TYPE.IMAGE,tga:f.LOAD_TYPE.IMAGE};f._xhrTypeMap={xhtml:f.XHR_RESPONSE_TYPE.DOCUMENT,html:f.XHR_RESPONSE_TYPE.DOCUMENT,htm:f.XHR_RESPONSE_TYPE.DOCUMENT,xml:f.XHR_RESPONSE_TYPE.DOCUMENT,tmx:f.XHR_RESPONSE_TYPE.DOCUMENT,tsx:f.XHR_RESPONSE_TYPE.DOCUMENT,svg:f.XHR_RESPONSE_TYPE.DOCUMENT,gif:f.XHR_RESPONSE_TYPE.BLOB,png:f.XHR_RESPONSE_TYPE.BLOB,bmp:f.XHR_RESPONSE_TYPE.BLOB,jpg:f.XHR_RESPONSE_TYPE.BLOB,jpeg:f.XHR_RESPONSE_TYPE.BLOB,tif:f.XHR_RESPONSE_TYPE.BLOB,tiff:f.XHR_RESPONSE_TYPE.BLOB,webp:f.XHR_RESPONSE_TYPE.BLOB,tga:f.XHR_RESPONSE_TYPE.BLOB,json:f.XHR_RESPONSE_TYPE.JSON,text:f.XHR_RESPONSE_TYPE.TEXT,txt:f.XHR_RESPONSE_TYPE.TEXT};f.setExtensionLoadType=function(p,o){h(f._loadTypeMap,p,o)};f.setExtensionXhrType=function(p,o){h(f._xhrTypeMap,p,o)};function h(o,q,p){if(q&&q.indexOf(".")===0){q=q.substring(1)}if(!q){return}o[q]=p}},{eventemitter3:14,url:9}],17:[function(f,g,e){g.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(j){var i="";var n;var h=new Array(4);var m=0;var k=0;var l=0;while(m<j.length){n=new Array(3);for(k=0;k<n.length;k++){if(m<j.length){n[k]=j.charCodeAt(m++)&255}else{n[k]=0}}h[0]=n[0]>>2;h[1]=((n[0]&3)<<4)|(n[1]>>4);h[2]=((n[1]&15)<<2)|(n[2]>>6);h[3]=n[2]&63;l=m-(j.length-1);switch(l){case 2:h[3]=64;h[2]=64;break;case 1:h[3]=64;break;default:break}for(k=0;k<h.length;k++){i+=this._keyStr.charAt(h[k])}}return i}}},{}],18:[function(f,g,e){g.exports=f("./Loader");g.exports.Resource=f("./Resource");g.exports.middleware={caching:{memory:f("./middlewares/caching/memory")},parsing:{blob:f("./middlewares/parsing/blob")}}},{"./Loader":15,"./Resource":16,"./middlewares/caching/memory":19,"./middlewares/parsing/blob":20}],19:[function(g,h,f){var e={};h.exports=function(){return function(j,i){if(e[j.url]){j.data=e[j.url];j.complete()}else{j.once("complete",function(){e[this.url]=this.data});i()}}}},{}],20:[function(f,h,e){var i=f("../../Resource"),g=f("../../b64");window.URL=window.URL||window.webkitURL;h.exports=function(){return function(l,k){if(!l.data){return k()}if(l.xhr&&l.xhrType===i.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof l.data==="string"){var j=l.xhr.getResponseHeader("content-type");if(j&&j.indexOf("image")===0){l.data=new Image();l.data.src="data:"+j+";base64,"+g.encodeBinary(l.xhr.responseText);l.isImage=true;l.data.onload=function(){l.data.onload=null;k()}}}else{if(l.data.type.indexOf("image")===0){var m=URL.createObjectURL(l.data);l.blob=l.data;l.data=new Image();l.data.src=m;l.isImage=true;l.data.onload=function(){URL.revokeObjectURL(m);l.data.onload=null;k()}}}}else{k()}}}},{"../../Resource":16,"../../b64":17}],21:[function(f,g,e){g.exports={name:"pixi.js",version:"3.0.7",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/GoodBoyDigital/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/GoodBoyDigital/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:["bin/","src/"],dependencies:{async:"^0.9.0",brfs:"^1.4.0",earcut:"^2.0.1",eventemitter3:"^1.1.0","object-assign":"^2.0.0","resource-loader":"^1.6.1"},devDependencies:{browserify:"^10.2.3",chai:"^3.0.0",del:"^1.2.0",gulp:"^3.9.0","gulp-cached":"^1.1.0","gulp-concat":"^2.5.2","gulp-debug":"^2.0.1","gulp-jshint":"^1.11.0","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.2.0","gulp-util":"^3.0.5","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.0","jshint-summary":"^0.4.0",minimist:"^1.1.1",mocha:"^2.2.5","require-dir":"^0.3.0","run-sequence":"^1.1.0",testem:"^0.8.3","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.2.1"},browserify:{transform:["brfs"]}}},{}],22:[function(g,h,f){var e={VERSION:g("../../package.json").version,PI_2:Math.PI*2,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:0.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:false,forceFXAA:false,autoResize:false,transparent:false,backgroundColor:0,clearBeforeRender:true,preserveDrawingBuffer:false},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2000};h.exports=e},{"../../package.json":21}],23:[function(i,j,h){var k=i("../math"),g=i("./DisplayObject"),l=i("../textures/RenderTexture"),f=new k.Matrix();function e(){g.call(this);this.children=[]}e.prototype=Object.create(g.prototype);e.prototype.constructor=e;j.exports=e;Object.defineProperties(e.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(n){var m=this.getLocalBounds().width;if(m!==0){this.scale.x=n/m}else{this.scale.x=1}this._width=n}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(n){var m=this.getLocalBounds().height;if(m!==0){this.scale.y=n/m}else{this.scale.y=1}this._height=n}}});e.prototype.addChild=function(m){return this.addChildAt(m,this.children.length)};e.prototype.addChildAt=function(n,m){if(n===this){return n}if(m>=0&&m<=this.children.length){if(n.parent){n.parent.removeChild(n)}n.parent=this;this.children.splice(m,0,n);n.emit("added",this);return n}else{throw new Error(n+"addChildAt: The index "+m+" supplied is out of bounds "+this.children.length)}};e.prototype.swapChildren=function(p,m){if(p===m){return}var o=this.getChildIndex(p);var n=this.getChildIndex(m);if(o<0||n<0){throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.")}this.children[o]=m;this.children[n]=p};e.prototype.getChildIndex=function(n){var m=this.children.indexOf(n);if(m===-1){throw new Error("The supplied DisplayObject must be a child of the caller")}return m};e.prototype.setChildIndex=function(o,n){if(n<0||n>=this.children.length){throw new Error("The supplied index is out of bounds")}var m=this.getChildIndex(o);this.children.splice(m,1);this.children.splice(n,0,o)};e.prototype.getChildAt=function(m){if(m<0||m>=this.children.length){throw new Error("getChildAt: Supplied index "+m+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller")}return this.children[m]};e.prototype.removeChild=function(n){var m=this.children.indexOf(n);if(m===-1){return}return this.removeChildAt(m)};e.prototype.removeChildAt=function(m){var n=this.getChildAt(m);n.parent=null;this.children.splice(m,1);n.emit("removed",this);return n};e.prototype.removeChildren=function(q,r){var p=q||0;var m=typeof r==="number"?r:this.children.length;var n=m-p;if(n>0&&n<=m){var s=this.children.splice(p,n);for(var o=0;o<s.length;++o){s[o].parent=null}return s}else{if(n===0&&this.children.length===0){return[]}else{throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}}};e.prototype.generateTexture=function(q,n,o){var p=this.getLocalBounds();var m=new l(q,p.width|0,p.height|0,o,n);f.tx=-p.x;f.ty=-p.y;m.render(this,f);return m};e.prototype.updateTransform=function(){if(!this.visible){return}this.displayObjectUpdateTransform();for(var n=0,m=this.children.length;n<m;++n){this.children[n].updateTransform()}};e.prototype.containerUpdateTransform=e.prototype.updateTransform;e.prototype.getBounds=function(){if(!this._currentBounds){if(this.children.length===0){return k.Rectangle.EMPTY}var s=Infinity;var r=Infinity;var o=-Infinity;var n=-Infinity;var t;var x;var w;var p=false;for(var v=0,u=this.children.length;v<u;++v){var q=this.children[v];if(!q.visible){continue}p=true;t=this.children[v].getBounds();s=s<t.x?s:t.x;r=r<t.y?r:t.y;x=t.width+t.x;w=t.height+t.y;o=o>x?o:x;n=n>w?n:w}if(!p){return k.Rectangle.EMPTY}var m=this._bounds;m.x=s;m.y=r;m.width=o-s;m.height=n-r;this._currentBounds=m}return this._currentBounds};e.prototype.containerGetBounds=e.prototype.getBounds;e.prototype.getLocalBounds=function(){var m=this.worldTransform;this.worldTransform=k.Matrix.IDENTITY;for(var o=0,n=this.children.length;o<n;++o){this.children[o].updateTransform()}this.worldTransform=m;this._currentBounds=null;return this.getBounds(k.Matrix.IDENTITY)};e.prototype.renderWebGL=function(o){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}var n,m;if(this._mask||this._filters){o.currentRenderer.flush();if(this._filters){o.filterManager.pushFilter(this,this._filters)}if(this._mask){o.maskManager.pushMask(this,this._mask)}o.currentRenderer.start();this._renderWebGL(o);for(n=0,m=this.children.length;n<m;n++){this.children[n].renderWebGL(o)}o.currentRenderer.flush();if(this._mask){o.maskManager.popMask(this,this._mask)}if(this._filters){o.filterManager.popFilter()}o.currentRenderer.start()}else{this._renderWebGL(o);for(n=0,m=this.children.length;n<m;++n){this.children[n].renderWebGL(o)}}};e.prototype._renderWebGL=function(m){};e.prototype._renderCanvas=function(m){};e.prototype.renderCanvas=function(o){if(!this.visible||this.alpha<=0||!this.renderable){return}if(this._mask){o.maskManager.pushMask(this._mask,o)}this._renderCanvas(o);for(var n=0,m=this.children.length;n<m;++n){this.children[n].renderCanvas(o)}if(this._mask){o.maskManager.popMask(o)}};e.prototype.destroy=function(o){g.prototype.destroy.call(this);if(o){for(var n=0,m=this.children.length;n<m;++n){this.children[n].destroy(o)}}this.removeChildren();this.children=null}},{"../math":32,"../textures/RenderTexture":70,"./DisplayObject":24}],24:[function(f,e,g){var k=f("../math"),i=f("../textures/RenderTexture"),l=f("eventemitter3"),m=f("../const"),j=new k.Matrix();function h(){l.call(this);this.position=new k.Point();this.scale=new k.Point(1,1);this.pivot=new k.Point(0,0);this.rotation=0;this.alpha=1;this.visible=true;this.renderable=true;this.parent=null;this.worldAlpha=1;this.worldTransform=new k.Matrix();this.filterArea=null;this._sr=0;this._cr=1;this._bounds=new k.Rectangle(0,0,1,1);this._currentBounds=null;this._mask=null;this._cacheAsBitmap=false;this._cachedObject=null}h.prototype=Object.create(l.prototype);h.prototype.constructor=h;e.exports=h;Object.defineProperties(h.prototype,{x:{get:function(){return this.position.x},set:function(n){this.position.x=n}},y:{get:function(){return this.position.y},set:function(n){this.position.y=n}},worldVisible:{get:function(){var n=this;do{if(!n.visible){return false}n=n.parent}while(n);return true}},mask:{get:function(){return this._mask},set:function(n){if(this._mask){this._mask.renderable=true}this._mask=n;if(this._mask){this._mask.renderable=false}}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(n){this._filters=n&&n.slice()}}});h.prototype.updateTransform=function(){var s=this.parent.worldTransform;var p=this.worldTransform;var r,o,u,t,q,n;if(this.rotation%m.PI_2){if(this.rotation!==this.rotationCache){this.rotationCache=this.rotation;this._sr=Math.sin(this.rotation);this._cr=Math.cos(this.rotation)}r=this._cr*this.scale.x;o=this._sr*this.scale.x;u=-this._sr*this.scale.y;t=this._cr*this.scale.y;q=this.position.x;n=this.position.y;if(this.pivot.x||this.pivot.y){q-=this.pivot.x*r+this.pivot.y*u;n-=this.pivot.x*o+this.pivot.y*t}p.a=r*s.a+o*s.c;p.b=r*s.b+o*s.d;p.c=u*s.a+t*s.c;p.d=u*s.b+t*s.d;p.tx=q*s.a+n*s.c+s.tx;p.ty=q*s.b+n*s.d+s.ty}else{r=this.scale.x;t=this.scale.y;q=this.position.x-this.pivot.x*r;n=this.position.y-this.pivot.y*t;p.a=r*s.a;p.b=r*s.b;p.c=t*s.c;p.d=t*s.d;p.tx=q*s.a+n*s.c+s.tx;p.ty=q*s.b+n*s.d+s.ty}this.worldAlpha=this.alpha*this.parent.worldAlpha;this._currentBounds=null};h.prototype.displayObjectUpdateTransform=h.prototype.updateTransform;h.prototype.getBounds=function(n){return k.Rectangle.EMPTY};h.prototype.getLocalBounds=function(){return this.getBounds(k.Matrix.IDENTITY)};h.prototype.toGlobal=function(n){this.displayObjectUpdateTransform();return this.worldTransform.apply(n)};h.prototype.toLocal=function(n,o){if(o){n=o.toGlobal(n)}this.displayObjectUpdateTransform();return this.worldTransform.applyInverse(n)};h.prototype.renderWebGL=function(n){};h.prototype.renderCanvas=function(n){};h.prototype.generateTexture=function(r,p,o){var q=this.getLocalBounds();var n=new i(r,q.width|0,q.height|0,p,o);j.tx=-q.x;j.ty=-q.y;n.render(this,j);return n};h.prototype.destroy=function(){this.position=null;this.scale=null;this.pivot=null;this.parent=null;this._bounds=null;this._currentBounds=null;this._mask=null;this.worldTransform=null;this.filterArea=null}},{"../const":22,"../math":32,"../textures/RenderTexture":70,eventemitter3:11}],25:[function(g,f,j){var h=g("../display/Container"),i=g("../textures/Texture"),l=g("../renderers/canvas/utils/CanvasBuffer"),o=g("../renderers/canvas/utils/CanvasGraphics"),m=g("./GraphicsData"),n=g("../math"),p=g("../const"),e=new n.Point();function k(){h.call(this);this.fillAlpha=1;this.lineWidth=0;this.lineColor=0;this.graphicsData=[];this.tint=16777215;this._prevTint=16777215;this.blendMode=p.BLEND_MODES.NORMAL;this.currentPath=null;this._webGL={};this.isMask=false;this.boundsPadding=0;this._localBounds=new n.Rectangle(0,0,1,1);this.dirty=true;this.glDirty=false;this.boundsDirty=true;this.cachedSpriteDirty=false}k.prototype=Object.create(h.prototype);k.prototype.constructor=k;f.exports=k;Object.defineProperties(k.prototype,{});k.prototype.clone=function(){var r=new k();r.renderable=this.renderable;r.fillAlpha=this.fillAlpha;r.lineWidth=this.lineWidth;r.lineColor=this.lineColor;r.tint=this.tint;r.blendMode=this.blendMode;r.isMask=this.isMask;r.boundsPadding=this.boundsPadding;r.dirty=this.dirty;r.glDirty=this.glDirty;r.cachedSpriteDirty=this.cachedSpriteDirty;for(var q=0;q<this.graphicsData.length;++q){r.graphicsData.push(this.graphicsData[q].clone())}r.currentPath=r.graphicsData[r.graphicsData.length-1];r.updateLocalBounds();return r};k.prototype.lineStyle=function(q,r,s){this.lineWidth=q||0;this.lineColor=r||0;this.lineAlpha=(s===undefined)?1:s;if(this.currentPath){if(this.currentPath.shape.points.length){this.drawShape(new n.Polygon(this.currentPath.shape.points.slice(-2)))}else{this.currentPath.lineWidth=this.lineWidth;this.currentPath.lineColor=this.lineColor;this.currentPath.lineAlpha=this.lineAlpha}}return this};k.prototype.moveTo=function(q,r){this.drawShape(new n.Polygon([q,r]));return this};k.prototype.lineTo=function(q,r){this.currentPath.shape.points.push(q,r);this.dirty=true;return this};k.prototype.quadraticCurveTo=function(y,u,A,x){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var q,v,r=20,B=this.currentPath.shape.points;if(B.length===0){this.moveTo(0,0)}var z=B[B.length-2];var w=B[B.length-1];var s=0;for(var t=1;t<=r;++t){s=t/r;q=z+((y-z)*s);v=w+((u-w)*s);B.push(q+(((y+((A-y)*s))-q)*s),v+(((u+((x-u)*s))-v)*s))}this.dirty=this.boundsDirty=true;return this};k.prototype.bezierCurveTo=function(D,z,C,v,F,B){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var t=20,r,s,q,y,x,G=this.currentPath.shape.points;var E=G[G.length-2];var A=G[G.length-1];var u=0;for(var w=1;w<=t;++w){u=w/t;r=(1-u);s=r*r;q=s*r;y=u*u;x=y*u;G.push(q*E+3*s*u*D+3*r*y*C+x*F,q*A+3*s*u*z+3*r*y*v+x*B)}this.dirty=this.boundsDirty=true;return this};k.prototype.arcTo=function(M,w,L,u,x){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points.push(M,w)}}else{this.moveTo(M,w)}var J=this.currentPath.shape.points,E=J[J.length-2],C=J[J.length-1],R=C-w,z=E-M,Q=u-w,y=L-M,K=Math.abs(R*y-z*Q);if(K<1e-8||x===0){if(J[J.length-2]!==M||J[J.length-1]!==w){J.push(M,w)}}else{var P=R*R+z*z,G=Q*Q+y*y,r=R*Q+z*y,B=x*Math.sqrt(P)/K,A=x*Math.sqrt(G)/K,s=B*r/P,q=A*r/G,v=B*y+A*z,t=B*Q+A*R,F=z*(A+s),D=R*(A+s),O=y*(B+q),N=Q*(B+q),I=Math.atan2(D-t,F-v),H=Math.atan2(N-t,O-v);this.arc(v+M,t+w,x,I,H,z*Q>y*R)}this.dirty=this.boundsDirty=true;return this};k.prototype.arc=function(t,r,u,E,C,q){q=q||false;if(E===C){return this}if(!q&&C<=E){C+=Math.PI*2}else{if(q&&E<=C){E+=Math.PI*2}}var y=q?(E-C)*-1:(C-E);var B=Math.ceil(Math.abs(y)/(Math.PI*2))*40;if(y===0){return this}var K=t+Math.cos(E)*u;var I=r+Math.sin(E)*u;if(this.currentPath){if(q&&this.filling){this.currentPath.shape.points.push(t,r)}else{this.currentPath.shape.points.push(K,I)}}else{if(q&&this.filling){this.moveTo(t,r)}else{this.moveTo(K,I)}}var H=this.currentPath.shape.points;var v=y/(B*2);var A=v*2;var D=Math.cos(v);var F=Math.sin(v);var M=B-1;var w=(M%1)/M;for(var G=0;G<=M;G++){var z=G+w*G;var J=((v)+E+(A*z));var L=Math.cos(J);var x=-Math.sin(J);H.push(((D*L)+(F*x))*u+t,((D*-x)+(F*L))*u+r)}this.dirty=this.boundsDirty=true;return this};k.prototype.beginFill=function(q,r){this.filling=true;this.fillColor=q||0;this.fillAlpha=(r===undefined)?1:r;if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.currentPath.fill=this.filling;this.currentPath.fillColor=this.fillColor;this.currentPath.fillAlpha=this.fillAlpha}}return this};k.prototype.endFill=function(){this.filling=false;this.fillColor=null;this.fillAlpha=1;return this};k.prototype.drawRect=function(r,t,s,q){this.drawShape(new n.Rectangle(r,t,s,q));return this};k.prototype.drawRoundedRect=function(s,u,t,r,q){this.drawShape(new n.RoundedRectangle(s,u,t,r,q));return this};k.prototype.drawCircle=function(r,s,q){this.drawShape(new n.Circle(r,s,q));return this};k.prototype.drawEllipse=function(r,t,s,q){this.drawShape(new n.Ellipse(r,t,s,q));return this};k.prototype.drawPolygon=function(s){var r=s;if(!Array.isArray(r)){r=new Array(arguments.length);for(var q=0;q<r.length;++q){r[q]=arguments[q]}}this.drawShape(new n.Polygon(r));return this};k.prototype.clear=function(){this.lineWidth=0;this.filling=false;this.dirty=true;this.clearDirty=true;this.graphicsData=[];return this};k.prototype.generateTexture=function(v,q,s){q=q||1;var u=this.getLocalBounds();var r=new l(u.width*q,u.height*q);var t=i.fromCanvas(r.canvas,s);t.baseTexture.resolution=q;r.context.scale(q,q);r.context.translate(-u.x,-u.y);o.renderGraphics(this,r.context);return t};k.prototype._renderWebGL=function(q){if(this.glDirty){this.dirty=true;this.glDirty=false}q.setObjectRenderer(q.plugins.graphics);q.plugins.graphics.render(this)};k.prototype._renderCanvas=function(t){if(this.isMask===true){return}if(this._prevTint!==this.tint){this.dirty=true;this._prevTint=this.tint}var s=t.context;var r=this.worldTransform;if(this.blendMode!==t.currentBlendMode){t.currentBlendMode=this.blendMode;s.globalCompositeOperation=t.blendModes[t.currentBlendMode]}var q=t.resolution;s.setTransform(r.a*q,r.b*q,r.c*q,r.d*q,r.tx*q,r.ty*q);o.renderGraphics(this,s)};k.prototype.getBounds=function(B){if(!this._currentBounds){if(!this.renderable){return n.Rectangle.EMPTY}if(this.boundsDirty){this.updateLocalBounds();this.glDirty=true;this.cachedSpriteDirty=true;this.boundsDirty=false}var u=this._localBounds;var y=u.x;var x=u.width+u.x;var w=u.y;var v=u.height+u.y;var z=B||this.worldTransform;var N=z.a;var L=z.b;var K=z.c;var I=z.d;var O=z.tx;var M=z.ty;var E=N*x+K*v+O;var t=I*v+L*x+M;var D=N*y+K*v+O;var s=I*v+L*y+M;var C=N*y+K*w+O;var r=I*w+L*y+M;var A=N*x+K*w+O;var q=I*w+L*x+M;var H=E;var F=t;var J=E;var G=t;J=D<J?D:J;J=C<J?C:J;J=A<J?A:J;G=s<G?s:G;G=r<G?r:G;G=q<G?q:G;H=D>H?D:H;H=C>H?C:H;H=A>H?A:H;F=s>F?s:F;F=r>F?r:F;F=q>F?q:F;this._bounds.x=J;this._bounds.width=H-J;this._bounds.y=G;this._bounds.height=F-G;this._currentBounds=this._bounds}return this._currentBounds};k.prototype.containsPoint=function(q){this.worldTransform.applyInverse(q,e);var t=this.graphicsData;for(var r=0;r<t.length;r++){var s=t[r];if(!s.fill){continue}if(s.shape){if(s.shape.contains(e.x,e.y)){return true}}}return false};k.prototype.updateLocalBounds=function(){var t=Infinity;var r=-Infinity;var s=Infinity;var q=-Infinity;if(this.graphicsData.length){var C,I,G,E,H,A;for(var z=0;z<this.graphicsData.length;z++){var v=this.graphicsData[z];var D=v.type;var B=v.lineWidth;C=v.shape;if(D===p.SHAPES.RECT||D===p.SHAPES.RREC){G=C.x-B/2;E=C.y-B/2;H=C.width+B;A=C.height+B;t=G<t?G:t;r=G+H>r?G+H:r;s=E<s?E:s;q=E+A>q?E+A:q}else{if(D===p.SHAPES.CIRC){G=C.x;E=C.y;H=C.radius+B/2;A=C.radius+B/2;t=G-H<t?G-H:t;r=G+H>r?G+H:r;s=E-A<s?E-A:s;q=E+A>q?E+A:q}else{if(D===p.SHAPES.ELIP){G=C.x;E=C.y;H=C.width+B/2;A=C.height+B/2;t=G-H<t?G-H:t;r=G+H>r?G+H:r;s=E-A<s?E-A:s;q=E+A>q?E+A:q}else{I=C.points;for(var u=0;u<I.length;u+=2){G=I[u];E=I[u+1];t=G-B<t?G-B:t;r=G+B>r?G+B:r;s=E-B<s?E-B:s;q=E+B>q?E+B:q}}}}}}else{t=0;r=0;s=0;q=0}var F=this.boundsPadding;this._localBounds.x=t-F;this._localBounds.width=(r-t)+F*2;this._localBounds.y=s-F;this._localBounds.height=(q-s)+F*2};k.prototype.drawShape=function(q){if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.graphicsData.pop()}}this.currentPath=null;var r=new m(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,q);this.graphicsData.push(r);if(r.type===p.SHAPES.POLY){r.shape.closed=r.shape.closed||this.filling;this.currentPath=r}this.dirty=this.boundsDirty=true;return r};k.prototype.destroy=function(){h.prototype.destroy.apply(this,arguments);for(var r=0;r<this.graphicsData.length;++r){this.graphicsData[r].destroy()}for(var s in this._webgl){for(var q=0;q<this._webgl[s].data.length;++q){this._webgl[s].data[q].destroy()}}this.graphicsData=null;this.currentPath=null;this._webgl=null;this._localBounds=null}},{"../const":22,"../display/Container":23,"../math":32,"../renderers/canvas/utils/CanvasBuffer":44,"../renderers/canvas/utils/CanvasGraphics":45,"../textures/Texture":71,"./GraphicsData":26}],26:[function(f,g,e){function h(i,n,k,o,l,m,j){this.lineWidth=i;this.lineColor=n;this.lineAlpha=k;this._lineTint=n;this.fillColor=o;this.fillAlpha=l;this._fillTint=o;this.fill=m;this.shape=j;this.type=j.type}h.prototype.constructor=h;g.exports=h;h.prototype.clone=function(){return new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)};h.prototype.destroy=function(){this.shape=null}},{}],27:[function(g,f,h){var m=g("../../utils"),k=g("../../math"),o=g("../../const"),n=g("../../renderers/webgl/utils/ObjectRenderer"),l=g("../../renderers/webgl/WebGLRenderer"),e=g("./WebGLGraphicsData"),j=g("earcut");function i(p){n.call(this,p);this.graphicsDataPool=[];this.primitiveShader=null;this.complexPrimitiveShader=null;this.maximumSimplePolySize=200}i.prototype=Object.create(n.prototype);i.prototype.constructor=i;f.exports=i;l.registerPlugin("graphics",i);i.prototype.onContextChange=function(){};i.prototype.destroy=function(){n.prototype.destroy.call(this);for(var p=0;p<this.graphicsDataPool.length;++p){this.graphicsDataPool[p].destroy()}this.graphicsDataPool=null};i.prototype.render=function(p){var t=this.renderer;var v=t.gl;var r=t.shaderManager.plugins.primitiveShader,u;if(p.dirty){this.updateGraphics(p,v)}var s=p._webGL[v.id];t.blendModeManager.setBlendMode(p.blendMode);for(var q=0;q<s.data.length;q++){if(s.data[q].mode===1){u=s.data[q];t.stencilManager.pushStencil(p,u,t);v.uniform1f(t.shaderManager.complexPrimitiveShader.uniforms.alpha._location,p.worldAlpha*u.alpha);v.drawElements(v.TRIANGLE_FAN,4,v.UNSIGNED_SHORT,(u.indices.length-4)*2);t.stencilManager.popStencil(p,u,t)}else{u=s.data[q];r=t.shaderManager.primitiveShader;t.shaderManager.setShader(r);v.uniformMatrix3fv(r.uniforms.translationMatrix._location,false,p.worldTransform.toArray(true));v.uniformMatrix3fv(r.uniforms.projectionMatrix._location,false,t.currentRenderTarget.projectionMatrix.toArray(true));v.uniform3fv(r.uniforms.tint._location,m.hex2rgb(p.tint));v.uniform1f(r.uniforms.alpha._location,p.worldAlpha);v.bindBuffer(v.ARRAY_BUFFER,u.buffer);v.vertexAttribPointer(r.attributes.aVertexPosition,2,v.FLOAT,false,4*6,0);v.vertexAttribPointer(r.attributes.aColor,4,v.FLOAT,false,4*6,2*4);v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,u.indexBuffer);v.drawElements(v.TRIANGLE_STRIP,u.indices.length,v.UNSIGNED_SHORT,0)}}};i.prototype.updateGraphics=function(p){var v=this.renderer.gl;var t=p._webGL[v.id];if(!t){t=p._webGL[v.id]={lastIndex:0,data:[],gl:v}}p.dirty=false;var q;if(p.clearDirty){p.clearDirty=false;for(q=0;q<t.data.length;q++){var w=t.data[q];w.reset();this.graphicsDataPool.push(w)}t.data=[];t.lastIndex=0}var u;for(q=t.lastIndex;q<p.graphicsData.length;q++){var s=p.graphicsData[q];if(s.type===o.SHAPES.POLY){s.points=s.shape.points.slice();if(s.shape.closed){if(s.points[0]!==s.points[s.points.length-2]||s.points[1]!==s.points[s.points.length-1]){s.points.push(s.points[0],s.points[1])}}if(s.fill){if(s.points.length>=6){if(s.points.length<this.maximumSimplePolySize*2){u=this.switchMode(t,0);var r=this.buildPoly(s,u);if(!r){u=this.switchMode(t,1);this.buildComplexPoly(s,u)}}else{u=this.switchMode(t,1);this.buildComplexPoly(s,u)}}}if(s.lineWidth>0){u=this.switchMode(t,0);this.buildLine(s,u)}}else{u=this.switchMode(t,0);if(s.type===o.SHAPES.RECT){this.buildRectangle(s,u)}else{if(s.type===o.SHAPES.CIRC||s.type===o.SHAPES.ELIP){this.buildCircle(s,u)}else{if(s.type===o.SHAPES.RREC){this.buildRoundedRectangle(s,u)}}}}t.lastIndex++}for(q=0;q<t.data.length;q++){u=t.data[q];if(u.dirty){u.upload()}}};i.prototype.switchMode=function(q,p){var r;if(!q.data.length){r=this.graphicsDataPool.pop()||new e(q.gl);r.mode=p;q.data.push(r)}else{r=q.data[q.data.length-1];if((r.points.length>320000)||r.mode!==p||p===1){r=this.graphicsDataPool.pop()||new e(q.gl);r.mode=p;q.data.push(r)}}r.dirty=true;return r};i.prototype.buildRectangle=function(H,v){var t=H.shape;var D=t.x;var C=t.y;var q=t.width;var G=t.height;if(H.fill){var u=m.hex2rgb(H.fillColor);var s=H.fillAlpha;var p=u[0]*s;var w=u[1]*s;var B=u[2]*s;var E=v.points;var F=v.indices;var A=E.length/6;E.push(D,C);E.push(p,w,B,s);E.push(D+q,C);E.push(p,w,B,s);E.push(D,C+G);E.push(p,w,B,s);E.push(D+q,C+G);E.push(p,w,B,s);F.push(A,A,A+1,A+2,A+3,A+3)}if(H.lineWidth){var z=H.points;H.points=[D,C,D+q,C,D+q,C+G,D,C+G,D,C];this.buildLine(H,v);H.points=z}};i.prototype.buildRoundedRectangle=function(A,L){var p=A.shape;var z=p.x;var w=p.y;var E=p.width;var D=p.height;var s=p.radius;var B=[];B.push(z,w+s);this.quadraticBezierCurve(z,w+D-s,z,w+D,z+s,w+D,B);this.quadraticBezierCurve(z+E-s,w+D,z+E,w+D,z+E,w+D-s,B);this.quadraticBezierCurve(z+E,w+s,z+E,w,z+E-s,w,B);this.quadraticBezierCurve(z+s,w,z,w,z,w+s+1e-10,B);if(A.fill){var G=m.hex2rgb(A.fillColor);var t=A.fillAlpha;var C=G[0]*t;var I=G[1]*t;var J=G[2]*t;var K=L.points;var u=L.indices;var q=K.length/6;var F=j(B,null,2);var H=0;for(H=0;H<F.length;H+=3){u.push(F[H]+q);u.push(F[H]+q);u.push(F[H+1]+q);u.push(F[H+2]+q);u.push(F[H+2]+q)}for(H=0;H<B.length;H++){K.push(B[H],B[++H],C,I,J,t)}}if(A.lineWidth){var v=A.points;A.points=B;this.buildLine(A,L);A.points=v}};i.prototype.quadraticBezierCurve=function(A,w,p,I,r,q,G){var H,t,E,s,v,u,B=20,F=G||[];function z(J,y,x){var K=y-J;return J+(K*x)}var C=0;for(var D=0;D<=B;D++){C=D/B;H=z(A,p,C);t=z(w,I,C);E=z(p,r,C);s=z(I,q,C);v=z(H,E,C);u=z(t,s,C);F.push(v,u)}return F};i.prototype.buildCircle=function(w,K){var G=w.shape;var v=G.x;var u=G.y;var C;var B;if(w.type===o.SHAPES.CIRC){C=G.radius;B=G.radius}else{C=G.width;B=G.height}var z=40;var H=(Math.PI*2)/z;var E=0;if(w.fill){var D=m.hex2rgb(w.fillColor);var q=w.fillAlpha;var A=D[0]*q;var F=D[1]*q;var I=D[2]*q;var J=K.points;var s=K.indices;var p=J.length/6;s.push(p);for(E=0;E<z+1;E++){J.push(v,u,A,F,I,q);J.push(v+Math.sin(H*E)*C,u+Math.cos(H*E)*B,A,F,I,q);s.push(p++,p++)}s.push(p-1)}if(w.lineWidth){var t=w.points;w.points=[];for(E=0;E<z+1;E++){w.points.push(v+Math.sin(H*E)*C,u+Math.cos(H*E)*B)}this.buildLine(w,K);w.points=t}};i.prototype.buildLine=function(ad,N){var Z=0;var Q=ad.points;if(Q.length===0){return}if(ad.lineWidth%2){for(Z=0;Z<Q.length;Z++){Q[Z]+=0.5}}var E=new k.Point(Q[0],Q[1]);var x=new k.Point(Q[Q.length-2],Q[Q.length-1]);if(E.x===x.x&&E.y===x.y){Q=Q.slice();Q.pop();Q.pop();x=new k.Point(Q[Q.length-2],Q[Q.length-1]);var G=x.x+(E.x-x.x)*0.5;var D=x.y+(E.y-x.y)*0.5;Q.unshift(G,D);Q.push(G,D)}var aa=N.points;var v=N.indices;var F=Q.length/2;var C=Q.length;var ac=aa.length/6;var p=ad.lineWidth/2;var P=m.hex2rgb(ad.lineColor);var Y=ad.lineAlpha;var V=P[0]*Y;var ab=P[1]*Y;var ae=P[2]*Y;var B,A,S,R,K,J,u,t;var U,T,I,H,s,q;var X,O,z,W,M,y;var af,L,w;S=Q[0];R=Q[1];K=Q[2];J=Q[3];U=-(R-J);T=S-K;w=Math.sqrt(U*U+T*T);U/=w;T/=w;U*=p;T*=p;aa.push(S-U,R-T,V,ab,ae,Y);aa.push(S+U,R+T,V,ab,ae,Y);for(Z=1;Z<F-1;Z++){S=Q[(Z-1)*2];R=Q[(Z-1)*2+1];K=Q[(Z)*2];J=Q[(Z)*2+1];u=Q[(Z+1)*2];t=Q[(Z+1)*2+1];U=-(R-J);T=S-K;w=Math.sqrt(U*U+T*T);U/=w;T/=w;U*=p;T*=p;I=-(J-t);H=K-u;w=Math.sqrt(I*I+H*H);I/=w;H/=w;I*=p;H*=p;X=(-T+R)-(-T+J);O=(-U+K)-(-U+S);z=(-U+S)*(-T+J)-(-U+K)*(-T+R);W=(-H+t)-(-H+J);M=(-I+K)-(-I+u);y=(-I+u)*(-H+J)-(-I+K)*(-H+t);af=X*M-W*O;if(Math.abs(af)<0.1){af+=10.1;aa.push(K-U,J-T,V,ab,ae,Y);aa.push(K+U,J+T,V,ab,ae,Y);continue}B=(O*y-M*z)/af;A=(W*z-X*y)/af;L=(B-K)*(B-K)+(A-J)+(A-J);if(L>140*140){s=U-I;q=T-H;w=Math.sqrt(s*s+q*q);s/=w;q/=w;s*=p;q*=p;aa.push(K-s,J-q);aa.push(V,ab,ae,Y);aa.push(K+s,J+q);aa.push(V,ab,ae,Y);aa.push(K-s,J-q);aa.push(V,ab,ae,Y);C++}else{aa.push(B,A);aa.push(V,ab,ae,Y);aa.push(K-(B-K),J-(A-J));aa.push(V,ab,ae,Y)}}S=Q[(F-2)*2];R=Q[(F-2)*2+1];K=Q[(F-1)*2];J=Q[(F-1)*2+1];U=-(R-J);T=S-K;w=Math.sqrt(U*U+T*T);U/=w;T/=w;U*=p;T*=p;aa.push(K-U,J-T);aa.push(V,ab,ae,Y);aa.push(K+U,J+T);aa.push(V,ab,ae,Y);v.push(ac);for(Z=0;Z<C;Z++){v.push(ac++)}v.push(ac-1)};i.prototype.buildComplexPoly=function(C,v){var A=C.points.slice();if(A.length<6){return}var B=v.indices;v.points=A;v.alpha=C.fillAlpha;v.color=m.hex2rgb(C.fillColor);var t=Infinity;var q=-Infinity;var s=Infinity;var p=-Infinity;var z,w;for(var u=0;u<A.length;u+=2){z=A[u];w=A[u+1];t=z<t?z:t;q=z>q?z:q;s=w<s?w:s;p=w>p?w:p}A.push(t,s,q,s,q,p,t,p);var r=A.length/2;for(u=0;u<r;u++){B.push(u)}};i.prototype.buildPoly=function(D,w){var B=D.points;if(B.length<6){return}var A=w.points;var C=w.indices;var q=B.length/2;var u=m.hex2rgb(D.fillColor);var t=D.fillAlpha;var p=u[0]*t;var x=u[1]*t;var z=u[2]*t;var s=j(B,null,2);if(!s){return false}var y=A.length/6;var v=0;for(v=0;v<s.length;v+=3){C.push(s[v]+y);C.push(s[v]+y);C.push(s[v+1]+y);C.push(s[v+2]+y);C.push(s[v+2]+y)}for(v=0;v<q;v++){A.push(B[v*2],B[v*2+1],p,x,z,t)}return true}},{"../../const":22,"../../math":32,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62,"../../utils":76,"./WebGLGraphicsData":28,earcut:10}],28:[function(g,h,f){function e(i){this.gl=i;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=i.createBuffer();this.indexBuffer=i.createBuffer();this.mode=1;this.alpha=1;this.dirty=true;this.glPoints=null;this.glIndices=null}e.prototype.constructor=e;h.exports=e;e.prototype.reset=function(){this.points.length=0;this.indices.length=0};e.prototype.upload=function(){var i=this.gl;this.glPoints=new Float32Array(this.points);i.bindBuffer(i.ARRAY_BUFFER,this.buffer);i.bufferData(i.ARRAY_BUFFER,this.glPoints,i.STATIC_DRAW);this.glIndices=new Uint16Array(this.indices);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer);i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.glIndices,i.STATIC_DRAW);this.dirty=false};e.prototype.destroy=function(){this.color=null;this.points=null;this.indices=null;this.gl.deleteBuffer(this.buffer);this.gl.deleteBuffer(this.indexBuffer);this.gl=null;this.buffer=null;this.indexBuffer=null;this.glPoints=null;this.glIndices=null}},{}],29:[function(g,h,f){var e=h.exports=Object.assign(g("./const"),g("./math"),{utils:g("./utils"),ticker:g("./ticker"),DisplayObject:g("./display/DisplayObject"),Container:g("./display/Container"),Sprite:g("./sprites/Sprite"),ParticleContainer:g("./particles/ParticleContainer"),SpriteRenderer:g("./sprites/webgl/SpriteRenderer"),ParticleRenderer:g("./particles/webgl/ParticleRenderer"),Text:g("./text/Text"),Graphics:g("./graphics/Graphics"),GraphicsData:g("./graphics/GraphicsData"),GraphicsRenderer:g("./graphics/webgl/GraphicsRenderer"),Texture:g("./textures/Texture"),BaseTexture:g("./textures/BaseTexture"),RenderTexture:g("./textures/RenderTexture"),VideoBaseTexture:g("./textures/VideoBaseTexture"),TextureUvs:g("./textures/TextureUvs"),CanvasRenderer:g("./renderers/canvas/CanvasRenderer"),CanvasGraphics:g("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:g("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:g("./renderers/webgl/WebGLRenderer"),ShaderManager:g("./renderers/webgl/managers/ShaderManager"),Shader:g("./renderers/webgl/shaders/Shader"),ObjectRenderer:g("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:g("./renderers/webgl/utils/RenderTarget"),AbstractFilter:g("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:g("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:g("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(l,i,j,k){l=l||800;i=i||600;if(!k&&e.utils.isWebGLSupported()){return new e.WebGLRenderer(l,i,j)}return new e.CanvasRenderer(l,i,j)}})},{"./const":22,"./display/Container":23,"./display/DisplayObject":24,"./graphics/Graphics":25,"./graphics/GraphicsData":26,"./graphics/webgl/GraphicsRenderer":27,"./math":32,"./particles/ParticleContainer":38,"./particles/webgl/ParticleRenderer":40,"./renderers/canvas/CanvasRenderer":43,"./renderers/canvas/utils/CanvasBuffer":44,"./renderers/canvas/utils/CanvasGraphics":45,"./renderers/webgl/WebGLRenderer":48,"./renderers/webgl/filters/AbstractFilter":49,"./renderers/webgl/filters/FXAAFilter":50,"./renderers/webgl/filters/SpriteMaskFilter":51,"./renderers/webgl/managers/ShaderManager":55,"./renderers/webgl/shaders/Shader":60,"./renderers/webgl/utils/ObjectRenderer":62,"./renderers/webgl/utils/RenderTarget":64,"./sprites/Sprite":66,"./sprites/webgl/SpriteRenderer":67,"./text/Text":68,"./textures/BaseTexture":69,"./textures/RenderTexture":70,"./textures/Texture":71,"./textures/TextureUvs":72,"./textures/VideoBaseTexture":73,"./ticker":75,"./utils":76}],30:[function(g,h,f){var i=g("./Point");function e(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0}e.prototype.constructor=e;h.exports=e;e.prototype.fromArray=function(j){this.a=j[0];this.b=j[1];this.c=j[3];this.d=j[4];this.tx=j[2];this.ty=j[5]};e.prototype.toArray=function(k,j){if(!this.array){this.array=new Float32Array(9)}var l=j||this.array;if(k){l[0]=this.a;l[1]=this.b;l[2]=0;l[3]=this.c;l[4]=this.d;l[5]=0;l[6]=this.tx;l[7]=this.ty;l[8]=1}else{l[0]=this.a;l[1]=this.c;l[2]=this.tx;l[3]=this.b;l[4]=this.d;l[5]=this.ty;l[6]=0;l[7]=0;l[8]=1}return l};e.prototype.apply=function(m,k){k=k||new i();var j=m.x;var l=m.y;k.x=this.a*j+this.c*l+this.tx;k.y=this.b*j+this.d*l+this.ty;return k};e.prototype.applyInverse=function(n,k){k=k||new i();var m=1/(this.a*this.d+this.c*-this.b);var j=n.x;var l=n.y;k.x=this.d*m*j+-this.c*m*l+(this.ty*this.c-this.tx*this.d)*m;k.y=this.a*m*l+-this.b*m*j+(-this.ty*this.a+this.tx*this.b)*m;return k};e.prototype.translate=function(j,k){this.tx+=j;this.ty+=k;return this};e.prototype.scale=function(j,k){this.a*=j;this.d*=k;this.c*=j;this.b*=k;this.tx*=j;this.ty*=k;return this};e.prototype.rotate=function(o){var n=Math.cos(o);var l=Math.sin(o);var k=this.a;var m=this.c;var j=this.tx;this.a=k*n-this.b*l;this.b=k*l+this.b*n;this.c=m*n-this.d*l;this.d=m*l+this.d*n;this.tx=j*n-this.ty*l;this.ty=j*l+this.ty*n;return this};e.prototype.append=function(k){var j=this.a;var l=this.b;var m=this.c;var n=this.d;this.a=k.a*j+k.b*m;this.b=k.a*l+k.b*n;this.c=k.c*j+k.d*m;this.d=k.c*l+k.d*n;this.tx=k.tx*j+k.ty*m+this.tx;this.ty=k.tx*l+k.ty*n+this.ty;return this};e.prototype.prepend=function(l){var k=this.tx;if(l.a!==1||l.b!==0||l.c!==0||l.d!==1){var j=this.a;var m=this.c;this.a=j*l.a+this.b*l.c;this.b=j*l.b+this.b*l.d;this.c=m*l.a+this.d*l.c;this.d=m*l.b+this.d*l.d}this.tx=k*l.a+this.ty*l.c+l.tx;this.ty=k*l.b+this.ty*l.d+l.ty;return this};e.prototype.invert=function(){var k=this.a;var l=this.b;var m=this.c;var o=this.d;var j=this.tx;var p=k*o-l*m;this.a=o/p;this.b=-l/p;this.c=-m/p;this.d=k/p;this.tx=(m*this.ty-o*j)/p;this.ty=-(k*this.ty-l*j)/p;return this};e.prototype.identity=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;return this};e.prototype.clone=function(){var j=new e();j.a=this.a;j.b=this.b;j.c=this.c;j.d=this.d;j.tx=this.tx;j.ty=this.ty;return j};e.prototype.copy=function(j){j.a=this.a;j.b=this.b;j.c=this.c;j.d=this.d;j.tx=this.tx;j.ty=this.ty;return j};e.IDENTITY=new e();e.TEMP_MATRIX=new e()},{"./Point":31}],31:[function(f,g,e){function h(i,j){this.x=i||0;this.y=j||0}h.prototype.constructor=h;g.exports=h;h.prototype.clone=function(){return new h(this.x,this.y)};h.prototype.copy=function(i){this.set(i.x,i.y)};h.prototype.equals=function(i){return(i.x===this.x)&&(i.y===this.y)};h.prototype.set=function(i,j){this.x=i||0;this.y=j||((j!==0)?this.x:0)}},{}],32:[function(f,g,e){g.exports={Point:f("./Point"),Matrix:f("./Matrix"),Circle:f("./shapes/Circle"),Ellipse:f("./shapes/Ellipse"),Polygon:f("./shapes/Polygon"),Rectangle:f("./shapes/Rectangle"),RoundedRectangle:f("./shapes/RoundedRectangle")}},{"./Matrix":30,"./Point":31,"./shapes/Circle":33,"./shapes/Ellipse":34,"./shapes/Polygon":35,"./shapes/Rectangle":36,"./shapes/RoundedRectangle":37}],33:[function(g,i,f){var h=g("./Rectangle"),e=g("../../const");function j(l,m,k){this.x=l||0;this.y=m||0;this.radius=k||0;this.type=e.SHAPES.CIRC}j.prototype.constructor=j;i.exports=j;j.prototype.clone=function(){return new j(this.x,this.y,this.radius)};j.prototype.contains=function(k,o){if(this.radius<=0){return false}var n=(this.x-k),m=(this.y-o),l=this.radius*this.radius;n*=n;m*=m;return(n+m<=l)};j.prototype.getBounds=function(){return new h(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}},{"../../const":22,"./Rectangle":36}],34:[function(g,j,f){var i=g("./Rectangle"),e=g("../../const");function h(l,n,m,k){this.x=l||0;this.y=n||0;this.width=m||0;this.height=k||0;this.type=e.SHAPES.ELIP}h.prototype.constructor=h;j.exports=h;h.prototype.clone=function(){return new h(this.x,this.y,this.width,this.height)};h.prototype.contains=function(l,n){if(this.width<=0||this.height<=0){return false}var m=((l-this.x)/this.width),k=((n-this.y)/this.height);m*=m;k*=k;return(m+k<=1)};h.prototype.getBounds=function(){return new i(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":22,"./Rectangle":36}],35:[function(h,i,g){var j=h("../Point"),e=h("../../const");function f(l){var o=l;if(!Array.isArray(o)){o=new Array(arguments.length);for(var k=0;k<o.length;++k){o[k]=arguments[k]}}if(o[0] instanceof j){var q=[];for(var n=0,m=o.length;n<m;n++){q.push(o[n].x,o[n].y)}o=q}this.closed=true;this.points=o;this.type=e.SHAPES.POLY}f.prototype.constructor=f;i.exports=f;f.prototype.clone=function(){return new f(this.points.slice())};f.prototype.contains=function(u,t){var n=false;var k=this.points.length/2;for(var q=0,p=k-1;q<k;p=q++){var s=this.points[q*2],o=this.points[q*2+1],r=this.points[p*2],m=this.points[p*2+1],l=((o>t)!==(m>t))&&(u<(r-s)*(t-o)/(m-o)+s);if(l){n=!n}}return n}},{"../../const":22,"../Point":31}],36:[function(g,i,f){var e=g("../../const");function h(k,m,l,j){this.x=k||0;this.y=m||0;this.width=l||0;this.height=j||0;this.type=e.SHAPES.RECT}h.prototype.constructor=h;i.exports=h;h.EMPTY=new h(0,0,0,0);h.prototype.clone=function(){return new h(this.x,this.y,this.width,this.height)};h.prototype.contains=function(j,k){if(this.width<=0||this.height<=0){return false}if(j>=this.x&&j<this.x+this.width){if(k>=this.y&&k<this.y+this.height){return true}}return false}},{"../../const":22}],37:[function(g,h,f){var e=g("../../const");function i(l,n,m,k,j){this.x=l||0;this.y=n||0;this.width=m||0;this.height=k||0;this.radius=j||20;this.type=e.SHAPES.RREC}i.prototype.constructor=i;h.exports=i;i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)};i.prototype.contains=function(j,k){if(this.width<=0||this.height<=0){return false}if(j>=this.x&&j<=this.x+this.width){if(k>=this.y&&k<=this.y+this.height){return true}}return false}},{"../../const":22}],38:[function(h,i,g){var f=h("../display/Container"),e=h("../const");function j(l,k){f.call(this);this._properties=[false,true,false,false,false];this._size=l||15000;this._buffers=null;this._updateStatic=false;this.interactiveChildren=false;this.blendMode=e.BLEND_MODES.NORMAL;this.roundPixels=true;this.setProperties(k)}j.prototype=Object.create(f.prototype);j.prototype.constructor=j;i.exports=j;j.prototype.setProperties=function(k){if(k){this._properties[0]="scale" in k?!!k.scale:this._properties[0];this._properties[1]="position" in k?!!k.position:this._properties[1];this._properties[2]="rotation" in k?!!k.rotation:this._properties[2];this._properties[3]="uvs" in k?!!k.uvs:this._properties[3];this._properties[4]="alpha" in k?!!k.alpha:this._properties[4]}};j.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};j.prototype.renderWebGL=function(k){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}k.setObjectRenderer(k.plugins.particle);k.plugins.particle.render(this)};j.prototype.addChildAt=function(l,k){if(l===this){return l}if(k>=0&&k<=this.children.length){if(l.parent){l.parent.removeChild(l)}l.parent=this;this.children.splice(k,0,l);this._updateStatic=true;return l}else{throw new Error(l+"addChildAt: The index "+k+" supplied is out of bounds "+this.children.length)}};j.prototype.removeChildAt=function(k){var l=this.getChildAt(k);l.parent=null;this.children.splice(k,1);this._updateStatic=true;return l};j.prototype.renderCanvas=function(u){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}var k=u.context;var o=this.worldTransform;var v=true;var t=0;var s=0;var p=0;var n=0;k.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(var q=0;q<this.children.length;++q){var m=this.children[q];if(!m.visible){continue}var l=m.texture.frame;k.globalAlpha=this.worldAlpha*m.alpha;if(m.rotation%(Math.PI*2)===0){if(v){k.setTransform(o.a,o.b,o.c,o.d,o.tx,o.ty);v=false}t=((m.anchor.x)*(-l.width*m.scale.x)+m.position.x+0.5);s=((m.anchor.y)*(-l.height*m.scale.y)+m.position.y+0.5);p=l.width*m.scale.x;n=l.height*m.scale.y}else{if(!v){v=true}m.displayObjectUpdateTransform();var r=m.worldTransform;if(u.roundPixels){k.setTransform(r.a,r.b,r.c,r.d,r.tx|0,r.ty|0)}else{k.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty)}t=((m.anchor.x)*(-l.width)+0.5);s=((m.anchor.y)*(-l.height)+0.5);p=l.width;n=l.height}k.drawImage(m.texture.baseTexture.source,l.x,l.y,l.width,l.height,t,s,p,n)}};j.prototype.destroy=function(){f.prototype.destroy.apply(this,arguments);if(this._buffers){for(var k=0;k<this._buffers.length;++k){this._buffers[k].destroy()}}this._properties=null;this._buffers=null}},{"../const":22,"../display/Container":23}],39:[function(f,g,e){function h(n,l,k){this.gl=n;this.vertSize=2;this.vertByteSize=this.vertSize*4;this.size=k;this.dynamicProperties=[];this.staticProperties=[];for(var j=0;j<l.length;j++){var m=l[j];if(m.dynamic){this.dynamicProperties.push(m)}else{this.staticProperties.push(m)}}this.staticStride=0;this.staticBuffer=null;this.staticData=null;this.dynamicStride=0;this.dynamicBuffer=null;this.dynamicData=null;this.initBuffers()}h.prototype.constructor=h;g.exports=h;h.prototype.initBuffers=function(){var n=this.gl;var j;var l;var m=0;this.dynamicStride=0;for(j=0;j<this.dynamicProperties.length;j++){l=this.dynamicProperties[j];l.offset=m;m+=l.size;this.dynamicStride+=l.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4);this.dynamicBuffer=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer);n.bufferData(n.ARRAY_BUFFER,this.dynamicData,n.DYNAMIC_DRAW);var k=0;this.staticStride=0;for(j=0;j<this.staticProperties.length;j++){l=this.staticProperties[j];l.offset=k;k+=l.size;this.staticStride+=l.size}this.staticData=new Float32Array(this.size*this.staticStride*4);this.staticBuffer=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer);n.bufferData(n.ARRAY_BUFFER,this.staticData,n.DYNAMIC_DRAW)};h.prototype.uploadDynamic=function(l,o,k){var n=this.gl;for(var j=0;j<this.dynamicProperties.length;j++){var m=this.dynamicProperties[j];m.uploadFunction(l,o,k,this.dynamicData,this.dynamicStride,m.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer);n.bufferSubData(n.ARRAY_BUFFER,0,this.dynamicData)};h.prototype.uploadStatic=function(l,o,k){var n=this.gl;for(var j=0;j<this.staticProperties.length;j++){var m=this.staticProperties[j];m.uploadFunction(l,o,k,this.staticData,this.staticStride,m.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer);n.bufferSubData(n.ARRAY_BUFFER,0,this.staticData)};h.prototype.bind=function(){var l=this.gl;var j,k;l.bindBuffer(l.ARRAY_BUFFER,this.dynamicBuffer);for(j=0;j<this.dynamicProperties.length;j++){k=this.dynamicProperties[j];l.vertexAttribPointer(k.attribute,k.size,l.FLOAT,false,this.dynamicStride*4,k.offset*4)}l.bindBuffer(l.ARRAY_BUFFER,this.staticBuffer);for(j=0;j<this.staticProperties.length;j++){k=this.staticProperties[j];l.vertexAttribPointer(k.attribute,k.size,l.FLOAT,false,this.staticStride*4,k.offset*4)}};h.prototype.destroy=function(){this.dynamicProperties=null;this.dynamicData=null;this.gl.deleteBuffer(this.dynamicBuffer);this.staticProperties=null;this.staticData=null;this.gl.deleteBuffer(this.staticBuffer)}},{}],40:[function(h,g,j){var m=h("../../renderers/webgl/utils/ObjectRenderer"),l=h("../../renderers/webgl/WebGLRenderer"),i=h("./ParticleShader"),f=h("./ParticleBuffer"),k=h("../../math");function e(p){m.call(this,p);this.size=15000;var q=this.size*6;this.indices=new Uint16Array(q);for(var o=0,n=0;o<q;o+=6,n+=4){this.indices[o+0]=n+0;this.indices[o+1]=n+1;this.indices[o+2]=n+2;this.indices[o+3]=n+0;this.indices[o+4]=n+2;this.indices[o+5]=n+3}this.shader=null;this.indexBuffer=null;this.properties=null;this.tempMatrix=new k.Matrix()}e.prototype=Object.create(m.prototype);e.prototype.constructor=e;g.exports=e;l.registerPlugin("particle",e);e.prototype.onContextChange=function(){var n=this.renderer.gl;this.shader=new i(this.renderer.shaderManager);this.indexBuffer=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer);n.bufferData(n.ELEMENT_ARRAY_BUFFER,this.indices,n.STATIC_DRAW);this.properties=[{attribute:this.shader.attributes.aVertexPosition,dynamic:false,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,dynamic:true,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,dynamic:false,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,dynamic:false,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,dynamic:false,size:1,uploadFunction:this.uploadAlpha,offset:0}]};e.prototype.start=function(){var o=this.renderer.gl;o.activeTexture(o.TEXTURE0);o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var n=this.shader;this.renderer.shaderManager.setShader(n)};e.prototype.render=function(o){var p=o.children,w=p.length,x=o._size;if(w===0){return}else{if(w>x){w=x}}if(!o._buffers){o._buffers=this.generateBuffers(o)}this.renderer.blendModeManager.setBlendMode(o.blendMode);var v=this.renderer.gl;var q=o.worldTransform.copy(this.tempMatrix);q.prepend(this.renderer.currentRenderTarget.projectionMatrix);v.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,false,q.toArray(true));v.uniform1f(this.shader.uniforms.uAlpha._location,o.worldAlpha);var y=o._updateStatic;var n=p[0]._texture.baseTexture;if(!n._glTextures[v.id]){if(!this.renderer.updateTexture(n)){return}if(!this.properties[0].dynamic||!this.properties[3].dynamic){y=true}}else{v.bindTexture(v.TEXTURE_2D,n._glTextures[v.id])}var s=0;for(var t=0;t<w;t+=this.size){var u=(w-t);if(u>this.size){u=this.size}var r=o._buffers[s++];r.uploadDynamic(p,t,u);if(y){r.uploadStatic(p,t,u)}r.bind(this.shader);v.drawElements(v.TRIANGLES,u*6,v.UNSIGNED_SHORT,0);this.renderer.drawCount++}o._updateStatic=false};e.prototype.generateBuffers=function(o){var r=this.renderer.gl,n=[],q=o._size,p;for(p=0;p<o._properties.length;p++){this.properties[p].dynamic=o._properties[p]}for(p=0;p<q;p+=this.size){n.push(new f(r,this.properties,this.size,this.shader))}return n};e.prototype.uploadVertices=function(o,B,t,v,n,q){var C,w,p,A,z,u,s,y,x;for(var r=0;r<t;r++){C=o[B+r];w=C._texture;A=C.scale.x;z=C.scale.y;if(w.trim){p=w.trim;s=p.x-C.anchor.x*p.width;u=s+w.crop.width;x=p.y-C.anchor.y*p.height;y=x+w.crop.height}else{u=(w._frame.width)*(1-C.anchor.x);s=(w._frame.width)*-C.anchor.x;y=w._frame.height*(1-C.anchor.y);x=w._frame.height*-C.anchor.y}v[q]=s*A;v[q+1]=x*z;v[q+n]=u*A;v[q+n+1]=x*z;v[q+n*2]=u*A;v[q+n*2+1]=y*z;v[q+n*3]=s*A;v[q+n*3+1]=y*z;q+=n*4}};e.prototype.uploadPosition=function(p,t,o,u,r,s){for(var n=0;n<o;n++){var q=p[t+n].position;u[s]=q.x;u[s+1]=q.y;u[s+r]=q.x;u[s+r+1]=q.y;u[s+r*2]=q.x;u[s+r*2+1]=q.y;u[s+r*3]=q.x;u[s+r*3+1]=q.y;s+=r*4}};e.prototype.uploadRotation=function(q,t,p,u,r,s){for(var o=0;o<p;o++){var n=q[t+o].rotation;u[s]=n;u[s+r]=n;u[s+r*2]=n;u[s+r*3]=n;s+=r*4}};e.prototype.uploadUvs=function(q,t,p,u,r,s){for(var o=0;o<p;o++){var n=q[t+o]._texture._uvs;if(n){u[s]=n.x0;u[s+1]=n.y0;u[s+r]=n.x1;u[s+r+1]=n.y1;u[s+r*2]=n.x2;u[s+r*2+1]=n.y2;u[s+r*3]=n.x3;u[s+r*3+1]=n.y3;s+=r*4}else{u[s]=0;u[s+1]=0;u[s+r]=0;u[s+r+1]=0;u[s+r*2]=0;u[s+r*2+1]=0;u[s+r*3]=0;u[s+r*3+1]=0;s+=r*4}}};e.prototype.uploadAlpha=function(p,t,o,u,r,s){for(var n=0;n<o;n++){var q=p[t+n].alpha;u[s]=q;u[s+r]=q;u[s+r*2]=q;u[s+r*3]=q;s+=r*4}};e.prototype.destroy=function(){if(this.renderer.gl){this.renderer.gl.deleteBuffer(this.indexBuffer)}m.prototype.destroy.apply(this,arguments);this.shader.destroy();this.indices=null;this.tempMatrix=null}},{"../../math":32,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62,"./ParticleBuffer":39,"./ParticleShader":41}],41:[function(h,i,f){var g=h("../../renderers/webgl/shaders/TextureShader");function e(j){g.call(this,j,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}e.prototype=Object.create(g.prototype);e.prototype.constructor=e;i.exports=e},{"../../renderers/webgl/shaders/TextureShader":61}],42:[function(i,j,h){var g=i("../utils"),l=i("../math"),e=i("../const"),k=i("eventemitter3");function f(q,p,m,n){k.call(this);g.sayHello(q);if(n){for(var o in e.DEFAULT_RENDER_OPTIONS){if(typeof n[o]==="undefined"){n[o]=e.DEFAULT_RENDER_OPTIONS[o]}}}else{n=e.DEFAULT_RENDER_OPTIONS}this.type=e.RENDERER_TYPE.UNKNOWN;this.width=p||800;this.height=m||600;this.view=n.view||document.createElement("canvas");this.resolution=n.resolution;this.transparent=n.transparent;this.autoResize=n.autoResize||false;this.blendModes=null;this.preserveDrawingBuffer=n.preserveDrawingBuffer;this.clearBeforeRender=n.clearBeforeRender;this._backgroundColor=0;this._backgroundColorRgb=[0,0,0];this._backgroundColorString="#000000";this.backgroundColor=n.backgroundColor||this._backgroundColor;this._tempDisplayObjectParent={worldTransform:new l.Matrix(),worldAlpha:1,children:[]};this._lastObjectRendered=this._tempDisplayObjectParent}f.prototype=Object.create(k.prototype);f.prototype.constructor=f;j.exports=f;Object.defineProperties(f.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(m){this._backgroundColor=m;this._backgroundColorString=g.hex2string(m);g.hex2rgb(m,this._backgroundColorRgb)}}});f.prototype.resize=function(n,m){this.width=n*this.resolution;this.height=m*this.resolution;this.view.width=this.width;this.view.height=this.height;if(this.autoResize){this.view.style.width=this.width/this.resolution+"px";this.view.style.height=this.height/this.resolution+"px"}};f.prototype.destroy=function(m){if(m&&this.view.parent){this.view.parent.removeChild(this.view)}this.type=e.RENDERER_TYPE.UNKNOWN;this.width=0;this.height=0;this.view=null;this.resolution=0;this.transparent=false;this.autoResize=false;this.blendModes=null;this.preserveDrawingBuffer=false;this.clearBeforeRender=false;this._backgroundColor=0;this._backgroundColorRgb=null;this._backgroundColorString=null}},{"../const":22,"../math":32,"../utils":76,eventemitter3:11}],43:[function(g,f,h){var l=g("../SystemRenderer"),e=g("./utils/CanvasMaskManager"),k=g("../../utils"),j=g("../../math"),m=g("../../const");function i(p,n,o){l.call(this,"Canvas",p,n,o);this.type=m.RENDERER_TYPE.CANVAS;this.context=this.view.getContext("2d",{alpha:this.transparent});this.refresh=true;this.maskManager=new e();this.roundPixels=false;this.currentScaleMode=m.SCALE_MODES.DEFAULT;this.currentBlendMode=m.BLEND_MODES.NORMAL;this.smoothProperty="imageSmoothingEnabled";if(!this.context.imageSmoothingEnabled){if(this.context.webkitImageSmoothingEnabled){this.smoothProperty="webkitImageSmoothingEnabled"}else{if(this.context.mozImageSmoothingEnabled){this.smoothProperty="mozImageSmoothingEnabled"}else{if(this.context.oImageSmoothingEnabled){this.smoothProperty="oImageSmoothingEnabled"}else{if(this.context.msImageSmoothingEnabled){this.smoothProperty="msImageSmoothingEnabled"}}}}}this.initPlugins();this._mapBlendModes();this._tempDisplayObjectParent={worldTransform:new j.Matrix(),worldAlpha:1};this.resize(p,n)}i.prototype=Object.create(l.prototype);i.prototype.constructor=i;f.exports=i;k.pluginTarget.mixin(i);i.prototype.render=function(n){var o=n.parent;this._lastObjectRendered=n;n.parent=this._tempDisplayObjectParent;n.updateTransform();n.parent=o;this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;this.currentBlendMode=m.BLEND_MODES.NORMAL;this.context.globalCompositeOperation=this.blendModes[m.BLEND_MODES.NORMAL];if(navigator.isCocoonJS&&this.view.screencanvas){this.context.fillStyle="black";this.context.clear()}if(this.clearBeforeRender){if(this.transparent){this.context.clearRect(0,0,this.width,this.height)}else{this.context.fillStyle=this._backgroundColorString;this.context.fillRect(0,0,this.width,this.height)}}this.renderDisplayObject(n,this.context)};i.prototype.destroy=function(n){this.destroyPlugins();l.prototype.destroy.call(this,n);this.context=null;this.refresh=true;this.maskManager.destroy();this.maskManager=null;this.roundPixels=false;this.currentScaleMode=0;this.currentBlendMode=0;this.smoothProperty=null};i.prototype.renderDisplayObject=function(p,o){var n=this.context;this.context=o;p.renderCanvas(this);this.context=n};i.prototype.resize=function(n,o){l.prototype.resize.call(this,n,o);this.currentScaleMode=m.SCALE_MODES.DEFAULT;if(this.smoothProperty){this.context[this.smoothProperty]=(this.currentScaleMode===m.SCALE_MODES.LINEAR)}};i.prototype._mapBlendModes=function(){if(!this.blendModes){this.blendModes={};if(k.canUseNewCanvasBlendModes()){this.blendModes[m.BLEND_MODES.NORMAL]="source-over";this.blendModes[m.BLEND_MODES.ADD]="lighter";this.blendModes[m.BLEND_MODES.MULTIPLY]="multiply";this.blendModes[m.BLEND_MODES.SCREEN]="screen";this.blendModes[m.BLEND_MODES.OVERLAY]="overlay";this.blendModes[m.BLEND_MODES.DARKEN]="darken";this.blendModes[m.BLEND_MODES.LIGHTEN]="lighten";this.blendModes[m.BLEND_MODES.COLOR_DODGE]="color-dodge";this.blendModes[m.BLEND_MODES.COLOR_BURN]="color-burn";this.blendModes[m.BLEND_MODES.HARD_LIGHT]="hard-light";this.blendModes[m.BLEND_MODES.SOFT_LIGHT]="soft-light";this.blendModes[m.BLEND_MODES.DIFFERENCE]="difference";this.blendModes[m.BLEND_MODES.EXCLUSION]="exclusion";this.blendModes[m.BLEND_MODES.HUE]="hue";this.blendModes[m.BLEND_MODES.SATURATION]="saturate";this.blendModes[m.BLEND_MODES.COLOR]="color";this.blendModes[m.BLEND_MODES.LUMINOSITY]="luminosity"}else{this.blendModes[m.BLEND_MODES.NORMAL]="source-over";this.blendModes[m.BLEND_MODES.ADD]="lighter";this.blendModes[m.BLEND_MODES.MULTIPLY]="source-over";this.blendModes[m.BLEND_MODES.SCREEN]="source-over";this.blendModes[m.BLEND_MODES.OVERLAY]="source-over";this.blendModes[m.BLEND_MODES.DARKEN]="source-over";this.blendModes[m.BLEND_MODES.LIGHTEN]="source-over";this.blendModes[m.BLEND_MODES.COLOR_DODGE]="source-over";this.blendModes[m.BLEND_MODES.COLOR_BURN]="source-over";this.blendModes[m.BLEND_MODES.HARD_LIGHT]="source-over";this.blendModes[m.BLEND_MODES.SOFT_LIGHT]="source-over";this.blendModes[m.BLEND_MODES.DIFFERENCE]="source-over";this.blendModes[m.BLEND_MODES.EXCLUSION]="source-over";this.blendModes[m.BLEND_MODES.HUE]="source-over";this.blendModes[m.BLEND_MODES.SATURATION]="source-over";this.blendModes[m.BLEND_MODES.COLOR]="source-over";this.blendModes[m.BLEND_MODES.LUMINOSITY]="source-over"}}}},{"../../const":22,"../../math":32,"../../utils":76,"../SystemRenderer":42,"./utils/CanvasMaskManager":46}],44:[function(f,h,e){function g(j,i){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.canvas.width=j;this.canvas.height=i}g.prototype.constructor=g;h.exports=g;Object.defineProperties(g.prototype,{width:{get:function(){return this.canvas.width},set:function(i){this.canvas.width=i}},height:{get:function(){return this.canvas.height},set:function(i){this.canvas.height=i}}});g.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};g.prototype.resize=function(j,i){this.canvas.width=j;this.canvas.height=i};g.prototype.destroy=function(){this.context=null;this.canvas=null}},{}],45:[function(g,h,f){var e=g("../../../const");var i={};h.exports=i;i.renderGraphics=function(L,n){var G=L.worldAlpha;if(L.dirty){this.updateGraphicsTint(L);L.dirty=false}for(var J=0;J<L.graphicsData.length;J++){var N=L.graphicsData[J];var m=N.shape;var s=N._fillTint;var l=N._lineTint;n.lineWidth=N.lineWidth;if(N.type===e.SHAPES.POLY){n.beginPath();var I=m.points;n.moveTo(I[0],I[1]);for(var H=1;H<I.length/2;H++){n.lineTo(I[H*2],I[H*2+1])}if(m.closed){n.lineTo(I[0],I[1])}if(I[0]===I[I.length-2]&&I[1]===I[I.length-1]){n.closePath()}if(N.fill){n.globalAlpha=N.fillAlpha*G;n.fillStyle="#"+("00000"+(s|0).toString(16)).substr(-6);n.fill()}if(N.lineWidth){n.globalAlpha=N.lineAlpha*G;n.strokeStyle="#"+("00000"+(l|0).toString(16)).substr(-6);n.stroke()}}else{if(N.type===e.SHAPES.RECT){if(N.fillColor||N.fillColor===0){n.globalAlpha=N.fillAlpha*G;n.fillStyle="#"+("00000"+(s|0).toString(16)).substr(-6);n.fillRect(m.x,m.y,m.width,m.height)}if(N.lineWidth){n.globalAlpha=N.lineAlpha*G;n.strokeStyle="#"+("00000"+(l|0).toString(16)).substr(-6);n.strokeRect(m.x,m.y,m.width,m.height)}}else{if(N.type===e.SHAPES.CIRC){n.beginPath();n.arc(m.x,m.y,m.radius,0,2*Math.PI);n.closePath();if(N.fill){n.globalAlpha=N.fillAlpha*G;n.fillStyle="#"+("00000"+(s|0).toString(16)).substr(-6);n.fill()}if(N.lineWidth){n.globalAlpha=N.lineAlpha*G;n.strokeStyle="#"+("00000"+(l|0).toString(16)).substr(-6);n.stroke()}}else{if(N.type===e.SHAPES.ELIP){var A=m.width*2;var K=m.height*2;var z=m.x-A/2;var v=m.y-K/2;n.beginPath();var B=0.5522848,r=(A/2)*B,p=(K/2)*B,F=z+A,k=v+K,C=z+A/2,M=v+K/2;n.moveTo(z,M);n.bezierCurveTo(z,M-p,C-r,v,C,v);n.bezierCurveTo(C+r,v,F,M-p,F,M);n.bezierCurveTo(F,M+p,C+r,k,C,k);n.bezierCurveTo(C-r,k,z,M+p,z,M);n.closePath();if(N.fill){n.globalAlpha=N.fillAlpha*G;n.fillStyle="#"+("00000"+(s|0).toString(16)).substr(-6);n.fill()}if(N.lineWidth){n.globalAlpha=N.lineAlpha*G;n.strokeStyle="#"+("00000"+(l|0).toString(16)).substr(-6);n.stroke()}}else{if(N.type===e.SHAPES.RREC){var t=m.x;var q=m.y;var E=m.width;var D=m.height;var o=m.radius;var u=Math.min(E,D)/2|0;o=o>u?u:o;n.beginPath();n.moveTo(t,q+o);n.lineTo(t,q+D-o);n.quadraticCurveTo(t,q+D,t+o,q+D);n.lineTo(t+E-o,q+D);n.quadraticCurveTo(t+E,q+D,t+E,q+D-o);n.lineTo(t+E,q+o);n.quadraticCurveTo(t+E,q,t+E-o,q);n.lineTo(t+o,q);n.quadraticCurveTo(t,q,t,q+o);n.closePath();if(N.fillColor||N.fillColor===0){n.globalAlpha=N.fillAlpha*G;n.fillStyle="#"+("00000"+(s|0).toString(16)).substr(-6);n.fill()}if(N.lineWidth){n.globalAlpha=N.lineAlpha*G;n.strokeStyle="#"+("00000"+(l|0).toString(16)).substr(-6);n.stroke()}}}}}}}};i.renderGraphicsMask=function(J,m){var H=J.graphicsData.length;if(H===0){return}m.beginPath();for(var G=0;G<H;G++){var L=J.graphicsData[G];var l=L.shape;if(L.type===e.SHAPES.POLY){var F=l.points;m.moveTo(F[0],F[1]);for(var E=1;E<F.length/2;E++){m.lineTo(F[E*2],F[E*2+1])}if(F[0]===F[F.length-2]&&F[1]===F[F.length-1]){m.closePath()}}else{if(L.type===e.SHAPES.RECT){m.rect(l.x,l.y,l.width,l.height);m.closePath()}else{if(L.type===e.SHAPES.CIRC){m.arc(l.x,l.y,l.radius,0,2*Math.PI);m.closePath()}else{if(L.type===e.SHAPES.ELIP){var v=l.width*2;var I=l.height*2;var u=l.x-v/2;var t=l.y-I/2;var z=0.5522848,q=(v/2)*z,o=(I/2)*z,D=u+v,k=t+I,A=u+v/2,K=t+I/2;m.moveTo(u,K);m.bezierCurveTo(u,K-o,A-q,t,A,t);m.bezierCurveTo(A+q,t,D,K-o,D,K);m.bezierCurveTo(D,K+o,A+q,k,A,k);m.bezierCurveTo(A-q,k,u,K+o,u,K);m.closePath()}else{if(L.type===e.SHAPES.RREC){var r=l.x;var p=l.y;var C=l.width;var B=l.height;var n=l.radius;var s=Math.min(C,B)/2|0;n=n>s?s:n;m.moveTo(r,p+n);m.lineTo(r,p+B-n);m.quadraticCurveTo(r,p+B,r+n,p+B);m.lineTo(r+C-n,p+B);m.quadraticCurveTo(r+C,p+B,r+C,p+B-n);m.lineTo(r+C,p+n);m.quadraticCurveTo(r+C,p,r+C-n,p);m.lineTo(r+n,p);m.quadraticCurveTo(r,p,r,p+n);m.closePath()}}}}}}};i.updateGraphicsTint=function(l){if(l.tint===16777215){return}var k=(l.tint>>16&255)/255;var j=(l.tint>>8&255)/255;var o=(l.tint&255)/255;for(var m=0;m<l.graphicsData.length;m++){var n=l.graphicsData[m];var q=n.fillColor|0;var p=n.lineColor|0;n._fillTint=(((q>>16&255)/255*k*255<<16)+((q>>8&255)/255*j*255<<8)+(q&255)/255*o*255);n._lineTint=(((p>>16&255)/255*k*255<<16)+((p>>8&255)/255*j*255<<8)+(p&255)/255*o*255)}}},{"../../../const":22}],46:[function(f,g,e){var i=f("./CanvasGraphics");function h(){}h.prototype.constructor=h;g.exports=h;h.prototype.pushMask=function(n,m){m.context.save();var j=n.alpha;var l=n.worldTransform;var k=m.resolution;m.context.setTransform(l.a*k,l.b*k,l.c*k,l.d*k,l.tx*k,l.ty*k);if(!n.texture){i.renderGraphicsMask(n,m.context);m.context.clip()}n.worldAlpha=j};h.prototype.popMask=function(j){j.context.restore()};h.prototype.destroy=function(){}},{"./CanvasGraphics":45}],47:[function(g,h,f){var e=g("../../../utils");var i={};h.exports=i;i.getTintedTexture=function(m,j){var o=m.texture;j=i.roundColor(j);var n="#"+("00000"+(j|0).toString(16)).substr(-6);o.tintCache=o.tintCache||{};if(o.tintCache[n]){return o.tintCache[n]}var k=i.canvas||document.createElement("canvas");i.tintMethod(o,j,k);if(i.convertTintToImage){var l=new Image();l.src=k.toDataURL();o.tintCache[n]=l}else{o.tintCache[n]=k;i.canvas=null}return k};i.tintWithMultiply=function(n,j,k){var l=k.getContext("2d");var m=n.crop;k.width=m.width;k.height=m.height;l.fillStyle="#"+("00000"+(j|0).toString(16)).substr(-6);l.fillRect(0,0,m.width,m.height);l.globalCompositeOperation="multiply";l.drawImage(n.baseTexture.source,m.x,m.y,m.width,m.height,0,0,m.width,m.height);l.globalCompositeOperation="destination-atop";l.drawImage(n.baseTexture.source,m.x,m.y,m.width,m.height,0,0,m.width,m.height)};i.tintWithOverlay=function(n,j,k){var l=k.getContext("2d");var m=n.crop;k.width=m.width;k.height=m.height;l.globalCompositeOperation="copy";l.fillStyle="#"+("00000"+(j|0).toString(16)).substr(-6);l.fillRect(0,0,m.width,m.height);l.globalCompositeOperation="destination-atop";l.drawImage(n.baseTexture.source,m.x,m.y,m.width,m.height,0,0,m.width,m.height)};i.tintWithPerPixel=function(t,o,m){var l=m.getContext("2d");var q=t.crop;m.width=q.width;m.height=q.height;l.globalCompositeOperation="copy";l.drawImage(t.baseTexture.source,q.x,q.y,q.width,q.height,0,0,q.width,q.height);var k=e.hex2rgb(o);var j=k[0],s=k[1],u=k[2];var v=l.getImageData(0,0,q.width,q.height);var n=v.data;for(var p=0;p<n.length;p+=4){n[p+0]*=j;n[p+1]*=s;n[p+2]*=u}l.putImageData(v,0,0)};i.roundColor=function(j){var k=i.cacheStepsPerColorChannel;var l=e.hex2rgb(j);l[0]=Math.min(255,(l[0]/k)*k);l[1]=Math.min(255,(l[1]/k)*k);l[2]=Math.min(255,(l[2]/k)*k);return e.rgb2hex(l)};i.cacheStepsPerColorChannel=8;i.convertTintToImage=false;i.canUseMultiply=e.canUseNewCanvasBlendModes();i.tintMethod=i.canUseMultiply?i.tintWithMultiply:i.tintWithPerPixel},{"../../../utils":76}],48:[function(h,g,i){var r=h("../SystemRenderer"),m=h("./managers/ShaderManager"),e=h("./managers/MaskManager"),l=h("./managers/StencilManager"),j=h("./managers/FilterManager"),k=h("./managers/BlendModeManager"),f=h("./utils/RenderTarget"),q=h("./utils/ObjectRenderer"),o=h("./filters/FXAAFilter"),p=h("../../utils"),s=h("../../const");function n(v,t,u){u=u||{};r.call(this,"WebGL",v,t,u);this.type=s.RENDERER_TYPE.WEBGL;this.handleContextLost=this.handleContextLost.bind(this);this.handleContextRestored=this.handleContextRestored.bind(this);this.view.addEventListener("webglcontextlost",this.handleContextLost,false);this.view.addEventListener("webglcontextrestored",this.handleContextRestored,false);this._useFXAA=!!u.forceFXAA&&u.antialias;this._FXAAFilter=null;this._contextOptions={alpha:this.transparent,antialias:u.antialias,premultipliedAlpha:this.transparent&&this.transparent!=="notMultiplied",stencil:true,preserveDrawingBuffer:u.preserveDrawingBuffer};this.drawCount=0;this.shaderManager=new m(this);this.maskManager=new e(this);this.stencilManager=new l(this);this.filterManager=new j(this);this.blendModeManager=new k(this);this.currentRenderTarget=null;this.currentRenderer=new q(this);this.initPlugins();this._createContext();this._initContext();this._mapGlModes();this._renderTargetStack=[]}n.prototype=Object.create(r.prototype);n.prototype.constructor=n;g.exports=n;p.pluginTarget.mixin(n);n.glContextId=0;n.prototype._createContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);this.gl=t;if(!t){throw new Error("This browser does not support webGL. Try using the canvas renderer")}this.glContextId=n.glContextId++;t.id=this.glContextId;t.renderer=this};n.prototype._initContext=function(){var t=this.gl;t.disable(t.DEPTH_TEST);t.disable(t.CULL_FACE);t.enable(t.BLEND);this.renderTarget=new f(t,this.width,this.height,null,this.resolution,true);this.setRenderTarget(this.renderTarget);this.emit("context",t);this.resize(this.width,this.height);if(!this._useFXAA){this._useFXAA=(this._contextOptions.antialias&&!t.getContextAttributes().antialias)}if(this._useFXAA){window.console.warn("FXAA antialiasing being used instead of native antialiasing");this._FXAAFilter=[new o()]}};n.prototype.render=function(t){if(this.gl.isContextLost()){return}this.drawCount=0;this._lastObjectRendered=t;if(this._useFXAA){this._FXAAFilter[0].uniforms.resolution.value.x=this.width;this._FXAAFilter[0].uniforms.resolution.value.y=this.height;t.filterArea=this.renderTarget.size;t.filters=this._FXAAFilter}var u=t.parent;t.parent=this._tempDisplayObjectParent;t.updateTransform();t.parent=u;var v=this.gl;this.setRenderTarget(this.renderTarget);if(this.clearBeforeRender){if(this.transparent){v.clearColor(0,0,0,0)}else{v.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1)}v.clear(v.COLOR_BUFFER_BIT)}this.renderDisplayObject(t,this.renderTarget)};n.prototype.renderDisplayObject=function(v,u,t){this.setRenderTarget(u);if(t){u.clear()}this.filterManager.setFilterStack(u.filterStack);v.renderWebGL(this);this.currentRenderer.flush()};n.prototype.setObjectRenderer=function(t){if(this.currentRenderer===t){return}this.currentRenderer.stop();this.currentRenderer=t;this.currentRenderer.start()};n.prototype.setRenderTarget=function(t){if(this.currentRenderTarget===t){return}this.currentRenderTarget=t;this.currentRenderTarget.activate();this.stencilManager.setMaskStack(t.stencilMaskStack)};n.prototype.resize=function(u,t){r.prototype.resize.call(this,u,t);this.filterManager.resize(u,t);this.renderTarget.resize(u,t);if(this.currentRenderTarget===this.renderTarget){this.renderTarget.activate();this.gl.viewport(0,0,this.width,this.height)}};n.prototype.updateTexture=function(t){t=t.baseTexture||t;if(!t.hasLoaded){return}var u=this.gl;if(!t._glTextures[u.id]){t._glTextures[u.id]=u.createTexture();t.on("update",this.updateTexture,this);t.on("dispose",this.destroyTexture,this)}u.bindTexture(u.TEXTURE_2D,t._glTextures[u.id]);u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha);u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,t.source);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,t.scaleMode===s.SCALE_MODES.LINEAR?u.LINEAR:u.NEAREST);if(t.mipmap&&t.isPowerOfTwo){u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,t.scaleMode===s.SCALE_MODES.LINEAR?u.LINEAR_MIPMAP_LINEAR:u.NEAREST_MIPMAP_NEAREST);u.generateMipmap(u.TEXTURE_2D)}else{u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,t.scaleMode===s.SCALE_MODES.LINEAR?u.LINEAR:u.NEAREST)}if(!t.isPowerOfTwo){u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE)}else{u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT)}return t._glTextures[u.id]};n.prototype.destroyTexture=function(t){t=t.baseTexture||t;if(!t.hasLoaded){return}if(t._glTextures[this.gl.id]){this.gl.deleteTexture(t._glTextures[this.gl.id])}};n.prototype.handleContextLost=function(t){t.preventDefault()};n.prototype.handleContextRestored=function(){this._initContext();for(var t in p.BaseTextureCache){p.BaseTextureCache[t]._glTextures.length=0}};n.prototype.destroy=function(t){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);r.prototype.destroy.call(this,t);this.uid=0;this.shaderManager.destroy();this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this.shaderManager=null;this.maskManager=null;this.filterManager=null;this.blendModeManager=null;this.handleContextLost=null;this.handleContextRestored=null;this._contextOptions=null;this.drawCount=0;this.gl=null};n.prototype._mapGlModes=function(){var t=this.gl;if(!this.blendModes){this.blendModes={};this.blendModes[s.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.ADD]=[t.SRC_ALPHA,t.DST_ALPHA];this.blendModes[s.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.SCREEN]=[t.SRC_ALPHA,t.ONE];this.blendModes[s.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA];this.blendModes[s.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA]}if(!this.drawModes){this.drawModes={};this.drawModes[s.DRAW_MODES.POINTS]=t.POINTS;this.drawModes[s.DRAW_MODES.LINES]=t.LINES;this.drawModes[s.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP;this.drawModes[s.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP;this.drawModes[s.DRAW_MODES.TRIANGLES]=t.TRIANGLES;this.drawModes[s.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP;this.drawModes[s.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN}}},{"../../const":22,"../../utils":76,"../SystemRenderer":42,"./filters/FXAAFilter":50,"./managers/BlendModeManager":52,"./managers/FilterManager":53,"./managers/MaskManager":54,"./managers/ShaderManager":55,"./managers/StencilManager":56,"./utils/ObjectRenderer":62,"./utils/RenderTarget":64}],49:[function(f,g,e){var i=f("../shaders/TextureShader");function h(k,l,j){this.shaders=[];this.padding=0;this.uniforms=j||{};this.vertexSrc=k||i.defaultVertexSrc;this.fragmentSrc=l||i.defaultFragmentSrc}h.prototype.constructor=h;g.exports=h;h.prototype.getShader=function(k){var l=k.gl;var j=this.shaders[l.id];if(!j){j=new i(k.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes);this.shaders[l.id]=j}return j};h.prototype.applyFilter=function(n,l,k,j){var m=this.getShader(n);n.filterManager.applyFilter(m,l,k,j)};h.prototype.syncUniform=function(k){for(var m=0,l=this.shaders.length;m<l;++m){this.shaders[m].syncUniform(k)}}},{"../shaders/TextureShader":61}],50:[function(f,g,e){var h=f("./AbstractFilter");function i(){h.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}i.prototype=Object.create(h.prototype);i.prototype.constructor=i;g.exports=i;i.prototype.applyFilter=function(n,l,k){var j=n.filterManager;var m=this.getShader(n);j.applyFilter(m,l,k)}},{"./AbstractFilter":49}],51:[function(g,h,f){var i=g("./AbstractFilter"),j=g("../../../math");function e(k){var l=new j.Matrix();i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:k._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:l.toArray(true)}});this.maskSprite=k;this.maskMatrix=l}e.prototype=Object.create(i.prototype);e.prototype.constructor=e;h.exports=e;e.prototype.applyFilter=function(o,m,l){var k=o.filterManager;this.uniforms.mask.value=this.maskSprite._texture;k.calculateMappedMatrix(m.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(true);this.uniforms.alpha.value=this.maskSprite.worldAlpha;var n=this.getShader(o);k.applyFilter(n,m,l)};Object.defineProperties(e.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(k){this.uniforms.mask.value=k}},offset:{get:function(){return this.uniforms.offset.value},set:function(k){this.uniforms.offset.value=k}}})},{"../../../math":32,"./AbstractFilter":49}],52:[function(g,h,f){var i=g("./WebGLManager");function e(j){i.call(this,j);this.currentBlendMode=99999}e.prototype=Object.create(i.prototype);e.prototype.constructor=e;h.exports=e;e.prototype.setBlendMode=function(j){if(this.currentBlendMode===j){return false}this.currentBlendMode=j;var k=this.renderer.blendModes[this.currentBlendMode];this.renderer.gl.blendFunc(k[0],k[1]);return true}},{"./WebGLManager":57}],53:[function(h,f,i){var l=h("./WebGLManager"),e=h("../utils/RenderTarget"),m=h("../../../const"),g=h("../utils/Quad"),k=h("../../../math");function j(n){l.call(this,n);this.filterStack=[];this.filterStack.push({renderTarget:n.currentRenderTarget,filter:[],bounds:null});this.texturePool=[];this.textureSize=new k.Rectangle(0,0,n.width,n.height);this.currentFrame=null}j.prototype=Object.create(l.prototype);j.prototype.constructor=j;f.exports=j;j.prototype.onContextChange=function(){this.texturePool.length=0;var n=this.renderer.gl;this.quad=new g(n)};j.prototype.setFilterStack=function(n){this.filterStack=n};j.prototype.pushFilter=function(s,q){var p=s.filterArea?s.filterArea.clone():s.getBounds();p.x=p.x|0;p.y=p.y|0;p.width=p.width|0;p.height=p.height|0;var r=q[0].padding|0;p.x-=r;p.y-=r;p.width+=r*2;p.height+=r*2;if(this.renderer.currentRenderTarget.transform){var n=this.renderer.currentRenderTarget.transform;p.x+=n.tx;p.y+=n.ty;this.capFilterArea(p);p.x-=n.tx;p.y-=n.ty}else{this.capFilterArea(p)}if(p.width>0&&p.height>0){this.currentFrame=p;var o=this.getRenderTarget();this.renderer.setRenderTarget(o);o.clear();this.filterStack.push({renderTarget:o,filter:q})}else{this.filterStack.push({renderTarget:null,filter:q})}};j.prototype.popFilter=function(){var u=this.filterStack.pop();var t=this.filterStack[this.filterStack.length-1];var v=u.renderTarget;if(!u.renderTarget){return}var p=t.renderTarget;var s=this.renderer.gl;this.currentFrame=v.frame;this.quad.map(this.textureSize,v.frame);s.bindBuffer(s.ARRAY_BUFFER,this.quad.vertexBuffer);s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var o=u.filter;s.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,s.FLOAT,false,0,0);s.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,s.FLOAT,false,0,2*4*4);s.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,s.FLOAT,false,0,4*4*4);this.renderer.blendModeManager.setBlendMode(m.BLEND_MODES.NORMAL);if(o.length===1){if(o[0].uniforms.dimensions){o[0].uniforms.dimensions.value[0]=this.renderer.width;o[0].uniforms.dimensions.value[1]=this.renderer.height;o[0].uniforms.dimensions.value[2]=this.quad.vertices[0];o[0].uniforms.dimensions.value[3]=this.quad.vertices[5]}o[0].applyFilter(this.renderer,v,p);this.returnRenderTarget(v)}else{var q=v;var w=this.getRenderTarget(true);for(var r=0;r<o.length-1;r++){var n=o[r];if(n.uniforms.dimensions){n.uniforms.dimensions.value[0]=this.renderer.width;n.uniforms.dimensions.value[1]=this.renderer.height;n.uniforms.dimensions.value[2]=this.quad.vertices[0];n.uniforms.dimensions.value[3]=this.quad.vertices[5]}n.applyFilter(this.renderer,q,w);var x=q;q=w;w=x}o[o.length-1].applyFilter(this.renderer,q,p);this.returnRenderTarget(q);this.returnRenderTarget(w)}return u.filter};j.prototype.getRenderTarget=function(n){var o=this.texturePool.pop()||new e(this.renderer.gl,this.textureSize.width,this.textureSize.height,m.SCALE_MODES.LINEAR,this.renderer.resolution*m.FILTER_RESOLUTION);o.frame=this.currentFrame;if(n){o.clear(true)}return o};j.prototype.returnRenderTarget=function(n){this.texturePool.push(n)};j.prototype.applyFilter=function(p,o,r,n){var q=this.renderer.gl;this.renderer.setRenderTarget(r);if(n){r.clear()}this.renderer.shaderManager.setShader(p);p.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(true);p.syncUniforms();q.activeTexture(q.TEXTURE0);q.bindTexture(q.TEXTURE_2D,o.texture);q.drawElements(q.TRIANGLES,6,q.UNSIGNED_SHORT,0)};j.prototype.calculateMappedMatrix=function(q,v,r){var n=v.worldTransform.copy(k.Matrix.TEMP_MATRIX),s=v._texture.baseTexture;var u=r.identity();var t=this.textureSize.height/this.textureSize.width;u.translate(q.x/this.textureSize.width,q.y/this.textureSize.height);u.scale(1,t);var p=(this.textureSize.width/s.width);var o=(this.textureSize.height/s.height);n.tx/=s.width*p;n.ty/=s.width*p;n.invert();u.prepend(n);u.scale(1,1/t);u.scale(p,o);u.translate(v.anchor.x,v.anchor.y);return u};j.prototype.capFilterArea=function(n){if(n.x<0){n.width+=n.x;n.x=0}if(n.y<0){n.height+=n.y;n.y=0}if(n.x+n.width>this.textureSize.width){n.width=this.textureSize.width-n.x}if(n.y+n.height>this.textureSize.height){n.height=this.textureSize.height-n.y}};j.prototype.resize=function(p,n){this.textureSize.width=p;this.textureSize.height=n;for(var o=0;o<this.texturePool.length;o++){this.texturePool[o].resize(p,n)}};j.prototype.destroy=function(){this.filterStack=null;this.offsetY=0;for(var n=0;n<this.texturePool.length;n++){this.texturePool[n].destroy()}this.texturePool=null}},{"../../../const":22,"../../../math":32,"../utils/Quad":63,"../utils/RenderTarget":64,"./WebGLManager":57}],54:[function(f,h,e){var i=f("./WebGLManager"),g=f("../filters/SpriteMaskFilter");function j(k){i.call(this,k);this.stencilStack=[];this.reverse=true;this.count=0;this.alphaMaskPool=[]}j.prototype=Object.create(i.prototype);j.prototype.constructor=j;h.exports=j;j.prototype.pushMask=function(l,k){if(k.texture){this.pushSpriteMask(l,k)}else{this.pushStencilMask(l,k)}};j.prototype.popMask=function(l,k){if(k.texture){this.popSpriteMask(l,k)}else{this.popStencilMask(l,k)}};j.prototype.pushSpriteMask=function(m,l){var k=this.alphaMaskPool.pop();if(!k){k=[new g(l)]}k[0].maskSprite=l;this.renderer.filterManager.pushFilter(m,k)};j.prototype.popSpriteMask=function(){var k=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(k)};j.prototype.pushStencilMask=function(l,k){this.renderer.stencilManager.pushMask(k)};j.prototype.popStencilMask=function(l,k){this.renderer.stencilManager.popMask(k)}},{"../filters/SpriteMaskFilter":51,"./WebGLManager":57}],55:[function(f,e,g){var k=f("./WebGLManager"),h=f("../shaders/TextureShader"),m=f("../shaders/ComplexPrimitiveShader"),j=f("../shaders/PrimitiveShader"),l=f("../../../utils");function i(o){k.call(this,o);this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];for(var n=0;n<this.maxAttibs;n++){this.attribState[n]=false}this.stack=[];this._currentId=-1;this.currentShader=null}i.prototype=Object.create(k.prototype);i.prototype.constructor=i;l.pluginTarget.mixin(i);e.exports=i;i.prototype.onContextChange=function(){this.initPlugins();var o=this.renderer.gl;this.maxAttibs=o.getParameter(o.MAX_VERTEX_ATTRIBS);this.attribState=[];for(var n=0;n<this.maxAttibs;n++){this.attribState[n]=false}this.defaultShader=new h(this);this.primitiveShader=new j(this);this.complexPrimitiveShader=new m(this)};i.prototype.setAttribs=function(q){var o;for(o=0;o<this.tempAttribState.length;o++){this.tempAttribState[o]=false}for(var n in q){this.tempAttribState[q[n]]=true}var p=this.renderer.gl;for(o=0;o<this.attribState.length;o++){if(this.attribState[o]!==this.tempAttribState[o]){this.attribState[o]=this.tempAttribState[o];if(this.attribState[o]){p.enableVertexAttribArray(o)}else{p.disableVertexAttribArray(o)}}}};i.prototype.setShader=function(n){if(this._currentId===n.uid){return false}this._currentId=n.uid;this.currentShader=n;this.renderer.gl.useProgram(n.program);this.setAttribs(n.attributes);return true};i.prototype.destroy=function(){k.prototype.destroy.call(this);this.destroyPlugins();this.attribState=null;this.tempAttribState=null}},{"../../../utils":76,"../shaders/ComplexPrimitiveShader":58,"../shaders/PrimitiveShader":59,"../shaders/TextureShader":61,"./WebGLManager":57}],56:[function(g,h,f){var i=g("./WebGLManager"),e=g("../../../utils");function j(k){i.call(this,k);this.stencilMaskStack=null}j.prototype=Object.create(i.prototype);j.prototype.constructor=j;h.exports=j;j.prototype.setMaskStack=function(l){this.stencilMaskStack=l;var k=this.renderer.gl;if(l.stencilStack.length===0){k.disable(k.STENCIL_TEST)}else{k.enable(k.STENCIL_TEST)}};j.prototype.pushStencil=function(k,n){this.renderer.currentRenderTarget.attachStencilBuffer();var m=this.renderer.gl,l=this.stencilMaskStack;this.bindGraphics(k,n,this.renderer);if(l.stencilStack.length===0){m.enable(m.STENCIL_TEST);m.clear(m.STENCIL_BUFFER_BIT);l.reverse=true;l.count=0}l.stencilStack.push(n);var o=l.count;m.colorMask(false,false,false,false);m.stencilFunc(m.ALWAYS,0,255);m.stencilOp(m.KEEP,m.KEEP,m.INVERT);if(n.mode===1){m.drawElements(m.TRIANGLE_FAN,n.indices.length-4,m.UNSIGNED_SHORT,0);if(l.reverse){m.stencilFunc(m.EQUAL,255-o,255);m.stencilOp(m.KEEP,m.KEEP,m.DECR)}else{m.stencilFunc(m.EQUAL,o,255);m.stencilOp(m.KEEP,m.KEEP,m.INCR)}m.drawElements(m.TRIANGLE_FAN,4,m.UNSIGNED_SHORT,(n.indices.length-4)*2);if(l.reverse){m.stencilFunc(m.EQUAL,255-(o+1),255)}else{m.stencilFunc(m.EQUAL,o+1,255)}l.reverse=!l.reverse}else{if(!l.reverse){m.stencilFunc(m.EQUAL,255-o,255);m.stencilOp(m.KEEP,m.KEEP,m.DECR)}else{m.stencilFunc(m.EQUAL,o,255);m.stencilOp(m.KEEP,m.KEEP,m.INCR)}m.drawElements(m.TRIANGLE_STRIP,n.indices.length,m.UNSIGNED_SHORT,0);if(!l.reverse){m.stencilFunc(m.EQUAL,255-(o+1),255)}else{m.stencilFunc(m.EQUAL,o+1,255)}}m.colorMask(true,true,true,true);m.stencilOp(m.KEEP,m.KEEP,m.KEEP);l.count++};j.prototype.bindGraphics=function(k,n){this._currentGraphics=k;var m=this.renderer.gl;var l;if(n.mode===1){l=this.renderer.shaderManager.complexPrimitiveShader;this.renderer.shaderManager.setShader(l);m.uniformMatrix3fv(l.uniforms.translationMatrix._location,false,k.worldTransform.toArray(true));m.uniformMatrix3fv(l.uniforms.projectionMatrix._location,false,this.renderer.currentRenderTarget.projectionMatrix.toArray(true));m.uniform3fv(l.uniforms.tint._location,e.hex2rgb(k.tint));m.uniform3fv(l.uniforms.color._location,n.color);m.uniform1f(l.uniforms.alpha._location,k.worldAlpha);m.bindBuffer(m.ARRAY_BUFFER,n.buffer);m.vertexAttribPointer(l.attributes.aVertexPosition,2,m.FLOAT,false,4*2,0);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,n.indexBuffer)}else{l=this.renderer.shaderManager.primitiveShader;this.renderer.shaderManager.setShader(l);m.uniformMatrix3fv(l.uniforms.translationMatrix._location,false,k.worldTransform.toArray(true));m.uniformMatrix3fv(l.uniforms.projectionMatrix._location,false,this.renderer.currentRenderTarget.projectionMatrix.toArray(true));m.uniform3fv(l.uniforms.tint._location,e.hex2rgb(k.tint));m.uniform1f(l.uniforms.alpha._location,k.worldAlpha);m.bindBuffer(m.ARRAY_BUFFER,n.buffer);m.vertexAttribPointer(l.attributes.aVertexPosition,2,m.FLOAT,false,4*6,0);m.vertexAttribPointer(l.attributes.aColor,4,m.FLOAT,false,4*6,2*4);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,n.indexBuffer)}};j.prototype.popStencil=function(k,n){var m=this.renderer.gl,l=this.stencilMaskStack;l.stencilStack.pop();l.count--;if(l.stencilStack.length===0){m.disable(m.STENCIL_TEST)}else{var o=l.count;this.bindGraphics(k,n,this.renderer);m.colorMask(false,false,false,false);if(n.mode===1){l.reverse=!l.reverse;if(l.reverse){m.stencilFunc(m.EQUAL,255-(o+1),255);m.stencilOp(m.KEEP,m.KEEP,m.INCR)}else{m.stencilFunc(m.EQUAL,o+1,255);m.stencilOp(m.KEEP,m.KEEP,m.DECR)}m.drawElements(m.TRIANGLE_FAN,4,m.UNSIGNED_SHORT,(n.indices.length-4)*2);m.stencilFunc(m.ALWAYS,0,255);m.stencilOp(m.KEEP,m.KEEP,m.INVERT);m.drawElements(m.TRIANGLE_FAN,n.indices.length-4,m.UNSIGNED_SHORT,0);if(!l.reverse){m.stencilFunc(m.EQUAL,255-(o),255)}else{m.stencilFunc(m.EQUAL,o,255)}}else{if(!l.reverse){m.stencilFunc(m.EQUAL,255-(o+1),255);m.stencilOp(m.KEEP,m.KEEP,m.INCR)}else{m.stencilFunc(m.EQUAL,o+1,255);m.stencilOp(m.KEEP,m.KEEP,m.DECR)}m.drawElements(m.TRIANGLE_STRIP,n.indices.length,m.UNSIGNED_SHORT,0);if(!l.reverse){m.stencilFunc(m.EQUAL,255-(o),255)}else{m.stencilFunc(m.EQUAL,o,255)}}m.colorMask(true,true,true,true);m.stencilOp(m.KEEP,m.KEEP,m.KEEP)}};j.prototype.destroy=function(){i.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null};j.prototype.pushMask=function(k){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);if(k.dirty){this.renderer.plugins.graphics.updateGraphics(k,this.renderer.gl)}if(!k._webGL[this.renderer.gl.id].data.length){return}this.pushStencil(k,k._webGL[this.renderer.gl.id].data[0],this.renderer)};j.prototype.popMask=function(k){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.popStencil(k,k._webGL[this.renderer.gl.id].data[0],this.renderer)}},{"../../../utils":76,"./WebGLManager":57}],57:[function(f,g,e){function h(i){this.renderer=i;this.renderer.on("context",this.onContextChange,this)}h.prototype.constructor=h;g.exports=h;h.prototype.onContextChange=function(){};h.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null}},{}],58:[function(f,g,e){var h=f("./Shader");function i(j){h.call(this,j,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}i.prototype=Object.create(h.prototype);i.prototype.constructor=i;g.exports=i},{"./Shader":60}],59:[function(g,h,f){var i=g("./Shader");function e(j){i.call(this,j,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}e.prototype=Object.create(i.prototype);e.prototype.constructor=e;h.exports=e},{"./Shader":60}],60:[function(g,h,f){var e=g("../../../utils");function i(n,k,m,j,l){if(!k||!m){throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc")}this.uid=e.uid();this.gl=n.renderer.gl;this.shaderManager=n;this.program=null;this.uniforms=j||{};this.attributes=l||{};this.textureCount=1;this.vertexSrc=k;this.fragmentSrc=m;this.init()}i.prototype.constructor=i;h.exports=i;i.prototype.init=function(){this.compile();this.gl.useProgram(this.program);this.cacheUniformLocations(Object.keys(this.uniforms));this.cacheAttributeLocations(Object.keys(this.attributes))};i.prototype.cacheUniformLocations=function(k){for(var j=0;j<k.length;++j){this.uniforms[k[j]]._location=this.gl.getUniformLocation(this.program,k[j])}};i.prototype.cacheAttributeLocations=function(k){for(var j=0;j<k.length;++j){this.attributes[k[j]]=this.gl.getAttribLocation(this.program,k[j])}};i.prototype.compile=function(){var m=this.gl;var k=this._glCompile(m.VERTEX_SHADER,this.vertexSrc);var l=this._glCompile(m.FRAGMENT_SHADER,this.fragmentSrc);var j=m.createProgram();m.attachShader(j,k);m.attachShader(j,l);m.linkProgram(j);if(!m.getProgramParameter(j,m.LINK_STATUS)){console.error("Pixi.js Error: Could not initialize shader.");console.error("gl.VALIDATE_STATUS",m.getProgramParameter(j,m.VALIDATE_STATUS));console.error("gl.getError()",m.getError());if(m.getProgramInfoLog(j)!==""){console.warn("Pixi.js Warning: gl.getProgramInfoLog()",m.getProgramInfoLog(j))}m.deleteProgram(j);j=null}m.deleteShader(k);m.deleteShader(l);return(this.program=j)};i.prototype.syncUniform=function(j){var k=j._location,o=j.value,p=this.gl,m,l;switch(j.type){case"b":case"bool":case"boolean":p.uniform1i(k,o?1:0);break;case"i":case"1i":p.uniform1i(k,o);break;case"f":case"1f":p.uniform1f(k,o);break;case"2f":p.uniform2f(k,o[0],o[1]);break;case"3f":p.uniform3f(k,o[0],o[1],o[2]);break;case"4f":p.uniform4f(k,o[0],o[1],o[2],o[3]);break;case"v2":p.uniform2f(k,o.x,o.y);break;case"v3":p.uniform3f(k,o.x,o.y,o.z);break;case"v4":p.uniform4f(k,o.x,o.y,o.z,o.w);break;case"1iv":p.uniform1iv(k,o);break;case"2iv":p.uniform2iv(k,o);break;case"3iv":p.uniform3iv(k,o);break;case"4iv":p.uniform4iv(k,o);break;case"1fv":p.uniform1fv(k,o);break;case"2fv":p.uniform2fv(k,o);break;case"3fv":p.uniform3fv(k,o);break;case"4fv":p.uniform4fv(k,o);break;case"m2":case"mat2":case"Matrix2fv":p.uniformMatrix2fv(k,j.transpose,o);break;case"m3":case"mat3":case"Matrix3fv":p.uniformMatrix3fv(k,j.transpose,o);break;case"m4":case"mat4":case"Matrix4fv":p.uniformMatrix4fv(k,j.transpose,o);break;case"c":if(typeof o==="number"){o=e.hex2rgb(o)}p.uniform3f(k,o[0],o[1],o[2]);break;case"iv1":p.uniform1iv(k,o);break;case"iv":p.uniform3iv(k,o);break;case"fv1":p.uniform1fv(k,o);break;case"fv":p.uniform3fv(k,o);break;case"v2v":if(!j._array){j._array=new Float32Array(2*o.length)}for(m=0,l=o.length;m<l;++m){j._array[m*2]=o[m].x;j._array[m*2+1]=o[m].y}p.uniform2fv(k,j._array);break;case"v3v":if(!j._array){j._array=new Float32Array(3*o.length)}for(m=0,l=o.length;m<l;++m){j._array[m*3]=o[m].x;j._array[m*3+1]=o[m].y;j._array[m*3+2]=o[m].z}p.uniform3fv(k,j._array);break;case"v4v":if(!j._array){j._array=new Float32Array(4*o.length)}for(m=0,l=o.length;m<l;++m){j._array[m*4]=o[m].x;j._array[m*4+1]=o[m].y;j._array[m*4+2]=o[m].z;j._array[m*4+3]=o[m].w}p.uniform4fv(k,j._array);break;case"t":case"sampler2D":if(!j.value||!j.value.baseTexture.hasLoaded){break}p.activeTexture(p["TEXTURE"+this.textureCount]);var n=j.value.baseTexture._glTextures[p.id];if(!n){this.initSampler2D(j);n=j.value.baseTexture._glTextures[p.id]}p.bindTexture(p.TEXTURE_2D,n);p.uniform1i(j._location,this.textureCount);this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+j.type)}};i.prototype.syncUniforms=function(){this.textureCount=1;for(var j in this.uniforms){this.syncUniform(this.uniforms[j])}};i.prototype.initSampler2D=function(j){var m=this.gl;var k=j.value.baseTexture;if(!k.hasLoaded){return}if(j.textureData){var l=j.textureData;k._glTextures[m.id]=m.createTexture();m.bindTexture(m.TEXTURE_2D,k._glTextures[m.id]);m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultipliedAlpha);m.texImage2D(m.TEXTURE_2D,0,l.luminance?m.LUMINANCE:m.RGBA,m.RGBA,m.UNSIGNED_BYTE,k.source);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,l.magFilter?l.magFilter:m.LINEAR);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,l.wrapS?l.wrapS:m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,l.wrapS?l.wrapS:m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,l.wrapT?l.wrapT:m.CLAMP_TO_EDGE)}else{this.shaderManager.renderer.updateTexture(k)}};i.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.gl=null;this.uniforms=null;this.attributes=null;this.vertexSrc=null;this.fragmentSrc=null};i.prototype._glCompile=function(j,l){var k=this.gl.createShader(j);this.gl.shaderSource(k,l);this.gl.compileShader(k);if(!this.gl.getShaderParameter(k,this.gl.COMPILE_STATUS)){console.log(this.gl.getShaderInfoLog(k));return null}return k}},{"../../../utils":76}],61:[function(g,h,e){var i=g("./Shader");function f(m,l,r,j,o){var p={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(j){for(var q in j){p[q]=j[q]}}var k={aVertexPosition:0,aTextureCoord:0,aColor:0};if(o){for(var n in o){k[n]=o[n]}}l=l||f.defaultVertexSrc;r=r||f.defaultFragmentSrc;i.call(this,m,l,r,p,k)}f.prototype=Object.create(i.prototype);f.prototype.constructor=f;h.exports=f;f.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n");f.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":60}],62:[function(f,g,e){var h=f("../managers/WebGLManager");function i(j){h.call(this,j)}i.prototype=Object.create(h.prototype);i.prototype.constructor=i;g.exports=i;i.prototype.start=function(){};i.prototype.stop=function(){this.flush()};i.prototype.flush=function(){};i.prototype.render=function(j){}},{"../managers/WebGLManager":57}],63:[function(f,g,e){function h(i){this.gl=i;this.vertices=new Float32Array([0,0,200,0,200,200,0,200]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.indices=new Uint16Array([0,1,2,0,3,2]);this.vertexBuffer=i.createBuffer();this.indexBuffer=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer);i.bufferData(i.ARRAY_BUFFER,(8+8+16)*4,i.DYNAMIC_DRAW);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer);i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.indices,i.STATIC_DRAW);this.upload()}h.prototype.constructor=h;h.prototype.map=function(k,j){var i=0;var l=0;this.uvs[0]=i;this.uvs[1]=l;this.uvs[2]=i+j.width/k.width;this.uvs[3]=l;this.uvs[4]=i+j.width/k.width;this.uvs[5]=l+j.height/k.height;this.uvs[6]=i;this.uvs[7]=l+j.height/k.height;i=j.x;l=j.y;this.vertices[0]=i;this.vertices[1]=l;this.vertices[2]=i+j.width;this.vertices[3]=l;this.vertices[4]=i+j.width;this.vertices[5]=l+j.height;this.vertices[6]=i;this.vertices[7]=l+j.height;this.upload()};h.prototype.upload=function(){var i=this.gl;i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer);i.bufferSubData(i.ARRAY_BUFFER,0,this.vertices);i.bufferSubData(i.ARRAY_BUFFER,8*4,this.uvs);i.bufferSubData(i.ARRAY_BUFFER,(8+8)*4,this.colors)};g.exports=h},{}],64:[function(i,j,g){var k=i("../../../math"),f=i("../../../utils"),e=i("../../../const"),h=i("./StencilMaskStack");var l=function(s,r,m,q,p,o){this.gl=s;this.frameBuffer=null;this.texture=null;this.size=new k.Rectangle(0,0,1,1);this.resolution=p||e.RESOLUTION;this.projectionMatrix=new k.Matrix();this.transform=null;this.frame=null;this.stencilBuffer=null;this.stencilMaskStack=new h();this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}];this.scaleMode=q||e.SCALE_MODES.DEFAULT;this.root=o;if(!this.root){this.frameBuffer=s.createFramebuffer();this.texture=s.createTexture();s.bindTexture(s.TEXTURE_2D,this.texture);s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,q===e.SCALE_MODES.LINEAR?s.LINEAR:s.NEAREST);s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,q===e.SCALE_MODES.LINEAR?s.LINEAR:s.NEAREST);var n=f.isPowerOfTwo(r,m);if(!n){s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE);s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE)}else{s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT);s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT)}s.bindFramebuffer(s.FRAMEBUFFER,this.frameBuffer);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.texture,0)}this.resize(r,m)};l.prototype.constructor=l;j.exports=l;l.prototype.clear=function(n){var m=this.gl;if(n){m.bindFramebuffer(m.FRAMEBUFFER,this.frameBuffer)}m.clearColor(0,0,0,0);m.clear(m.COLOR_BUFFER_BIT)};l.prototype.attachStencilBuffer=function(){if(this.stencilBuffer){return}if(!this.root){var m=this.gl;this.stencilBuffer=m.createRenderbuffer();m.bindRenderbuffer(m.RENDERBUFFER,this.stencilBuffer);m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,this.stencilBuffer);m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}};l.prototype.activate=function(){var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,this.frameBuffer);var m=this.frame||this.size;this.calculateProjection(m);if(this.transform){this.projectionMatrix.append(this.transform)}n.viewport(0,0,m.width*this.resolution,m.height*this.resolution)};l.prototype.calculateProjection=function(m){var n=this.projectionMatrix;n.identity();if(!this.root){n.a=1/m.width*2;n.d=1/m.height*2;n.tx=-1-m.x*n.a;n.ty=-1-m.y*n.d}else{n.a=1/m.width*2;n.d=-1/m.height*2;n.tx=-1-m.x*n.a;n.ty=1-m.y*n.d}};l.prototype.resize=function(o,m){o=o|0;m=m|0;if(this.size.width===o&&this.size.height===m){return}this.size.width=o;this.size.height=m;if(!this.root){var p=this.gl;p.bindTexture(p.TEXTURE_2D,this.texture);p.texImage2D(p.TEXTURE_2D,0,p.RGBA,o*this.resolution,m*this.resolution,0,p.RGBA,p.UNSIGNED_BYTE,null);if(this.stencilBuffer){p.bindRenderbuffer(p.RENDERBUFFER,this.stencilBuffer);p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_STENCIL,o*this.resolution,m*this.resolution)}}var n=this.frame||this.size;this.calculateProjection(n)};l.prototype.destroy=function(){var m=this.gl;m.deleteFramebuffer(this.frameBuffer);m.deleteTexture(this.texture);this.frameBuffer=null;this.texture=null}},{"../../../const":22,"../../../math":32,"../../../utils":76,"./StencilMaskStack":65}],65:[function(g,h,e){function f(){this.stencilStack=[];this.reverse=true;this.count=0}f.prototype.constructor=f;h.exports=f},{}],66:[function(i,h,l){var m=i("../math"),k=i("../textures/Texture"),j=i("../display/Container"),f=i("../renderers/canvas/utils/CanvasTinter"),n=i("../utils"),o=i("../const"),e=new m.Point();function g(p){j.call(this);this.anchor=new m.Point();this._texture=null;this._width=0;this._height=0;this.tint=16777215;this.blendMode=o.BLEND_MODES.NORMAL;this.shader=null;this.cachedTint=16777215;this.texture=p||k.EMPTY}g.prototype=Object.create(j.prototype);g.prototype.constructor=g;h.exports=g;Object.defineProperties(g.prototype,{width:{get:function(){return this.scale.x*this.texture._frame.width},set:function(p){this.scale.x=p/this.texture._frame.width;this._width=p}},height:{get:function(){return this.scale.y*this.texture._frame.height},set:function(p){this.scale.y=p/this.texture._frame.height;this._height=p}},texture:{get:function(){return this._texture},set:function(p){if(this._texture===p){return}this._texture=p;this.cachedTint=16777215;if(p){if(p.baseTexture.hasLoaded){this._onTextureUpdate()}else{p.once("update",this._onTextureUpdate,this)}}}}});g.prototype._onTextureUpdate=function(){if(this._width){this.scale.x=this._width/this.texture.frame.width}if(this._height){this.scale.y=this._height/this.texture.frame.height}};g.prototype._renderWebGL=function(p){p.setObjectRenderer(p.plugins.sprite);p.plugins.sprite.render(this)};g.prototype.getBounds=function(C){if(!this._currentBounds){var z=this._texture._frame.width;var y=this._texture._frame.height;var x=z*(1-this.anchor.x);var w=z*-this.anchor.x;var v=y*(1-this.anchor.y);var u=y*-this.anchor.y;var A=C||this.worldTransform;var P=A.a;var N=A.b;var L=A.c;var I=A.d;var Q=A.tx;var O=A.ty;var M,K,J,G;if(N===0&&L===0){if(P<0){P*=-1}if(I<0){I*=-1}M=P*w+Q;K=P*x+Q;J=I*u+O;G=I*v+O}else{var F=P*w+L*u+Q;var s=I*u+N*w+O;var E=P*x+L*u+Q;var r=I*u+N*x+O;var D=P*x+L*v+Q;var q=I*v+N*x+O;var B=P*w+L*v+Q;var p=I*v+N*w+O;M=F;M=E<M?E:M;M=D<M?D:M;M=B<M?B:M;J=s;J=r<J?r:J;J=q<J?q:J;J=p<J?p:J;K=F;K=E>K?E:K;K=D>K?D:K;K=B>K?B:K;G=s;G=r>G?r:G;G=q>G?q:G;G=p>G?p:G}if(this.children.length){var H=this.containerGetBounds();x=H.x;w=H.x+H.width;v=H.y;u=H.y+H.height;M=(M<x)?M:x;J=(J<v)?J:v;K=(K>w)?K:w;G=(G>u)?G:u}var t=this._bounds;t.x=M;t.width=K-M;t.y=J;t.height=G-J;this._currentBounds=t}return this._currentBounds};g.prototype.getLocalBounds=function(){this._bounds.x=-this._texture._frame.width*this.anchor.x;this._bounds.y=-this._texture._frame.height*this.anchor.y;this._bounds.width=this._texture._frame.width;this._bounds.height=this._texture._frame.height;return this._bounds};g.prototype.containsPoint=function(q){this.worldTransform.applyInverse(q,e);var t=this._texture._frame.width;var p=this._texture._frame.height;var r=-t*this.anchor.x;var s;if(e.x>r&&e.x<r+t){s=-p*this.anchor.y;if(e.y>s&&e.y<s+p){return true}}return false};g.prototype._renderCanvas=function(s){if(this.texture.crop.width<=0||this.texture.crop.height<=0){return}if(this.blendMode!==s.currentBlendMode){s.currentBlendMode=this.blendMode;s.context.globalCompositeOperation=s.blendModes[s.currentBlendMode]}if(this.texture.valid){var t=this._texture,r=this.worldTransform,y,x,p,w;s.context.globalAlpha=this.worldAlpha;if(s.smoothProperty&&s.currentScaleMode!==t.baseTexture.scaleMode){s.currentScaleMode=t.baseTexture.scaleMode;s.context[s.smoothProperty]=(s.currentScaleMode===o.SCALE_MODES.LINEAR)}if(t.rotate){var v=r.a;var u=r.b;r.a=-r.c;r.b=-r.d;r.c=v;r.d=u;p=t.crop.height;w=t.crop.width;y=(t.trim)?t.trim.y-this.anchor.y*t.trim.height:this.anchor.y*-t._frame.height;x=(t.trim)?t.trim.x-this.anchor.x*t.trim.width:this.anchor.x*-t._frame.width}else{p=t.crop.width;w=t.crop.height;y=(t.trim)?t.trim.x-this.anchor.x*t.trim.width:this.anchor.x*-t._frame.width;x=(t.trim)?t.trim.y-this.anchor.y*t.trim.height:this.anchor.y*-t._frame.height}if(s.roundPixels){s.context.setTransform(r.a,r.b,r.c,r.d,(r.tx*s.resolution)|0,(r.ty*s.resolution)|0);y=y|0;x=x|0}else{s.context.setTransform(r.a,r.b,r.c,r.d,r.tx*s.resolution,r.ty*s.resolution)}var q=t.baseTexture.resolution;if(this.tint!==16777215){if(this.cachedTint!==this.tint){this.cachedTint=this.tint;this.tintedTexture=f.getTintedTexture(this,this.tint)}s.context.drawImage(this.tintedTexture,0,0,p*q,w*q,y*s.resolution,x*s.resolution,p*s.resolution,w*s.resolution)}else{s.context.drawImage(t.baseTexture.source,t.crop.x*q,t.crop.y*q,p*q,w*q,y*s.resolution,x*s.resolution,p*s.resolution,w*s.resolution)}}};g.prototype.destroy=function(p,q){j.prototype.destroy.call(this);this.anchor=null;if(p){this._texture.destroy(q)}this._texture=null;this.shader=null};g.fromFrame=function(q){var p=n.TextureCache[q];if(!p){throw new Error('The frameId "'+q+'" does not exist in the texture cache')}return new g(p)};g.fromImage=function(q,p,r){return new g(k.fromImage(q,p,r))}},{"../const":22,"../display/Container":23,"../math":32,"../renderers/canvas/utils/CanvasTinter":47,"../textures/Texture":71,"../utils":76}],67:[function(h,i,g){var k=h("../../renderers/webgl/utils/ObjectRenderer"),f=h("../../renderers/webgl/WebGLRenderer"),e=h("../../const");function j(o){k.call(this,o);this.vertSize=5;this.vertByteSize=this.vertSize*4;this.size=e.SPRITE_BATCH_SIZE;var l=(this.size*4)*this.vertByteSize;var p=this.size*6;this.vertices=new ArrayBuffer(l);this.positions=new Float32Array(this.vertices);this.colors=new Uint32Array(this.vertices);this.indices=new Uint16Array(p);for(var n=0,m=0;n<p;n+=6,m+=4){this.indices[n+0]=m+0;this.indices[n+1]=m+1;this.indices[n+2]=m+2;this.indices[n+3]=m+0;this.indices[n+4]=m+2;this.indices[n+5]=m+3}this.currentBatchSize=0;this.sprites=[];this.shader=null}j.prototype=Object.create(k.prototype);j.prototype.constructor=j;i.exports=j;f.registerPlugin("sprite",j);j.prototype.onContextChange=function(){var l=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader;this.vertexBuffer=l.createBuffer();this.indexBuffer=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.indexBuffer);l.bufferData(l.ELEMENT_ARRAY_BUFFER,this.indices,l.STATIC_DRAW);l.bindBuffer(l.ARRAY_BUFFER,this.vertexBuffer);l.bufferData(l.ARRAY_BUFFER,this.vertices,l.DYNAMIC_DRAW);this.currentBlendMode=99999};j.prototype.render=function(x){var w=x._texture;if(this.currentBatchSize>=this.size){this.flush()}var t=w._uvs;if(!t){return}var m=x.anchor.x;var l=x.anchor.y;var v,u,r,q;if(w.trim){var z=w.trim;u=z.x-m*z.width;v=u+w.crop.width;q=z.y-l*z.height;r=q+w.crop.height}else{v=(w._frame.width)*(1-m);u=(w._frame.width)*-m;r=w._frame.height*(1-l);q=w._frame.height*-l}var n=this.currentBatchSize*this.vertByteSize;var y=x.worldTransform;var E=y.a;var D=y.b;var B=y.c;var A=y.d;var F=y.tx;var C=y.ty;var s=this.colors;var p=this.positions;if(this.renderer.roundPixels){p[n]=E*u+B*q+F|0;p[n+1]=A*q+D*u+C|0;p[n+5]=E*v+B*q+F|0;p[n+6]=A*q+D*v+C|0;p[n+10]=E*v+B*r+F|0;p[n+11]=A*r+D*v+C|0;p[n+15]=E*u+B*r+F|0;p[n+16]=A*r+D*u+C|0}else{p[n]=E*u+B*q+F;p[n+1]=A*q+D*u+C;p[n+5]=E*v+B*q+F;p[n+6]=A*q+D*v+C;p[n+10]=E*v+B*r+F;p[n+11]=A*r+D*v+C;p[n+15]=E*u+B*r+F;p[n+16]=A*r+D*u+C}p[n+2]=t.x0;p[n+3]=t.y0;p[n+7]=t.x1;p[n+8]=t.y1;p[n+12]=t.x2;p[n+13]=t.y2;p[n+17]=t.x3;p[n+18]=t.y3;var o=x.tint;s[n+4]=s[n+9]=s[n+14]=s[n+19]=(o>>16)+(o&65280)+((o&255)<<16)+(x.worldAlpha*255<<24);this.sprites[this.currentBatchSize++]=x};j.prototype.flush=function(){if(this.currentBatchSize===0){return}var t=this.renderer.gl;var v;if(this.currentBatchSize>(this.size*0.5)){t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices)}else{var x=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);t.bufferSubData(t.ARRAY_BUFFER,0,x)}var A,p,l;var w=0;var n=0;var u=null;var o=this.renderer.blendModeManager.currentBlendMode;var m=null;var s=false;var y=false;var z;for(var r=0,q=this.currentBatchSize;r<q;r++){z=this.sprites[r];A=z._texture.baseTexture;p=z.blendMode;l=z.shader||this.shader;s=o!==p;y=m!==l;if(u!==A||s||y){this.renderBatch(u,w,n);n=r;w=0;u=A;if(s){o=p;this.renderer.blendModeManager.setBlendMode(o)}if(y){m=l;v=m.shaders?m.shaders[t.id]:m;if(!v){v=m.getShader(this.renderer)}this.renderer.shaderManager.setShader(v);v.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(true);v.syncUniforms();t.activeTexture(t.TEXTURE0)}}w++}this.renderBatch(u,w,n);this.currentBatchSize=0};j.prototype.renderBatch=function(m,l,o){if(l===0){return}var n=this.renderer.gl;if(!m._glTextures[n.id]){this.renderer.updateTexture(m)}else{n.bindTexture(n.TEXTURE_2D,m._glTextures[n.id])}n.drawElements(n.TRIANGLES,l*6,n.UNSIGNED_SHORT,o*6*2);this.renderer.drawCount++};j.prototype.start=function(){var m=this.renderer.gl;m.bindBuffer(m.ARRAY_BUFFER,this.vertexBuffer);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var l=this.vertByteSize;m.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,m.FLOAT,false,l,0);m.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,m.FLOAT,false,l,2*4);m.vertexAttribPointer(this.shader.attributes.aColor,4,m.UNSIGNED_BYTE,true,l,4*4)};j.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer);this.renderer.gl.deleteBuffer(this.indexBuffer);this.shader.destroy();this.renderer=null;this.vertices=null;this.positions=null;this.colors=null;this.indices=null;this.vertexBuffer=null;this.indexBuffer=null;this.sprites=null;this.shader=null}},{"../../const":22,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62}],68:[function(h,f,j){var e=h("../sprites/Sprite"),i=h("../textures/Texture"),k=h("../math"),l=h("../utils"),m=h("../const");function g(q,o,n){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=n||m.RESOLUTION;this._text=null;this._style=null;var p=i.fromCanvas(this.canvas);p.trim=new k.Rectangle();e.call(this,p);this.text=q;this.style=o}g.prototype=Object.create(e.prototype);g.prototype.constructor=g;f.exports=g;g.fontPropertiesCache={};g.fontPropertiesCanvas=document.createElement("canvas");g.fontPropertiesContext=g.fontPropertiesCanvas.getContext("2d");Object.defineProperties(g.prototype,{width:{get:function(){if(this.dirty){this.updateText()}return this.scale.x*this._texture._frame.width},set:function(n){this.scale.x=n/this._texture._frame.width;this._width=n}},height:{get:function(){if(this.dirty){this.updateText()}return this.scale.y*this._texture._frame.height},set:function(n){this.scale.y=n/this._texture._frame.height;this._height=n}},style:{get:function(){return this._style},set:function(n){n=n||{};if(typeof n.fill==="number"){n.fill=l.hex2string(n.fill)}if(typeof n.stroke==="number"){n.stroke=l.hex2string(n.stroke)}if(typeof n.dropShadowColor==="number"){n.dropShadowColor=l.hex2string(n.dropShadowColor)}n.font=n.font||"bold 20pt Arial";n.fill=n.fill||"black";n.align=n.align||"left";n.stroke=n.stroke||"black";n.strokeThickness=n.strokeThickness||0;n.wordWrap=n.wordWrap||false;n.wordWrapWidth=n.wordWrapWidth||100;n.dropShadow=n.dropShadow||false;n.dropShadowColor=n.dropShadowColor||"#000000";n.dropShadowAngle=n.dropShadowAngle||Math.PI/6;n.dropShadowDistance=n.dropShadowDistance||5;n.padding=n.padding||0;n.textBaseline=n.textBaseline||"alphabetic";n.lineJoin=n.lineJoin||"miter";n.miterLimit=n.miterLimit||10;this._style=n;this.dirty=true}},text:{get:function(){return this._text},set:function(n){n=n.toString()||" ";if(this._text===n){return}this._text=n;this.dirty=true}}});g.prototype.updateText=function(){var o=this._style;this.context.font=o.font;var u=o.wordWrap?this.wordWrap(this._text):this._text;var A=u.split(/(?:\r\n|\r|\n)/);var t=new Array(A.length);var B=0;var r=this.determineFontProperties(o.font);for(var v=0;v<A.length;v++){var w=this.context.measureText(A[v]).width;t[v]=w;B=Math.max(B,w)}var q=B+o.strokeThickness;if(o.dropShadow){q+=o.dropShadowDistance}this.canvas.width=(q+this.context.lineWidth)*this.resolution;var y=this.style.lineHeight||r.fontSize+o.strokeThickness;var z=y*A.length;if(o.dropShadow){z+=o.dropShadowDistance}this.canvas.height=(z+this._style.padding*2)*this.resolution;this.context.scale(this.resolution,this.resolution);if(navigator.isCocoonJS){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}this.context.font=o.font;this.context.strokeStyle=o.stroke;this.context.lineWidth=o.strokeThickness;this.context.textBaseline=o.textBaseline;this.context.lineJoin=o.lineJoin;this.context.miterLimit=o.miterLimit;var s;var p;if(o.dropShadow){this.context.fillStyle=o.dropShadowColor;var x=Math.cos(o.dropShadowAngle)*o.dropShadowDistance;var n=Math.sin(o.dropShadowAngle)*o.dropShadowDistance;for(v=0;v<A.length;v++){s=o.strokeThickness/2;p=(o.strokeThickness/2+v*y)+r.ascent;if(o.align==="right"){s+=B-t[v]}else{if(o.align==="center"){s+=(B-t[v])/2}}if(o.fill){this.context.fillText(A[v],s+x,p+n+this._style.padding)}}}this.context.fillStyle=o.fill;for(v=0;v<A.length;v++){s=o.strokeThickness/2;p=(o.strokeThickness/2+v*y)+r.ascent;if(o.align==="right"){s+=B-t[v]}else{if(o.align==="center"){s+=(B-t[v])/2}}if(o.stroke&&o.strokeThickness){this.context.strokeText(A[v],s,p+this._style.padding)}if(o.fill){this.context.fillText(A[v],s,p+this._style.padding)}}this.updateTexture()};g.prototype.updateTexture=function(){var n=this._texture;n.baseTexture.hasLoaded=true;n.baseTexture.resolution=this.resolution;n.baseTexture.width=this.canvas.width/this.resolution;n.baseTexture.height=this.canvas.height/this.resolution;n.crop.width=n._frame.width=this.canvas.width/this.resolution;n.crop.height=n._frame.height=this.canvas.height/this.resolution;n.trim.x=0;n.trim.y=-this._style.padding;n.trim.width=n._frame.width;n.trim.height=n._frame.height-this._style.padding*2;this._width=this.canvas.width/this.resolution;this._height=this.canvas.height/this.resolution;n.baseTexture.emit("update",n.baseTexture);this.dirty=false};g.prototype.renderWebGL=function(n){if(this.dirty){this.updateText()}e.prototype.renderWebGL.call(this,n)};g.prototype._renderCanvas=function(n){if(this.dirty){this.updateText()}e.prototype._renderCanvas.call(this,n)};g.prototype.determineFontProperties=function(s){var v=g.fontPropertiesCache[s];if(!v){v={};var p=g.fontPropertiesCanvas;var o=g.fontPropertiesContext;o.font=s;var n=Math.ceil(o.measureText("|MÉq").width);var u=Math.ceil(o.measureText("M").width);var z=2*u;u=u*1.4|0;p.width=n;p.height=z;o.fillStyle="#f00";o.fillRect(0,0,n,z);o.font=s;o.textBaseline="alphabetic";o.fillStyle="#000";o.fillText("|MÉq",0,u);var w=o.getImageData(0,0,n,z).data;var q=w.length;var A=n*4;var t,r;var y=0;var x=false;for(t=0;t<u;t++){for(r=0;r<A;r+=4){if(w[y+r]!==255){x=true;break}}if(!x){y+=A}else{break}}v.ascent=u-t;y=q-A;x=false;for(t=z;t>u;t--){for(r=0;r<A;r+=4){if(w[y+r]!==255){x=true;break}}if(!x){y-=A}else{break}}v.descent=t-u;v.fontSize=v.ascent+v.descent;g.fontPropertiesCache[s]=v}return v};g.prototype.wordWrap=function(t){var w="";var v=t.split("\n");var n=this._style.wordWrapWidth;for(var q=0;q<v.length;q++){var p=n;var s=v[q].split(" ");for(var o=0;o<s.length;o++){var u=this.context.measureText(s[o]).width;var r=u+this.context.measureText(" ").width;if(o===0||r>p){if(o>0){w+="\n"}w+=s[o];p=n-u}else{p-=r;w+=" "+s[o]}}if(q<v.length-1){w+="\n"}}return w};g.prototype.getBounds=function(n){if(this.dirty){this.updateText()}return e.prototype.getBounds.call(this,n)};g.prototype.destroy=function(n){this.context=null;this.canvas=null;this._style=null;this._texture.destroy(n===undefined?true:n)}},{"../const":22,"../math":32,"../sprites/Sprite":66,"../textures/Texture":71,"../utils":76}],69:[function(h,i,g){var f=h("../utils"),e=h("../const"),j=h("eventemitter3");function k(n,m,l){j.call(this);this.uid=f.uid();this.resolution=l||1;this.width=100;this.height=100;this.realWidth=100;this.realHeight=100;this.scaleMode=m||e.SCALE_MODES.DEFAULT;this.hasLoaded=false;this.isLoading=false;this.source=null;this.premultipliedAlpha=true;this.imageUrl=null;this.isPowerOfTwo=false;this.mipmap=false;this._glTextures=[];if(n){this.loadSource(n)}}k.prototype=Object.create(j.prototype);k.prototype.constructor=k;i.exports=k;k.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width;this.realHeight=this.source.naturalHeight||this.source.height;this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=f.isPowerOfTwo(this.realWidth,this.realHeight);this.emit("update",this)};k.prototype.loadSource=function(n){var m=this.isLoading;this.hasLoaded=false;this.isLoading=false;if(m&&this.source){this.source.onload=null;this.source.onerror=null}this.source=n;if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height){this._sourceLoaded()}else{if(!n.getContext){this.isLoading=true;var l=this;n.onload=function(){n.onload=null;n.onerror=null;if(!l.isLoading){return}l.isLoading=false;l._sourceLoaded();l.emit("loaded",l)};n.onerror=function(){n.onload=null;n.onerror=null;if(!l.isLoading){return}l.isLoading=false;l.emit("error",l)};if(n.complete&&n.src){this.isLoading=false;n.onload=null;n.onerror=null;if(n.width&&n.height){this._sourceLoaded();if(m){this.emit("loaded",this)}}else{if(m){this.emit("error",this)}}}}}};k.prototype._sourceLoaded=function(){this.hasLoaded=true;this.update()};k.prototype.destroy=function(){if(this.imageUrl){delete f.BaseTextureCache[this.imageUrl];delete f.TextureCache[this.imageUrl];this.imageUrl=null;if(!navigator.isCocoonJS){this.source.src=""}}else{if(this.source&&this.source._pixiId){delete f.BaseTextureCache[this.source._pixiId]}}this.source=null;this.dispose()};k.prototype.dispose=function(){this.emit("dispose",this);this._glTextures.length=0};k.prototype.updateSourceImage=function(l){this.source.src=l;this.loadSource(this.source)};k.fromImage=function(m,l,n){var o=f.BaseTextureCache[m];if(l===undefined&&m.indexOf("data:")!==0){l=true}if(!o){var p=new Image();if(l){p.crossOrigin=""}o=new k(p,n);o.imageUrl=m;p.src=m;f.BaseTextureCache[m]=o;o.resolution=f.getResolutionOfUrl(m)}return o};k.fromCanvas=function(l,m){if(!l._pixiId){l._pixiId="canvas_"+f.uid()}var n=f.BaseTextureCache[l._pixiId];if(!n){n=new k(l,m);f.BaseTextureCache[l._pixiId]=n}return n}},{"../const":22,"../utils":76,eventemitter3:11}],70:[function(g,f,i){var k=g("./BaseTexture"),h=g("./Texture"),e=g("../renderers/webgl/utils/RenderTarget"),l=g("../renderers/webgl/managers/FilterManager"),n=g("../renderers/canvas/utils/CanvasBuffer"),o=g("../math"),p=g("../const"),m=new o.Matrix();function j(v,t,q,s,r){if(!v){throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.")}t=t||100;q=q||100;r=r||p.RESOLUTION;var u=new k();u.width=t;u.height=q;u.resolution=r;u.scaleMode=s||p.SCALE_MODES.DEFAULT;u.hasLoaded=true;h.call(this,u,new o.Rectangle(0,0,t,q));this.width=t;this.height=q;this.resolution=r;this.render=null;this.renderer=v;if(this.renderer.type===p.RENDERER_TYPE.WEBGL){var w=this.renderer.gl;this.textureBuffer=new e(w,this.width,this.height,u.scaleMode,this.resolution);this.baseTexture._glTextures[w.id]=this.textureBuffer.texture;this.filterManager=new l(this.renderer);this.filterManager.onContextChange();this.filterManager.resize(t,q);this.render=this.renderWebGL;this.renderer.currentRenderer.start();this.renderer.currentRenderTarget.activate()}else{this.render=this.renderCanvas;this.textureBuffer=new n(this.width*this.resolution,this.height*this.resolution);this.baseTexture.source=this.textureBuffer.canvas}this.valid=true;this._updateUvs()}j.prototype=Object.create(h.prototype);j.prototype.constructor=j;f.exports=j;j.prototype.resize=function(s,q,r){if(s===this.width&&q===this.height){return}this.valid=(s>0&&q>0);this.width=this._frame.width=this.crop.width=s;this.height=this._frame.height=this.crop.height=q;if(r){this.baseTexture.width=this.width;this.baseTexture.height=this.height}if(!this.valid){return}this.textureBuffer.resize(this.width,this.height);if(this.filterManager){this.filterManager.resize(this.width,this.height)}};j.prototype.clear=function(){if(!this.valid){return}if(this.renderer.type===p.RENDERER_TYPE.WEBGL){this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer)}this.textureBuffer.clear()};j.prototype.renderWebGL=function(x,s,q,w){if(!this.valid){return}w=(w!==undefined)?w:true;this.textureBuffer.transform=s;this.textureBuffer.activate();x.worldAlpha=1;if(w){x.worldTransform.identity();x.currentBounds=null;var v=x.children;var u,t;for(u=0,t=v.length;u<t;++u){v[u].updateTransform()}}var r=this.renderer.filterManager;this.renderer.filterManager=this.filterManager;this.renderer.renderDisplayObject(x,this.textureBuffer,q);this.renderer.filterManager=r};j.prototype.renderCanvas=function(y,A,w,t){if(!this.valid){return}t=!!t;var r=y.worldTransform;var x=m;x.identity();if(A){x.append(A)}y.worldTransform=x;y.worldAlpha=1;var s=y.children;var v,u;for(v=0,u=s.length;v<u;++v){s[v].updateTransform()}if(w){this.textureBuffer.clear()}y.worldTransform=r;var q=this.textureBuffer.context;var z=this.renderer.resolution;this.renderer.resolution=this.resolution;this.renderer.renderDisplayObject(y,q);this.renderer.resolution=z};j.prototype.destroy=function(){h.prototype.destroy.call(this,true);this.textureBuffer.destroy();if(this.filterManager){this.filterManager.destroy()}this.renderer=null};j.prototype.getImage=function(){var q=new Image();q.src=this.getBase64();return q};j.prototype.getBase64=function(){return this.getCanvas().toDataURL()};j.prototype.getCanvas=function(){if(this.renderer.type===p.RENDERER_TYPE.WEBGL){var v=this.renderer.gl;var t=this.textureBuffer.size.width;var q=this.textureBuffer.size.height;var r=new Uint8Array(4*t*q);v.bindFramebuffer(v.FRAMEBUFFER,this.textureBuffer.frameBuffer);v.readPixels(0,0,t,q,v.RGBA,v.UNSIGNED_BYTE,r);v.bindFramebuffer(v.FRAMEBUFFER,null);var u=new n(t,q);var s=u.context.getImageData(0,0,t,q);s.data.set(r);u.context.putImageData(s,0,0);return u.canvas}else{return this.textureBuffer.canvas}};j.prototype.getPixels=function(){var s,q;if(this.renderer.type===p.RENDERER_TYPE.WEBGL){var t=this.renderer.gl;s=this.textureBuffer.size.width;q=this.textureBuffer.size.height;var r=new Uint8Array(4*s*q);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer);t.readPixels(0,0,s,q,t.RGBA,t.UNSIGNED_BYTE,r);t.bindFramebuffer(t.FRAMEBUFFER,null);return r}else{s=this.textureBuffer.canvas.width;q=this.textureBuffer.canvas.height;return this.textureBuffer.canvas.getContext("2d").getImageData(0,0,s,q).data}};j.prototype.getPixel=function(q,t){if(this.renderer.type===p.RENDERER_TYPE.WEBGL){var s=this.renderer.gl;var r=new Uint8Array(4);s.bindFramebuffer(s.FRAMEBUFFER,this.textureBuffer.frameBuffer);s.readPixels(q,t,1,1,s.RGBA,s.UNSIGNED_BYTE,r);s.bindFramebuffer(s.FRAMEBUFFER,null);return r}else{return this.textureBuffer.canvas.getContext("2d").getImageData(q,t,1,1).data}}},{"../const":22,"../math":32,"../renderers/canvas/utils/CanvasBuffer":44,"../renderers/webgl/managers/FilterManager":53,"../renderers/webgl/utils/RenderTarget":64,"./BaseTexture":69,"./Texture":71}],71:[function(f,e,h){var i=f("./BaseTexture"),m=f("./VideoBaseTexture"),j=f("./TextureUvs"),n=f("eventemitter3"),k=f("../math"),l=f("../utils");function g(r,s,q,o,p){n.call(this);this.noFrame=false;if(!s){this.noFrame=true;s=new k.Rectangle(0,0,1,1)}if(r instanceof g){r=r.baseTexture}this.baseTexture=r;this._frame=s;this.trim=o;this.valid=false;this.requiresUpdate=false;this._uvs=null;this.width=0;this.height=0;this.crop=q||s;this.rotate=!!p;if(r.hasLoaded){if(this.noFrame){s=new k.Rectangle(0,0,r.width,r.height);r.on("update",this.onBaseTextureUpdated,this)}this.frame=s}else{r.once("loaded",this.onBaseTextureLoaded,this)}}g.prototype=Object.create(n.prototype);g.prototype.constructor=g;e.exports=g;Object.defineProperties(g.prototype,{frame:{get:function(){return this._frame},set:function(o){this._frame=o;this.noFrame=false;this.width=o.width;this.height=o.height;if(!this.trim&&!this.rotate&&(o.x+o.width>this.baseTexture.width||o.y+o.height>this.baseTexture.height)){throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this)}this.valid=o&&o.width&&o.height&&this.baseTexture.hasLoaded;if(this.trim){this.width=this.trim.width;this.height=this.trim.height;this._frame.width=this.trim.width;this._frame.height=this.trim.height}else{this.crop=o}if(this.valid){this._updateUvs()}}}});g.prototype.update=function(){this.baseTexture.update()};g.prototype.onBaseTextureLoaded=function(o){if(this.noFrame){this.frame=new k.Rectangle(0,0,o.width,o.height)}else{this.frame=this._frame}this.emit("update",this)};g.prototype.onBaseTextureUpdated=function(o){this._frame.width=o.width;this._frame.height=o.height;this.emit("update",this)};g.prototype.destroy=function(o){if(this.baseTexture){if(o){this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this);this.baseTexture.off("loaded",this.onBaseTextureLoaded,this);this.baseTexture=null}this._frame=null;this._uvs=null;this.trim=null;this.crop=null;this.valid=false};g.prototype.clone=function(){return new g(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)};g.prototype._updateUvs=function(){if(!this._uvs){this._uvs=new j()}this._uvs.set(this.crop,this.baseTexture,this.rotate)};g.fromImage=function(p,o,q){var r=l.TextureCache[p];if(!r){r=new g(i.fromImage(p,o,q));l.TextureCache[p]=r}return r};g.fromFrame=function(p){var o=l.TextureCache[p];if(!o){throw new Error('The frameId "'+p+'" does not exist in the texture cache')}return o};g.fromCanvas=function(o,p){return new g(i.fromCanvas(o,p))};g.fromVideo=function(p,o){if(typeof p==="string"){return g.fromVideoUrl(p,o)}else{return new g(m.fromVideo(p,o))}};g.fromVideoUrl=function(p,o){return new g(m.fromUrl(p,o))};g.addTextureToCache=function(o,p){l.TextureCache[p]=o};g.removeTextureFromCache=function(p){var o=l.TextureCache[p];delete l.TextureCache[p];delete l.BaseTextureCache[p];return o};g.EMPTY=new g(new i())},{"../math":32,"../utils":76,"./BaseTexture":69,"./TextureUvs":72,"./VideoBaseTexture":73,eventemitter3:11}],72:[function(f,g,e){function h(){this.x0=0;this.y0=0;this.x1=1;this.y1=0;this.x2=1;this.y2=1;this.x3=0;this.y3=1}g.exports=h;h.prototype.set=function(m,l,j){var i=l.width;var k=l.height;if(j){this.x0=(m.x+m.height)/i;this.y0=m.y/k;this.x1=(m.x+m.height)/i;this.y1=(m.y+m.width)/k;this.x2=m.x/i;this.y2=(m.y+m.width)/k;this.x3=m.x/i;this.y3=m.y/k}else{this.x0=m.x/i;this.y0=m.y/k;this.x1=(m.x+m.width)/i;this.y1=m.y/k;this.x2=(m.x+m.width)/i;this.y2=(m.y+m.height)/k;this.x3=m.x/i;this.y3=(m.y+m.height)/k}}},{}],73:[function(h,i,g){var k=h("./BaseTexture"),f=h("../utils");function e(m,l){if(!m){throw new Error("No video source element specified.")}if((m.readyState===m.HAVE_ENOUGH_DATA||m.readyState===m.HAVE_FUTURE_DATA)&&m.width&&m.height){m.complete=true}k.call(this,m,l);this.autoUpdate=false;this._onUpdate=this._onUpdate.bind(this);this._onCanPlay=this._onCanPlay.bind(this);if(!m.complete){m.addEventListener("canplay",this._onCanPlay);m.addEventListener("canplaythrough",this._onCanPlay);m.addEventListener("play",this._onPlayStart.bind(this));m.addEventListener("pause",this._onPlayStop.bind(this))}this.__loaded=false}e.prototype=Object.create(k.prototype);e.prototype.constructor=e;i.exports=e;e.prototype._onUpdate=function(){if(this.autoUpdate){window.requestAnimationFrame(this._onUpdate);this.update()}};e.prototype._onPlayStart=function(){if(!this.autoUpdate){window.requestAnimationFrame(this._onUpdate);this.autoUpdate=true}};e.prototype._onPlayStop=function(){this.autoUpdate=false};e.prototype._onCanPlay=function(){this.hasLoaded=true;if(this.source){this.source.removeEventListener("canplay",this._onCanPlay);this.source.removeEventListener("canplaythrough",this._onCanPlay);this.width=this.source.videoWidth;this.height=this.source.videoHeight;this.source.play();if(!this.__loaded){this.__loaded=true;this.emit("loaded",this)}}};e.prototype.destroy=function(){if(this.source&&this.source._pixiId){delete f.BaseTextureCache[this.source._pixiId];delete this.source._pixiId}k.prototype.destroy.call(this)};e.fromVideo=function(n,l){if(!n._pixiId){n._pixiId="video_"+f.uid()}var m=f.BaseTextureCache[n._pixiId];if(!m){m=new e(n,l);f.BaseTextureCache[n._pixiId]=m}return m};e.fromUrl=function(l,n){var o=document.createElement("video");if(Array.isArray(l)){for(var m=0;m<l.length;++m){o.appendChild(j(l.src||l,l.mime))}}else{o.appendChild(j(l.src||l,l.mime))}o.load();o.play();return e.fromVideo(o,n)};e.fromUrls=e.fromUrl;function j(n,l){if(!l){l="video/"+n.substr(n.lastIndexOf(".")+1)}var m=document.createElement("source");m.src=n;m.type=l;return m}},{"../utils":76,"./BaseTexture":69}],74:[function(j,h,m){var t=j("../const"),s=j("eventemitter3"),l="tick";function e(){var v=this;this._tick=function u(w){v._requestId=null;if(v.started){v.update(w);if(v.started&&v._requestId===null&&v._emitter.listeners(l,true)){v._requestId=requestAnimationFrame(v._tick)}}};this._emitter=new s();this._requestId=null;this._maxElapsedMS=100;this.autoStart=false;this.deltaTime=1;this.elapsedMS=1/t.TARGET_FPMS;this.lastTime=0;this.speed=1;this.started=false}Object.defineProperties(e.prototype,{FPS:{get:function(){return 1000/this.elapsedMS}},minFPS:{get:function(){return 1000/this._maxElapsedMS},set:function(u){var v=Math.min(Math.max(0,u)/1000,t.TARGET_FPMS);this._maxElapsedMS=1/v}}});e.prototype._requestIfNeeded=function r(){if(this._requestId===null&&this._emitter.listeners(l,true)){this.lastTime=performance.now();this._requestId=requestAnimationFrame(this._tick)}};e.prototype._cancelIfNeeded=function i(){if(this._requestId!==null){cancelAnimationFrame(this._requestId);this._requestId=null}};e.prototype._startIfPossible=function q(){if(this.started){this._requestIfNeeded()}else{if(this.autoStart){this.start()}}};e.prototype.add=function p(v,u){this._emitter.on(l,v,u);this._startIfPossible();return this};e.prototype.addOnce=function f(v,u){this._emitter.once(l,v,u);this._startIfPossible();return this};e.prototype.remove=function n(v,u){this._emitter.off(l,v,u);if(!this._emitter.listeners(l,true)){this._cancelIfNeeded()}return this};e.prototype.start=function g(){if(!this.started){this.started=true;this._requestIfNeeded()}};e.prototype.stop=function o(){if(this.started){this.started=false;this._cancelIfNeeded()}};e.prototype.update=function k(v){var u;v=v||performance.now();u=this.elapsedMS=v-this.lastTime;if(u>this._maxElapsedMS){u=this._maxElapsedMS}this.deltaTime=u*t.TARGET_FPMS*this.speed;this._emitter.emit(l,this.deltaTime);this.lastTime=v};h.exports=e},{"../const":22,eventemitter3:11}],75:[function(f,g,e){var i=f("./Ticker");var h=new i();h.autoStart=true;g.exports={shared:h,Ticker:i}},{"./Ticker":74}],76:[function(h,i,g){var e=h("../const");var f=i.exports={_uid:0,_saidHello:false,pluginTarget:h("./pluginTarget"),async:h("async"),uid:function(){return ++f._uid},hex2rgb:function(k,j){j=j||[];j[0]=(k>>16&255)/255;j[1]=(k>>8&255)/255;j[2]=(k&255)/255;return j},hex2string:function(j){j=j.toString(16);j="000000".substr(0,6-j.length)+j;return"#"+j},rgb2hex:function(j){return((j[0]*255<<16)+(j[1]*255<<8)+j[2]*255)},canUseNewCanvasBlendModes:function(){if(typeof document==="undefined"){return false}var k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/";var o="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";var j=new Image();j.src=k+"AP804Oa6"+o;var p=new Image();p.src=k+"/wCKxvRF"+o;var l=document.createElement("canvas");l.width=6;l.height=1;var m=l.getContext("2d");m.globalCompositeOperation="multiply";m.drawImage(j,0,0);m.drawImage(p,2,0);var n=m.getImageData(2,0,1,1).data;return(n[0]===255&&n[1]===0&&n[2]===0)},getNextPowerOfTwo:function(k){if(k>0&&(k&(k-1))===0){return k}else{var j=1;while(j<k){j<<=1}return j}},isPowerOfTwo:function(k,j){return(k>0&&(k&(k-1))===0&&j>0&&(j&(j-1))===0)},getResolutionOfUrl:function(k){var j=e.RETINA_PREFIX.exec(k);if(j){return parseFloat(j[1])}return 1},sayHello:function(k){if(f._saidHello){return}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var j=["\n %c %c %c Pixi.js "+e.VERSION+" - ✰ "+k+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,j)}else{if(window.console){window.console.log("Pixi.js "+e.VERSION+" - "+k+" - http://www.pixijs.com/")}}f._saidHello=true},isWebGLSupported:function(){var j={stencil:true};try{if(!window.WebGLRenderingContext){return false}var k=document.createElement("canvas"),m=k.getContext("webgl",j)||k.getContext("experimental-webgl",j);return !!(m&&m.getContextAttributes().stencil)}catch(l){return false}},TextureCache:{},BaseTextureCache:{}}},{"../const":22,"./pluginTarget":77,async:2}],77:[function(h,i,g){function e(j){j.__plugins={};j.registerPlugin=function(l,k){j.__plugins[l]=k};j.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var k in j.__plugins){this.plugins[k]=new (j.__plugins[k])(this)}};j.prototype.destroyPlugins=function(){for(var k in this.plugins){this.plugins[k].destroy();this.plugins[k]=null}this.plugins=null}}i.exports={mixin:function f(j){e(j)}}},{}],78:[function(g,h,f){var e=g("./core"),k=g("./mesh"),i=g("./extras"),j=g("./filters");e.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")};e.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")};Object.defineProperties(e,{Stage:{get:function(){console.warn("You do not need to use a PIXI Stage any more, you can simply render any container.");return e.Container}},DisplayObjectContainer:{get:function(){console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return e.Container}},Strip:{get:function(){console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.");return k.Mesh}},Rope:{get:function(){console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.");return k.Rope}},MovieClip:{get:function(){console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on.");return i.MovieClip}},TilingSprite:{get:function(){console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.");return i.TilingSprite}},BitmapText:{get:function(){console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.");return i.BitmapText}},blendModes:{get:function(){console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return e.BLEND_MODES}},scaleModes:{get:function(){console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");return e.SCALE_MODES}},BaseTextureCache:{get:function(){console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.");return e.utils.BaseTextureCache}},TextureCache:{get:function(){console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.");return e.utils.TextureCache}},math:{get:function(){console.warn("The math namespace is deprecated, please access members already accessible on PIXI.");return e}}});e.Sprite.prototype.setTexture=function(l){this.texture=l;console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};i.BitmapText.prototype.setText=function(l){this.text=l;console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")};e.Text.prototype.setText=function(l){this.text=l;console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};e.Text.prototype.setStyle=function(l){this.style=l;console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};e.Texture.prototype.setFrame=function(l){this.frame=l;console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")};Object.defineProperties(j,{AbstractFilter:{get:function(){console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on.");return e.AbstractFilter}},FXAAFilter:{get:function(){console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on.");return e.FXAAFilter}},SpriteMaskFilter:{get:function(){console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.");return e.SpriteMaskFilter}}});e.utils.uuid=function(){console.warn("utils.uuid() is deprecated, please use utils.uid() from now on.");return e.utils.uid()}},{"./core":29,"./extras":85,"./filters":102,"./mesh":126}],79:[function(g,h,f){var e=g("../core");function i(k,j){e.Container.call(this);j=j||{};this.textWidth=0;this.textHeight=0;this._glyphs=[];this._font={tint:j.tint!==undefined?j.tint:16777215,align:j.align||"left",name:null,size:0};this.font=j.font;this._text=k;this.maxWidth=0;this.dirty=false;this.updateText()}i.prototype=Object.create(e.Container.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{tint:{get:function(){return this._font.tint},set:function(j){this._font.tint=(typeof j==="number"&&j>=0)?j:16777215;this.dirty=true}},align:{get:function(){return this._font.align},set:function(j){this._font.align=j||"left";this.dirty=true}},font:{get:function(){return this._font},set:function(j){if(!j){return}if(typeof j==="string"){j=j.split(" ");this._font.name=j.length===1?j[0]:j.slice(1).join(" ");this._font.size=j.length>=2?parseInt(j[0],10):i.fonts[this._font.name].size}else{this._font.name=j.name;this._font.size=typeof j.size==="number"?j.size:parseInt(j.size,10)}this.dirty=true}},text:{get:function(){return this._text},set:function(j){j=j.toString()||" ";if(this._text===j){return}this._text=j;this.dirty=true}}});i.prototype.updateText=function(){var x=i.fonts[this._font.name];var m=new e.Point();var n=null;var s=[];var r=0;var t=0;var A=[];var q=0;var y=this._font.size/x.size;var o=-1;for(var v=0;v<this.text.length;v++){var k=this.text.charCodeAt(v);o=/(\s)/.test(this.text.charAt(v))?v:o;if(/(?:\r\n|\r|\n)/.test(this.text.charAt(v))){A.push(r);t=Math.max(t,r);q++;m.x=0;m.y+=x.lineHeight;n=null;continue}if(o!==-1&&this.maxWidth>0&&m.x*y>this.maxWidth){s.splice(o,v-o);v=o;o=-1;A.push(r);t=Math.max(t,r);q++;m.x=0;m.y+=x.lineHeight;n=null;continue}var j=x.chars[k];if(!j){continue}if(n&&j.kerning[n]){m.x+=j.kerning[n]}s.push({texture:j.texture,line:q,charCode:k,position:new e.Point(m.x+j.xOffset,m.y+j.yOffset)});r=m.x+(j.texture.width+j.xOffset);m.x+=j.xAdvance;n=k}A.push(r);t=Math.max(t,r);var u=[];for(v=0;v<=q;v++){var z=0;if(this._font.align==="right"){z=t-A[v]}else{if(this._font.align==="center"){z=(t-A[v])/2}}u.push(z)}var l=s.length;var p=this.tint;for(v=0;v<l;v++){var w=this._glyphs[v];if(w){w.texture=s[v].texture}else{w=new e.Sprite(s[v].texture);this._glyphs.push(w)}w.position.x=(s[v].position.x+u[s[v].line])*y;w.position.y=s[v].position.y*y;w.scale.x=w.scale.y=y;w.tint=p;if(!w.parent){this.addChild(w)}}for(v=l;v<this._glyphs.length;++v){this.removeChild(this._glyphs[v])}this.textWidth=t*y;this.textHeight=(m.y+x.lineHeight)*y};i.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};i.prototype.getLocalBounds=function(){this.validate();return e.Container.prototype.getLocalBounds.call(this)};i.prototype.validate=function(){if(this.dirty){this.updateText();this.dirty=false}};i.fonts={}},{"../core":29}],80:[function(g,h,f){var e=g("../core");function i(j){e.Sprite.call(this,j[0]);this._textures=j;this.animationSpeed=1;this.loop=true;this.onComplete=null;this._currentTime=0;this.playing=false}i.prototype=Object.create(e.Sprite.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(j){this._textures=j;this.texture=this._textures[Math.floor(this._currentTime)%this._textures.length]}},currentFrame:{get:function(){return Math.floor(this._currentTime)%this._textures.length}}});i.prototype.stop=function(){if(!this.playing){return}this.playing=false;e.ticker.shared.remove(this.update,this)};i.prototype.play=function(){if(this.playing){return}this.playing=true;e.ticker.shared.add(this.update,this)};i.prototype.gotoAndStop=function(k){this.stop();this._currentTime=k;var j=Math.floor(this._currentTime);this._texture=this._textures[j%this._textures.length]};i.prototype.gotoAndPlay=function(j){this._currentTime=j;this.play()};i.prototype.update=function(j){this._currentTime+=this.animationSpeed*j;var k=Math.floor(this._currentTime);if(k<0){if(this.loop){this._texture=this._textures[this._textures.length-1+k%this._textures.length]}else{this.gotoAndStop(0);if(this.onComplete){this.onComplete()}}}else{if(this.loop||k<this._textures.length){this._texture=this._textures[k%this._textures.length]}else{if(k>=this._textures.length){this.gotoAndStop(this.textures.length-1);if(this.onComplete){this.onComplete()}}}}};i.prototype.destroy=function(){this.stop();e.Sprite.prototype.destroy.call(this)};i.fromFrames=function(l){var j=[];for(var k=0;k<l.length;++k){j.push(new e.Texture.fromFrame(l[k]))}return new i(j)};i.fromImages=function(k){var j=[];for(var l=0;l<k.length;++l){j.push(new e.Texture.fromImage(k[l]))}return new i(j)}},{"../core":29}],81:[function(g,h,f){var e=g("../core"),j=new e.Point();function i(m,l,k){e.Sprite.call(this,m);this.tileScale=new e.Point(1,1);this.tilePosition=new e.Point(0,0);this._width=l||100;this._height=k||100;this._uvs=new e.TextureUvs();this._canvasPattern=null;this.shader=new e.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}i.prototype=Object.create(e.Sprite.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{width:{get:function(){return this._width},set:function(k){this._width=k}},height:{get:function(){return this._height},set:function(k){this._height=k}}});i.prototype._onTextureUpdate=function(){return};i.prototype._renderWebGL=function(p){var o=this._texture;if(!o||!o._uvs){return}var q=o._uvs,m=o._frame.width,l=o._frame.height,k=o.baseTexture.width,n=o.baseTexture.height;o._uvs=this._uvs;o._frame.width=this.width;o._frame.height=this.height;this.shader.uniforms.uPixelSize.value[0]=1/k;this.shader.uniforms.uPixelSize.value[1]=1/n;this.shader.uniforms.uFrame.value[0]=q.x0;this.shader.uniforms.uFrame.value[1]=q.y0;this.shader.uniforms.uFrame.value[2]=q.x1-q.x0;this.shader.uniforms.uFrame.value[3]=q.y2-q.y0;this.shader.uniforms.uTransform.value[0]=(this.tilePosition.x%(m*this.tileScale.x))/this._width;this.shader.uniforms.uTransform.value[1]=(this.tilePosition.y%(l*this.tileScale.y))/this._height;this.shader.uniforms.uTransform.value[2]=(k/this._width)*this.tileScale.x;this.shader.uniforms.uTransform.value[3]=(n/this._height)*this.tileScale.y;p.setObjectRenderer(p.plugins.sprite);p.plugins.sprite.render(this);o._uvs=q;o._frame.width=m;o._frame.height=l};i.prototype._renderCanvas=function(q){var r=this._texture;if(!r.baseTexture.hasLoaded){return}var n=q.context,o=this.worldTransform,p=q.resolution,l=r.baseTexture,m=this.tilePosition.x%(r._frame.width*this.tileScale.x),k=this.tilePosition.y%(r._frame.height*this.tileScale.y);if(!this._canvasPattern){var s=new e.CanvasBuffer(r._frame.width,r._frame.height);s.context.drawImage(l.source,-r._frame.x,-r._frame.y);this._canvasPattern=s.context.createPattern(s.canvas,"repeat")}n.globalAlpha=this.worldAlpha;n.setTransform(o.a*p,o.b*p,o.c*p,o.d*p,o.tx*p,o.ty*p);n.scale(this.tileScale.x,this.tileScale.y);n.translate(m+(this.anchor.x*-this._width),k+(this.anchor.y*-this._height));if(this.blendMode!==q.currentBlendMode){q.currentBlendMode=this.blendMode;n.globalCompositeOperation=q.blendModes[q.currentBlendMode]}n.fillStyle=this._canvasPattern;n.fillRect(-m,-k,this._width/this.tileScale.x,this._height/this.tileScale.y)};i.prototype.getBounds=function(){var u=this._width;var t=this._height;var s=u*(1-this.anchor.x);var r=u*-this.anchor.x;var q=t*(1-this.anchor.y);var p=t*-this.anchor.y;var v=this.worldTransform;var I=v.a;var G=v.b;var F=v.c;var D=v.d;var J=v.tx;var H=v.ty;var z=I*r+F*p+J;var n=D*p+G*r+H;var y=I*s+F*p+J;var m=D*p+G*s+H;var x=I*s+F*q+J;var l=D*q+G*s+H;var w=I*r+F*q+J;var k=D*q+G*r+H;var E,C,B,A;E=z;E=y<E?y:E;E=x<E?x:E;E=w<E?w:E;B=n;B=m<B?m:B;B=l<B?l:B;B=k<B?k:B;C=z;C=y>C?y:C;C=x>C?x:C;C=w>C?w:C;A=n;A=m>A?m:A;A=l>A?l:A;A=k>A?k:A;var o=this._bounds;o.x=E;o.width=C-E;o.y=B;o.height=A-B;this._currentBounds=o;return o};i.prototype.containsPoint=function(l){this.worldTransform.applyInverse(l,j);var o=this._width;var k=this._height;var m=-o*this.anchor.x;var n;if(j.x>m&&j.x<m+o){n=-k*this.anchor.y;if(j.y>n&&j.y<n+k){return true}}return false};i.prototype.destroy=function(){e.Sprite.prototype.destroy.call(this);this.tileScale=null;this._tileScaleOffset=null;this.tilePosition=null;this._uvs=null};i.fromFrame=function(n,l,k){var m=e.utils.TextureCache[n];if(!m){throw new Error('The frameId "'+n+'" does not exist in the texture cache '+this)}return new i(m,l,k)};i.fromImage=function(m,o,k,l,n){return new i(e.Texture.fromImage(m,l,n),o,k)}},{"../core":29}],82:[function(i,j,h){var f=i("../core"),g=f.DisplayObject,e=new f.Matrix();g.prototype._cacheAsBitmap=false;g.prototype._originalRenderWebGL=null;g.prototype._originalRenderCanvas=null;g.prototype._originalUpdateTransform=null;g.prototype._originalHitTest=null;g.prototype._originalDestroy=null;g.prototype._cachedSprite=null;Object.defineProperties(g.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(k){if(this._cacheAsBitmap===k){return}this._cacheAsBitmap=k;if(k){this._originalRenderWebGL=this.renderWebGL;this._originalRenderCanvas=this.renderCanvas;this._originalUpdateTransform=this.updateTransform;this._originalGetBounds=this.getBounds;this._originalDestroy=this.destroy;this._originalContainsPoint=this.containsPoint;this.renderWebGL=this._renderCachedWebGL;this.renderCanvas=this._renderCachedCanvas;this.destroy=this._cacheAsBitmapDestroy}else{if(this._cachedSprite){this._destroyCachedDisplayObject()}this.renderWebGL=this._originalRenderWebGL;this.renderCanvas=this._originalRenderCanvas;this.getBounds=this._originalGetBounds;this.destroy=this._originalDestroy;this.updateTransform=this._originalUpdateTransform;this.containsPoint=this._originalContainsPoint}}}});g.prototype._renderCachedWebGL=function(k){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObject(k);this._cachedSprite.worldAlpha=this.worldAlpha;k.setObjectRenderer(k.plugins.sprite);k.plugins.sprite.render(this._cachedSprite)};g.prototype._initCachedDisplayObject=function(q){if(this._cachedSprite){return}q.currentRenderer.flush();var p=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;p.x-=r;p.y-=r;p.width+=r*2;p.height+=r*2}var o=q.currentRenderTarget;var l=q.filterManager.filterStack;var n=new f.RenderTexture(q,p.width|0,p.height|0);var k=e;k.tx=-p.x;k.ty=-p.y;this.renderWebGL=this._originalRenderWebGL;n.render(this,k,true,true);q.setRenderTarget(o);q.filterManager.filterStack=l;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=new f.Sprite(n);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(p.x/p.width);this._cachedSprite.anchor.y=-(p.y/p.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)};g.prototype._renderCachedCanvas=function(k){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObjectCanvas(k);this._cachedSprite.worldAlpha=this.worldAlpha;this._cachedSprite.renderCanvas(k)};g.prototype._initCachedDisplayObjectCanvas=function(p){if(this._cachedSprite){return}var o=this.getLocalBounds();var n=p.context;var l=new f.RenderTexture(p,o.width|0,o.height|0);var k=e;k.tx=-o.x;k.ty=-o.y;this.renderCanvas=this._originalRenderCanvas;l.render(this,k,true);p.context=n;this.renderCanvas=this._renderCachedCanvas;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=new f.Sprite(l);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(o.x/o.width);this._cachedSprite.anchor.y=-(o.y/o.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)};g.prototype._getCachedBounds=function(){this._cachedSprite._currentBounds=null;return this._cachedSprite.getBounds()};g.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy();this._cachedSprite=null};g.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=false;this._originalDestroy()}},{"../core":29}],83:[function(g,h,f){var e=g("../core");e.DisplayObject.prototype.name=null;e.Container.prototype.getChildByName=function(j){for(var k=0;k<this.children.length;k++){if(this.children[k].name===j){return this.children[k]}}return null}},{"../core":29}],84:[function(g,h,f){var e=g("../core");e.DisplayObject.prototype.getGlobalPosition=function(i){i=i||new e.Point();if(this.parent){this.displayObjectUpdateTransform();i.x=this.worldTransform.tx;i.y=this.worldTransform.ty}else{i.x=this.position.x;i.y=this.position.y}return i}},{"../core":29}],85:[function(f,g,e){f("./cacheAsBitmap");f("./getChildByName");f("./getGlobalPosition");g.exports={MovieClip:f("./MovieClip"),TilingSprite:f("./TilingSprite"),BitmapText:f("./BitmapText")}},{"./BitmapText":79,"./MovieClip":80,"./TilingSprite":81,"./cacheAsBitmap":82,"./getChildByName":83,"./getGlobalPosition":84}],86:[function(g,h,f){var e=g("../../core");function i(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(j){this.uniforms.pixelSize.value=j}}})},{"../../core":29}],87:[function(g,h,f){var e=g("../../core"),j=g("../blur/BlurXFilter"),k=g("../blur/BlurYFilter");function i(){e.AbstractFilter.call(this);this.blurXFilter=new j();this.blurYFilter=new k();this.defaultFilter=new e.AbstractFilter()}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;i.prototype.applyFilter=function(o,m,l){var n=o.filterManager.getRenderTarget(true);this.defaultFilter.applyFilter(o,m,l);this.blurXFilter.applyFilter(o,m,n);o.blendModeManager.setBlendMode(e.BLEND_MODES.SCREEN);this.blurYFilter.applyFilter(o,n,l);o.blendModeManager.setBlendMode(e.BLEND_MODES.NORMAL);o.filterManager.returnRenderTarget(n)};Object.defineProperties(i.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=this.blurYFilter.blur=l}},blurX:{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=l}},blurY:{get:function(){return this.blurYFilter.blur},set:function(l){this.blurYFilter.blur=l}}})},{"../../core":29,"../blur/BlurXFilter":90,"../blur/BlurYFilter":91}],88:[function(g,h,f){var e=g("../../core");function i(k,j){e.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:k||0},dirY:{type:"1f",value:j||0}});this.defaultFilter=new e.AbstractFilter();this.passes=1;this.dirX=k||0;this.dirY=j||0;this.strength=4}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;i.prototype.applyFilter=function(p,l,k,j){var n=this.getShader(p);this.uniforms.strength.value=this.strength/4/this.passes*(l.frame.width/l.size.width);if(this.passes===1){p.filterManager.applyFilter(n,l,k,j)}else{var o=p.filterManager.getRenderTarget(true);p.filterManager.applyFilter(n,l,o,j);for(var m=0;m<this.passes-2;m++){p.filterManager.applyFilter(n,o,o,j)}p.filterManager.applyFilter(n,o,k,j);p.filterManager.returnRenderTarget(o)}};Object.defineProperties(i.prototype,{blur:{get:function(){return this.strength},set:function(j){this.padding=j*0.5;this.strength=j}},dirX:{get:function(){return this.dirX},set:function(j){this.uniforms.dirX.value=j}},dirY:{get:function(){return this.dirY},set:function(j){this.uniforms.dirY.value=j}}})},{"../../core":29}],89:[function(g,h,f){var e=g("../../core"),i=g("./BlurXFilter"),k=g("./BlurYFilter");function j(){e.AbstractFilter.call(this);this.blurXFilter=new i();this.blurYFilter=new k()}j.prototype=Object.create(e.AbstractFilter.prototype);j.prototype.constructor=j;h.exports=j;j.prototype.applyFilter=function(o,m,l){var n=o.filterManager.getRenderTarget(true);this.blurXFilter.applyFilter(o,m,n);this.blurYFilter.applyFilter(o,n,l);o.filterManager.returnRenderTarget(n)};Object.defineProperties(j.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(l){this.padding=Math.abs(l)*0.5;this.blurXFilter.blur=this.blurYFilter.blur=l}},passes:{get:function(){return this.blurXFilter.passes},set:function(l){this.blurXFilter.passes=this.blurYFilter.passes=l}},blurX:{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=l}},blurY:{get:function(){return this.blurYFilter.blur},set:function(l){this.blurYFilter.blur=l}}})},{"../../core":29,"./BlurXFilter":90,"./BlurYFilter":91}],90:[function(g,h,f){var e=g("../../core");function i(){e.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;i.prototype.applyFilter=function(q,r,j,o){var p=this.getShader(q);this.uniforms.strength.value=this.strength/4/this.passes*(r.frame.width/r.size.width);if(this.passes===1){q.filterManager.applyFilter(p,r,j,o)}else{var n=q.filterManager.getRenderTarget(true);var m=r;var k=n;for(var l=0;l<this.passes-1;l++){q.filterManager.applyFilter(p,m,k,true);var s=k;k=m;m=s}q.filterManager.applyFilter(p,m,j,o);q.filterManager.returnRenderTarget(n)}};Object.defineProperties(i.prototype,{blur:{get:function(){return this.strength},set:function(j){this.padding=Math.abs(j)*0.5;this.strength=j}}})},{"../../core":29}],91:[function(g,h,f){var e=g("../../core");function i(){e.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;i.prototype.applyFilter=function(q,r,j,o){var p=this.getShader(q);this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(r.frame.height/r.size.height);if(this.passes===1){q.filterManager.applyFilter(p,r,j,o)}else{var n=q.filterManager.getRenderTarget(true);var m=r;var k=n;for(var l=0;l<this.passes-1;l++){q.filterManager.applyFilter(p,m,k,true);var s=k;k=m;m=s}q.filterManager.applyFilter(p,m,j,o);q.filterManager.returnRenderTarget(n)}};Object.defineProperties(i.prototype,{blur:{get:function(){return this.strength},set:function(j){this.padding=Math.abs(j)*0.5;this.strength=j}}})},{"../../core":29}],92:[function(h,i,g){var f=h("../../core");function e(){f.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:0.1,y:0}}})}e.prototype=Object.create(f.AbstractFilter.prototype);e.prototype.constructor=e;i.exports=e},{"../../core":29}],93:[function(g,i,f){var e=g("../../core");function h(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}h.prototype=Object.create(e.AbstractFilter.prototype);h.prototype.constructor=h;i.exports=h;h.prototype._loadMatrix=function(k,j){j=!!j;var l=k;if(j){this._multiply(l,this.uniforms.m.value,k);l=this._colorMatrix(l)}this.uniforms.m.value=l};h.prototype._multiply=function(l,k,j){l[0]=(k[0]*j[0])+(k[1]*j[5])+(k[2]*j[10])+(k[3]*j[15]);l[1]=(k[0]*j[1])+(k[1]*j[6])+(k[2]*j[11])+(k[3]*j[16]);l[2]=(k[0]*j[2])+(k[1]*j[7])+(k[2]*j[12])+(k[3]*j[17]);l[3]=(k[0]*j[3])+(k[1]*j[8])+(k[2]*j[13])+(k[3]*j[18]);l[4]=(k[0]*j[4])+(k[1]*j[9])+(k[2]*j[14])+(k[3]*j[19]);l[5]=(k[5]*j[0])+(k[6]*j[5])+(k[7]*j[10])+(k[8]*j[15]);l[6]=(k[5]*j[1])+(k[6]*j[6])+(k[7]*j[11])+(k[8]*j[16]);l[7]=(k[5]*j[2])+(k[6]*j[7])+(k[7]*j[12])+(k[8]*j[17]);l[8]=(k[5]*j[3])+(k[6]*j[8])+(k[7]*j[13])+(k[8]*j[18]);l[9]=(k[5]*j[4])+(k[6]*j[9])+(k[7]*j[14])+(k[8]*j[19]);l[10]=(k[10]*j[0])+(k[11]*j[5])+(k[12]*j[10])+(k[13]*j[15]);l[11]=(k[10]*j[1])+(k[11]*j[6])+(k[12]*j[11])+(k[13]*j[16]);l[12]=(k[10]*j[2])+(k[11]*j[7])+(k[12]*j[12])+(k[13]*j[17]);l[13]=(k[10]*j[3])+(k[11]*j[8])+(k[12]*j[13])+(k[13]*j[18]);l[14]=(k[10]*j[4])+(k[11]*j[9])+(k[12]*j[14])+(k[13]*j[19]);l[15]=(k[15]*j[0])+(k[16]*j[5])+(k[17]*j[10])+(k[18]*j[15]);l[16]=(k[15]*j[1])+(k[16]*j[6])+(k[17]*j[11])+(k[18]*j[16]);l[17]=(k[15]*j[2])+(k[16]*j[7])+(k[17]*j[12])+(k[18]*j[17]);l[18]=(k[15]*j[3])+(k[16]*j[8])+(k[17]*j[13])+(k[18]*j[18]);l[19]=(k[15]*j[4])+(k[16]*j[9])+(k[17]*j[14])+(k[18]*j[19]);return l};h.prototype._colorMatrix=function(k){var j=new Float32Array(k);j[4]/=255;j[9]/=255;j[14]/=255;j[19]/=255;return j};h.prototype.brightness=function(j,l){var k=[j,0,0,0,0,0,j,0,0,0,0,0,j,0,0,0,0,0,1,0];this._loadMatrix(k,l)};h.prototype.greyscale=function(l,k){var j=[l,l,l,0,0,l,l,l,0,0,l,l,l,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.grayscale=h.prototype.greyscale;h.prototype.blackAndWhite=function(k){var j=[0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.hue=function(o,l){o=(o||0)/180*Math.PI;var p=Math.cos(o),k=Math.sin(o);var n=0.213,m=0.715,q=0.072;var j=[n+p*(1-n)+k*(-n),m+p*(-m)+k*(-m),q+p*(-q)+k*(1-q),0,0,n+p*(-n)+k*(0.143),m+p*(1-m)+k*(0.14),q+p*(-q)+k*(-0.283),0,0,n+p*(-n)+k*(-(1-n)),m+p*(-m)+k*(m),q+p*(1-q)+k*(q),0,0,0,0,0,1,0];this._loadMatrix(j,l)};h.prototype.contrast=function(m,l){var k=(m||0)+1;var n=-128*(k-1);var j=[k,0,0,0,n,0,k,0,0,n,0,0,k,0,n,0,0,0,1,0];this._loadMatrix(j,l)};h.prototype.saturate=function(m,l){var j=(m||0)*2/3+1;var n=((j-1)*-0.5);var k=[j,n,n,0,0,n,j,n,0,0,n,n,j,0,0,0,0,0,1,0];this._loadMatrix(k,l)};h.prototype.desaturate=function(j){this.saturate(-1)};h.prototype.negative=function(k){var j=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.sepia=function(k){var j=[0.393,0.7689999,0.18899999,0,0,0.349,0.6859999,0.16799999,0,0,0.272,0.5339999,0.13099999,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.technicolor=function(k){var j=[1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.polaroid=function(k){var j=[1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.toBGR=function(k){var j=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.kodachrome=function(k){var j=[1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.browni=function(k){var j=[0.5997023498159715,0.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,0.8609577587992641,0.15059552388459913,0,-36.96841498319127,0.24113635128153335,-0.07441037908422492,0.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.vintage=function(k){var j=[0.6279345635605994,0.3202183420819367,-0.03965408211312453,0,9.651285835294123,0.02578397704808868,0.6441188644374771,0.03259127616149294,0,7.462829176470591,0.0466055556782719,-0.0851232987247891,0.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.colorTone=function(r,o,n,s,k){r=r||0.2;o=o||0.15;n=n||16770432;s=s||3375104;var u=((n>>16)&255)/255;var m=((n>>8)&255)/255;var p=(n&255)/255;var q=((s>>16)&255)/255;var j=((s>>8)&255)/255;var l=(s&255)/255;var t=[0.3,0.59,0.11,0,0,u,m,p,r,0,q,j,l,o,0,u-q,m-j,p-l,0,0];this._loadMatrix(t,k)};h.prototype.night=function(j,l){j=j||0.1;var k=[j*(-2),-j,0,0,0,-j,0,j,0,0,0,j,j*2,0,0,0,0,0,1,0];this._loadMatrix(k,l)};h.prototype.predator=function(l,k){var j=[11.224130630493164*l,-4.794486999511719*l,-2.8746118545532227*l,0*l,0.40342438220977783*l,-3.6330697536468506*l,9.193157196044922*l,-2.951810836791992*l,0*l,-1.316135048866272*l,-3.2184197902679443*l,-4.2375030517578125*l,7.476448059082031*l,0*l,0.8044459223747253*l,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.lsd=function(k){var j=[2,-0.4,0.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0];this._loadMatrix(j,k)};h.prototype.reset=function(){var j=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(j,false)};Object.defineProperties(h.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(j){this.uniforms.m.value=j}}})},{"../../core":29}],94:[function(h,i,g){var f=h("../../core");function e(){f.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}e.prototype=Object.create(f.AbstractFilter.prototype);e.prototype.constructor=e;i.exports=e;Object.defineProperties(e.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(j){this.uniforms.step.value=j}}})},{"../../core":29}],95:[function(h,i,g){var f=h("../../core");function e(k,l,j){f.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(k)},texelSize:{type:"v2",value:{x:1/l,y:1/j}}})}e.prototype=Object.create(f.AbstractFilter.prototype);e.prototype.constructor=e;i.exports=e;Object.defineProperties(e.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(j){this.uniforms.matrix.value=new Float32Array(j)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(j){this.uniforms.texelSize.value.x=1/j}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(j){this.uniforms.texelSize.value.y=1/j}}})},{"../../core":29}],96:[function(g,h,f){var e=g("../../core");function i(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i},{"../../core":29}],97:[function(g,i,f){var e=g("../../core");function h(j){var k=new e.Matrix();j.renderable=false;e.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 original =  texture2D(uSampler, vTextureCoord);\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:j.texture},otherMatrix:{type:"mat3",value:k.toArray(true)},scale:{type:"v2",value:{x:1,y:1}}});this.maskSprite=j;this.maskMatrix=k;this.scale=new e.Point(20,20)}h.prototype=Object.create(e.AbstractFilter.prototype);h.prototype.constructor=h;i.exports=h;h.prototype.applyFilter=function(n,l,k){var j=n.filterManager;j.calculateMappedMatrix(l.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(true);this.uniforms.scale.value.x=this.scale.x*(1/l.frame.width);this.uniforms.scale.value.y=this.scale.y*(1/l.frame.height);var m=this.getShader(n);j.applyFilter(m,l,k)};Object.defineProperties(h.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(j){this.uniforms.mapSampler.value=j}}})},{"../../core":29}],98:[function(h,i,g){var e=h("../../core");function f(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}f.prototype=Object.create(e.AbstractFilter.prototype);f.prototype.constructor=f;i.exports=f;Object.defineProperties(f.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(j){this.uniforms.scale.value=j}},angle:{get:function(){return this.uniforms.angle.value},set:function(j){this.uniforms.angle.value=j}}})},{"../../core":29}],99:[function(h,i,g){var f=h("../../core");function e(){f.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:0.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}});this.passes=1;this.strength=4}e.prototype=Object.create(f.AbstractFilter.prototype);e.prototype.constructor=e;i.exports=e;e.prototype.applyFilter=function(q,r,j,o){var p=this.getShader(q);this.uniforms.strength.value=this.strength/4/this.passes*(r.frame.height/r.size.height);if(this.passes===1){q.filterManager.applyFilter(p,r,j,o)}else{var n=q.filterManager.getRenderTarget(true);var m=r;var k=n;for(var l=0;l<this.passes-1;l++){q.filterManager.applyFilter(p,m,k,o);var s=k;k=m;m=s}q.filterManager.applyFilter(p,m,j,o);q.filterManager.returnRenderTarget(n)}};Object.defineProperties(e.prototype,{blur:{get:function(){return this.strength},set:function(j){this.padding=j*0.5;this.strength=j}}})},{"../../core":29}],100:[function(h,i,g){var f=h("../../core"),j=h("../blur/BlurXFilter"),e=h("./BlurYTintFilter");function k(){f.AbstractFilter.call(this);this.blurXFilter=new j();this.blurYTintFilter=new e();this.defaultFilter=new f.AbstractFilter();this.padding=30;this._dirtyPosition=true;this._angle=45*Math.PI/180;this._distance=10;this.alpha=0.75;this.hideObject=false;this.blendMode=f.BLEND_MODES.MULTIPLY}k.prototype=Object.create(f.AbstractFilter.prototype);k.prototype.constructor=k;i.exports=k;k.prototype.applyFilter=function(o,m,l){var n=o.filterManager.getRenderTarget(true);if(this._dirtyPosition){this._dirtyPosition=false;this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance;this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance}this.blurXFilter.applyFilter(o,m,n);o.blendModeManager.setBlendMode(this.blendMode);this.blurYTintFilter.applyFilter(o,n,l);o.blendModeManager.setBlendMode(f.BLEND_MODES.NORMAL);if(!this.hideObject){this.defaultFilter.applyFilter(o,m,l)}o.filterManager.returnRenderTarget(n)};Object.defineProperties(k.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=this.blurYTintFilter.blur=l}},blurX:{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=l}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(l){this.blurYTintFilter.blur=l}},color:{get:function(){return f.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(l){this.blurYTintFilter.uniforms.color.value=f.utils.hex2rgb(l)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(l){this.blurYTintFilter.uniforms.alpha.value=l}},distance:{get:function(){return this._distance},set:function(l){this._dirtyPosition=true;this._distance=l}},angle:{get:function(){return this._angle},set:function(l){this._dirtyPosition=true;this._angle=l}}})},{"../../core":29,"../blur/BlurXFilter":90,"./BlurYTintFilter":99}],101:[function(h,i,f){var e=h("../../core");function g(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}g.prototype=Object.create(e.AbstractFilter.prototype);g.prototype.constructor=g;i.exports=g;Object.defineProperties(g.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(j){this.uniforms.gray.value=j}}})},{"../../core":29}],102:[function(f,g,e){g.exports={AsciiFilter:f("./ascii/AsciiFilter"),BloomFilter:f("./bloom/BloomFilter"),BlurFilter:f("./blur/BlurFilter"),BlurXFilter:f("./blur/BlurXFilter"),BlurYFilter:f("./blur/BlurYFilter"),BlurDirFilter:f("./blur/BlurDirFilter"),ColorMatrixFilter:f("./color/ColorMatrixFilter"),ColorStepFilter:f("./color/ColorStepFilter"),ConvolutionFilter:f("./convolution/ConvolutionFilter"),CrossHatchFilter:f("./crosshatch/CrossHatchFilter"),DisplacementFilter:f("./displacement/DisplacementFilter"),DotScreenFilter:f("./dot/DotScreenFilter"),GrayFilter:f("./gray/GrayFilter"),DropShadowFilter:f("./dropshadow/DropShadowFilter"),InvertFilter:f("./invert/InvertFilter"),NoiseFilter:f("./noise/NoiseFilter"),NormalMapFilter:f("./normal/NormalMapFilter"),PixelateFilter:f("./pixelate/PixelateFilter"),RGBSplitFilter:f("./rgb/RGBSplitFilter"),ShockwaveFilter:f("./shockwave/ShockwaveFilter"),SepiaFilter:f("./sepia/SepiaFilter"),SmartBlurFilter:f("./blur/SmartBlurFilter"),TiltShiftFilter:f("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:f("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:f("./tiltshift/TiltShiftYFilter"),TwistFilter:f("./twist/TwistFilter")}},{"./ascii/AsciiFilter":86,"./bloom/BloomFilter":87,"./blur/BlurDirFilter":88,"./blur/BlurFilter":89,"./blur/BlurXFilter":90,"./blur/BlurYFilter":91,"./blur/SmartBlurFilter":92,"./color/ColorMatrixFilter":93,"./color/ColorStepFilter":94,"./convolution/ConvolutionFilter":95,"./crosshatch/CrossHatchFilter":96,"./displacement/DisplacementFilter":97,"./dot/DotScreenFilter":98,"./dropshadow/DropShadowFilter":100,"./gray/GrayFilter":101,"./invert/InvertFilter":103,"./noise/NoiseFilter":104,"./normal/NormalMapFilter":105,"./pixelate/PixelateFilter":106,"./rgb/RGBSplitFilter":107,"./sepia/SepiaFilter":108,"./shockwave/ShockwaveFilter":109,"./tiltshift/TiltShiftFilter":111,"./tiltshift/TiltShiftXFilter":112,"./tiltshift/TiltShiftYFilter":113,"./twist/TwistFilter":114}],103:[function(h,i,g){var e=h("../../core");function f(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}f.prototype=Object.create(e.AbstractFilter.prototype);f.prototype.constructor=f;i.exports=f;Object.defineProperties(f.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(j){this.uniforms.invert.value=j}}})},{"../../core":29}],104:[function(g,h,f){var e=g("../../core");function i(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:0.5}})}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(j){this.uniforms.noise.value=j}}})},{"../../core":29}],105:[function(g,h,f){var e=g("../../core");function i(j){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D displacementMap;\nuniform sampler2D uSampler;\n\nuniform vec4 dimensions;\n\nconst vec2 Resolution = vec2(1.0,1.0);      //resolution of screen\nuniform vec3 LightPos;    //light position, normalized\nconst vec4 LightColor = vec4(1.0, 1.0, 1.0, 1.0);      //light RGBA -- alpha is intensity\nconst vec4 AmbientColor = vec4(1.0, 1.0, 1.0, 0.5);    //ambient RGBA -- alpha is intensity\nconst vec3 Falloff = vec3(0.0, 1.0, 0.2);         //attenuation coefficients\n\nuniform vec3 LightDir; // = vec3(1.0, 0.0, 1.0);\n\nuniform vec2 mapDimensions; // = vec2(256.0, 256.0);\n\n\nvoid main(void)\n{\n    vec2 mapCords = vTextureCoord.xy;\n\n    vec4 color = texture2D(uSampler, vTextureCoord.st);\n    vec3 nColor = texture2D(displacementMap, vTextureCoord.st).rgb;\n\n\n    mapCords *= vec2(dimensions.x/512.0, dimensions.y/512.0);\n\n    mapCords.y *= -1.0;\n    mapCords.y += 1.0;\n\n    // RGBA of our diffuse color\n    vec4 DiffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // RGB of our normal map\n    vec3 NormalMap = texture2D(displacementMap, mapCords).rgb;\n\n    // The delta position of light\n    // vec3 LightDir = vec3(LightPos.xy - (gl_FragCoord.xy / Resolution.xy), LightPos.z);\n    vec3 LightDir = vec3(LightPos.xy - (mapCords.xy), LightPos.z);\n\n    // Correct for aspect ratio\n    // LightDir.x *= Resolution.x / Resolution.y;\n\n    // Determine distance (used for attenuation) BEFORE we normalize our LightDir\n    float D = length(LightDir);\n\n    // normalize our vectors\n    vec3 N = normalize(NormalMap * 2.0 - 1.0);\n    vec3 L = normalize(LightDir);\n\n    // Pre-multiply light color with intensity\n    // Then perform 'N dot L' to determine our diffuse term\n    vec3 Diffuse = (LightColor.rgb * LightColor.a) * max(dot(N, L), 0.0);\n\n    // pre-multiply ambient color with intensity\n    vec3 Ambient = AmbientColor.rgb * AmbientColor.a;\n\n    // calculate attenuation\n    float Attenuation = 1.0 / ( Falloff.x + (Falloff.y*D) + (Falloff.z*D*D) );\n\n    // the calculation which brings it all together\n    vec3 Intensity = Ambient + Diffuse * Attenuation;\n    vec3 FinalColor = DiffuseColor.rgb * Intensity;\n    gl_FragColor = vColor * vec4(FinalColor, DiffuseColor.a);\n\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, Attenuation); // vColor * vec4(FinalColor, DiffuseColor.a);\n\n/*\n    // normalise color\n    vec3 normal = normalize(nColor * 2.0 - 1.0);\n\n    vec3 deltaPos = vec3( (light.xy - gl_FragCoord.xy) / resolution.xy, light.z );\n\n    float lambert = clamp(dot(normal, lightDir), 0.0, 1.0);\n\n    float d = sqrt(dot(deltaPos, deltaPos));\n    float att = 1.0 / ( attenuation.x + (attenuation.y*d) + (attenuation.z*d*d) );\n\n    vec3 result = (ambientColor * ambientIntensity) + (lightColor.rgb * lambert) * att;\n    result *= color.rgb;\n\n    gl_FragColor = vec4(result, 1.0);\n*/\n}\n",{displacementMap:{type:"sampler2D",value:j},scale:{type:"2f",value:{x:15,y:15}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:1}},dimensions:{type:"4f",value:[0,0,0,0]},LightPos:{type:"3f",value:[0,1,0]}});j.baseTexture._powerOf2=true;if(j.baseTexture.hasLoaded){this.onTextureLoaded()}else{j.baseTexture.once("loaded",this.onTextureLoaded,this)}}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;i.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width;this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height};Object.defineProperties(i.prototype,{map:{get:function(){return this.uniforms.displacementMap.value},set:function(j){this.uniforms.displacementMap.value=j}},scale:{get:function(){return this.uniforms.scale.value},set:function(j){this.uniforms.scale.value=j}},offset:{get:function(){return this.uniforms.offset.value},set:function(j){this.uniforms.offset.value=j}}})},{"../../core":29}],106:[function(g,h,f){var e=g("../../core");function i(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(j){this.uniforms.pixelSize.value=j}}})},{"../../core":29}],107:[function(g,h,f){var e=g("../../core");function i(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(j){this.uniforms.red.value=j}},green:{get:function(){return this.uniforms.green.value},set:function(j){this.uniforms.green.value=j}},blue:{get:function(){return this.uniforms.blue.value},set:function(j){this.uniforms.blue.value=j}}})},{"../../core":29}],108:[function(h,i,f){var e=h("../../core");function g(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}g.prototype=Object.create(e.AbstractFilter.prototype);g.prototype.constructor=g;i.exports=g;Object.defineProperties(g.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(j){this.uniforms.sepia.value=j}}})},{"../../core":29}],109:[function(g,h,f){var e=g("../../core");function i(){e.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:0.5,y:0.5}},params:{type:"v3",value:{x:10,y:0.8,z:0.1}},time:{type:"1f",value:0}})}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(j){this.uniforms.center.value=j}},params:{get:function(){return this.uniforms.params.value},set:function(j){this.uniforms.params.value=j}},time:{get:function(){return this.uniforms.time.value},set:function(j){this.uniforms.time.value=j}}})},{"../../core":29}],110:[function(g,h,f){var e=g("../../core");function i(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}});this.updateDelta()}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;i.prototype.updateDelta=function(){this.uniforms.delta.value.x=0;this.uniforms.delta.value.y=0};Object.defineProperties(i.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(j){this.uniforms.blur.value=j}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(j){this.uniforms.gradientBlur.value=j}},start:{get:function(){return this.uniforms.start.value},set:function(j){this.uniforms.start.value=j;this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(j){this.uniforms.end.value=j;this.updateDelta()}}})},{"../../core":29}],111:[function(g,i,f){var e=g("../../core"),j=g("./TiltShiftXFilter"),k=g("./TiltShiftYFilter");function h(){e.AbstractFilter.call(this);this.tiltShiftXFilter=new j();this.tiltShiftYFilter=new k()}h.prototype=Object.create(e.AbstractFilter.prototype);h.prototype.constructor=h;i.exports=h;h.prototype.applyFilter=function(o,m,l){var n=o.filterManager.getRenderTarget(true);this.tiltShiftXFilter.applyFilter(o,m,n);this.tiltShiftYFilter.applyFilter(o,n,l);o.filterManager.returnRenderTarget(n)};Object.defineProperties(h.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(l){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=l}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(l){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=l}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(l){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=l}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(l){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=l}}})},{"../../core":29,"./TiltShiftXFilter":112,"./TiltShiftYFilter":113}],112:[function(f,g,e){var i=f("./TiltShiftAxisFilter");function h(){i.call(this)}h.prototype=Object.create(i.prototype);h.prototype.constructor=h;g.exports=h;h.prototype.updateDelta=function(){var k=this.uniforms.end.value.x-this.uniforms.start.value.x;var j=this.uniforms.end.value.y-this.uniforms.start.value.y;var l=Math.sqrt(k*k+j*j);this.uniforms.delta.value.x=k/l;this.uniforms.delta.value.y=j/l}},{"./TiltShiftAxisFilter":110}],113:[function(f,g,e){var h=f("./TiltShiftAxisFilter");function i(){h.call(this)}i.prototype=Object.create(h.prototype);i.prototype.constructor=i;g.exports=i;i.prototype.updateDelta=function(){var k=this.uniforms.end.value.x-this.uniforms.start.value.x;var j=this.uniforms.end.value.y-this.uniforms.start.value.y;var l=Math.sqrt(k*k+j*j);this.uniforms.delta.value.x=-j/l;this.uniforms.delta.value.y=k/l}},{"./TiltShiftAxisFilter":110}],114:[function(g,h,f){var e=g("../../core");function i(){e.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:0.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:0.5,y:0.5}}})}i.prototype=Object.create(e.AbstractFilter.prototype);i.prototype.constructor=i;h.exports=i;Object.defineProperties(i.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(j){this.uniforms.offset.value=j}},radius:{get:function(){return this.uniforms.radius.value},set:function(j){this.uniforms.radius.value=j}},angle:{get:function(){return this.uniforms.angle.value},set:function(j){this.uniforms.angle.value=j}}})},{"../../core":29}],115:[function(h,i,f){var e=h("../core");function g(){this.global=new e.Point();this.target=null;this.originalEvent=null}g.prototype.constructor=g;i.exports=g;g.prototype.getLocalPosition=function(p,r,q){var j=p.worldTransform;var l=q?q:this.global;var o=j.a,n=j.c,m=j.tx,u=j.b,t=j.d,s=j.ty,k=1/(o*t+n*-u);r=r||new e.Point();r.x=t*k*l.x+-n*k*l.x+(s*n-m*t)*k;r.y=o*k*l.y+-u*k*l.y+(-s*o+m*u)*k;return r}},{"../core":29}],116:[function(h,i,f){var e=h("../core"),g=h("./InteractionData");Object.assign(e.DisplayObject.prototype,h("./interactiveTarget"));function j(l,k){k=k||{};this.renderer=l;this.autoPreventDefault=k.autoPreventDefault!==undefined?k.autoPreventDefault:true;this.interactionFrequency=k.interactionFrequency||10;this.mouse=new g();this.eventData={stopped:false,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=true}};this.interactiveDataPool=[];this.interactionDOMElement=null;this.eventsAdded=false;this.onMouseUp=this.onMouseUp.bind(this);this.processMouseUp=this.processMouseUp.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.processMouseDown=this.processMouseDown.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.processMouseMove=this.processMouseMove.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.processMouseOverOut=this.processMouseOverOut.bind(this);this.onTouchStart=this.onTouchStart.bind(this);this.processTouchStart=this.processTouchStart.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.processTouchEnd=this.processTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.processTouchMove=this.processTouchMove.bind(this);this.last=0;this.currentCursorStyle="inherit";this._tempPoint=new e.Point();this.resolution=1;this.setTargetElement(this.renderer.view,this.renderer.resolution)}j.prototype.constructor=j;i.exports=j;j.prototype.setTargetElement=function(l,k){this.removeEvents();this.interactionDOMElement=l;this.resolution=k||1;this.addEvents()};j.prototype.addEvents=function(){if(!this.interactionDOMElement){return}e.ticker.shared.add(this.update,this);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="none";this.interactionDOMElement.style["-ms-touch-action"]="none"}window.document.addEventListener("mousemove",this.onMouseMove,true);this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,true);this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,true);this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,true);this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,true);this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,true);window.addEventListener("mouseup",this.onMouseUp,true);this.eventsAdded=true};j.prototype.removeEvents=function(){if(!this.interactionDOMElement){return}e.ticker.shared.remove(this.update);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="";this.interactionDOMElement.style["-ms-touch-action"]=""}window.document.removeEventListener("mousemove",this.onMouseMove,true);this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,true);this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,true);this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,true);this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,true);this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,true);this.interactionDOMElement=null;window.removeEventListener("mouseup",this.onMouseUp,true);this.eventsAdded=false};j.prototype.update=function(k){this._deltaTime+=k;if(this._deltaTime<this.interactionFrequency){return}this._deltaTime=0;if(!this.interactionDOMElement){return}if(this.didMove){this.didMove=false;return}this.cursor="inherit";this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,true);if(this.currentCursorStyle!==this.cursor){this.currentCursorStyle=this.cursor;this.interactionDOMElement.style.cursor=this.cursor}};j.prototype.dispatchEvent=function(m,k,l){if(!l.stopped){l.target=m;l.type=k;m.emit(k,l);if(m[k]){m[k](l)}}};j.prototype.mapPositionToPoint=function(l,k,n){var m=this.interactionDOMElement.getBoundingClientRect();l.x=((k-m.left)*(this.interactionDOMElement.width/m.width))/this.resolution;l.y=((n-m.top)*(this.interactionDOMElement.height/m.height))/this.resolution};j.prototype.processInteractive=function(k,r,p,m,l){if(!r.visible){return false}var o=r.children;var q=false;l=l||r.interactive;if(r.interactiveChildren){for(var n=o.length-1;n>=0;n--){if(!q&&m){q=this.processInteractive(k,o[n],p,true,l)}else{this.processInteractive(k,o[n],p,false,false)}}}if(l){if(m){if(r.hitArea){r.worldTransform.applyInverse(k,this._tempPoint);q=r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)}else{if(r.containsPoint){q=r.containsPoint(k)}}}if(r.interactive){p(r,q)}}return q};j.prototype.onMouseDown=function(k){this.mouse.originalEvent=k;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,k.clientX,k.clientY);if(this.autoPreventDefault){this.mouse.originalEvent.preventDefault()}this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,true)};j.prototype.processMouseDown=function(n,k){var l=this.mouse.originalEvent;var m=l.button===2||l.which===3;if(k){n[m?"_isRightDown":"_isLeftDown"]=true;this.dispatchEvent(n,m?"rightdown":"mousedown",this.eventData)}};j.prototype.onMouseUp=function(k){this.mouse.originalEvent=k;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,k.clientX,k.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,true)};j.prototype.processMouseUp=function(o,l){var m=this.mouse.originalEvent;var n=m.button===2||m.which===3;var k=n?"_isRightDown":"_isLeftDown";if(l){this.dispatchEvent(o,n?"rightup":"mouseup",this.eventData);if(o[k]){o[k]=false;this.dispatchEvent(o,n?"rightclick":"click",this.eventData)}}else{if(o[k]){o[k]=false;this.dispatchEvent(o,n?"rightupoutside":"mouseupoutside",this.eventData)}}};j.prototype.onMouseMove=function(k){this.mouse.originalEvent=k;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,k.clientX,k.clientY);this.didMove=true;this.cursor="inherit";this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,true);if(this.currentCursorStyle!==this.cursor){this.currentCursorStyle=this.cursor;this.interactionDOMElement.style.cursor=this.cursor}};j.prototype.processMouseMove=function(l,k){this.dispatchEvent(l,"mousemove",this.eventData);this.processMouseOverOut(l,k)};j.prototype.onMouseOut=function(k){this.mouse.originalEvent=k;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,k.clientX,k.clientY);this.interactionDOMElement.style.cursor="inherit";this.mapPositionToPoint(this.mouse.global,k.clientX,k.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,false)};j.prototype.processMouseOverOut=function(l,k){if(k){if(!l._over){l._over=true;this.dispatchEvent(l,"mouseover",this.eventData)}if(l.buttonMode){this.cursor=l.defaultCursor}}else{if(l._over){l._over=false;this.dispatchEvent(l,"mouseout",this.eventData)}}};j.prototype.onTouchStart=function(o){if(this.autoPreventDefault){o.preventDefault()}var n=o.changedTouches;var p=n.length;for(var m=0;m<p;m++){var k=n[m];var l=this.getTouchData(k);l.originalEvent=o;this.eventData.data=l;this.eventData.stopped=false;this.processInteractive(l.global,this.renderer._lastObjectRendered,this.processTouchStart,true);this.returnTouchData(l)}};j.prototype.processTouchStart=function(l,k){if(k){l._touchDown=true;this.dispatchEvent(l,"touchstart",this.eventData)}};j.prototype.onTouchEnd=function(o){if(this.autoPreventDefault){o.preventDefault()}var n=o.changedTouches;var p=n.length;for(var m=0;m<p;m++){var k=n[m];var l=this.getTouchData(k);l.originalEvent=o;this.eventData.data=l;this.eventData.stopped=false;this.processInteractive(l.global,this.renderer._lastObjectRendered,this.processTouchEnd,true);this.returnTouchData(l)}};j.prototype.processTouchEnd=function(l,k){if(k){this.dispatchEvent(l,"touchend",this.eventData);if(l._touchDown){l._touchDown=false;this.dispatchEvent(l,"tap",this.eventData)}}else{if(l._touchDown){l._touchDown=false;this.dispatchEvent(l,"touchendoutside",this.eventData)}}};j.prototype.onTouchMove=function(o){if(this.autoPreventDefault){o.preventDefault()}var n=o.changedTouches;var p=n.length;for(var m=0;m<p;m++){var k=n[m];var l=this.getTouchData(k);l.originalEvent=o;this.eventData.data=l;this.eventData.stopped=false;this.processInteractive(l.global,this.renderer._lastObjectRendered,this.processTouchMove,false);this.returnTouchData(l)}};j.prototype.processTouchMove=function(l,k){k=k;this.dispatchEvent(l,"touchmove",this.eventData)};j.prototype.getTouchData=function(k){var l=this.interactiveDataPool.pop();if(!l){l=new g()}l.identifier=k.identifier;this.mapPositionToPoint(l.global,k.clientX,k.clientY);if(navigator.isCocoonJS){l.global.x=l.global.x/this.resolution;l.global.y=l.global.y/this.resolution}k.globalX=l.global.x;k.globalY=l.global.y;return l};j.prototype.returnTouchData=function(k){this.interactiveDataPool.push(k)};j.prototype.destroy=function(){this.removeEvents();this.renderer=null;this.mouse=null;this.eventData=null;this.interactiveDataPool=null;this.interactionDOMElement=null;this.onMouseUp=null;this.processMouseUp=null;this.onMouseDown=null;this.processMouseDown=null;this.onMouseMove=null;this.processMouseMove=null;this.onMouseOut=null;this.processMouseOverOut=null;this.onTouchStart=null;this.processTouchStart=null;this.onTouchEnd=null;this.processTouchEnd=null;this.onTouchMove=null;this.processTouchMove=null;this._tempPoint=null};e.WebGLRenderer.registerPlugin("interaction",j);e.CanvasRenderer.registerPlugin("interaction",j)},{"../core":29,"./InteractionData":115,"./interactiveTarget":118}],117:[function(f,g,e){g.exports={InteractionData:f("./InteractionData"),InteractionManager:f("./InteractionManager"),interactiveTarget:f("./interactiveTarget")}},{"./InteractionData":115,"./InteractionManager":116,"./interactiveTarget":118}],118:[function(f,g,e){var h={interactive:false,buttonMode:false,interactiveChildren:true,defaultCursor:"pointer",_over:false,_touchDown:false};g.exports=h},{}],119:[function(g,h,f){var k=g("resource-loader").Resource,e=g("../core"),i=g("../extras"),j=g("path");function l(o,v){var p={};var n=o.data.getElementsByTagName("info")[0];var t=o.data.getElementsByTagName("common")[0];p.font=n.getAttribute("face");p.size=parseInt(n.getAttribute("size"),10);p.lineHeight=parseInt(t.getAttribute("lineHeight"),10);p.chars={};var u=o.data.getElementsByTagName("char");for(var q=0;q<u.length;q++){var y=parseInt(u[q].getAttribute("id"),10);var x=new e.Rectangle(parseInt(u[q].getAttribute("x"),10)+v.frame.x,parseInt(u[q].getAttribute("y"),10)+v.frame.y,parseInt(u[q].getAttribute("width"),10),parseInt(u[q].getAttribute("height"),10));p.chars[y]={xOffset:parseInt(u[q].getAttribute("xoffset"),10),yOffset:parseInt(u[q].getAttribute("yoffset"),10),xAdvance:parseInt(u[q].getAttribute("xadvance"),10),kerning:{},texture:new e.Texture(v.baseTexture,x)}}var w=o.data.getElementsByTagName("kerning");for(q=0;q<w.length;q++){var s=parseInt(w[q].getAttribute("first"),10);var m=parseInt(w[q].getAttribute("second"),10);var r=parseInt(w[q].getAttribute("amount"),10);p.chars[m].kerning[s]=r}o.bitmapFont=p;i.BitmapText.fonts[p.font]=p}h.exports=function(){return function(q,o){if(!q.data||!q.isXml){return o()}if(q.data.getElementsByTagName("page").length===0||q.data.getElementsByTagName("info").length===0||q.data.getElementsByTagName("info")[0].getAttribute("face")===null){return o()}var n=j.dirname(q.url);if(n==="."){n=""}if(this.baseUrl&&n){if(this.baseUrl.charAt(this.baseUrl.length-1)==="/"){n+="/"}n=n.replace(this.baseUrl,"")}if(n&&n.charAt(n.length-1)!=="/"){n+="/"}var m=n+q.data.getElementsByTagName("page")[0].getAttribute("file");if(e.utils.TextureCache[m]){l(q,e.utils.TextureCache[m]);o()}else{var p={crossOrigin:q.crossOrigin,loadType:k.LOAD_TYPE.IMAGE};this.add(q.name+"_image",m,p,function(r){l(q,r.texture);o()})}}}},{"../core":29,"../extras":85,path:3,"resource-loader":18}],120:[function(f,g,e){g.exports={Loader:f("./loader"),bitmapFontParser:f("./bitmapFontParser"),spritesheetParser:f("./spritesheetParser"),textureParser:f("./textureParser"),Resource:f("resource-loader").Resource}},{"./bitmapFontParser":119,"./loader":121,"./spritesheetParser":122,"./textureParser":123,"resource-loader":18}],121:[function(i,h,k){var m=i("resource-loader"),j=i("./textureParser"),g=i("./spritesheetParser"),l=i("./bitmapFontParser");function f(p,o){m.call(this,p,o);for(var n=0;n<f._pixiMiddleware.length;++n){this.use(f._pixiMiddleware[n]())}}f.prototype=Object.create(m.prototype);f.prototype.constructor=f;h.exports=f;f._pixiMiddleware=[m.middleware.parsing.blob,j,g,l];f.addPixiMiddleware=function(n){f._pixiMiddleware.push(n)};var e=m.Resource;e.setExtensionXhrType("fnt",e.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":119,"./spritesheetParser":122,"./textureParser":123,"resource-loader":18}],122:[function(g,h,f){var j=g("resource-loader").Resource,i=g("path"),e=g("../core");h.exports=function(){return function(o,m){if(!o.data||!o.isJson||!o.data.frames){return m()}var n={crossOrigin:o.crossOrigin,loadType:j.LOAD_TYPE.IMAGE};var k=i.dirname(o.url.replace(this.baseUrl,""));var l=e.utils.getResolutionOfUrl(o.url);this.add(o.name+"_image",k+"/"+o.data.meta.image,n,function(t){o.textures={};var v=o.data.frames;for(var s in v){var u=v[s].frame;if(u){var r=null;var p=null;if(v[s].rotated){r=new e.Rectangle(u.x,u.y,u.h,u.w)}else{r=new e.Rectangle(u.x,u.y,u.w,u.h)}if(v[s].trimmed){p=new e.Rectangle(v[s].spriteSourceSize.x/l,v[s].spriteSourceSize.y/l,v[s].sourceSize.w/l,v[s].sourceSize.h/l)}if(v[s].rotated){var q=r.width;r.width=r.height;r.height=q}r.x/=l;r.y/=l;r.width/=l;r.height/=l;o.textures[s]=new e.Texture(t.texture.baseTexture,r,r.clone(),p,v[s].rotated);e.utils.TextureCache[s]=o.textures[s]}}m()})}}},{"../core":29,path:3,"resource-loader":18}],123:[function(g,h,f){var e=g("../core");h.exports=function(){return function(j,i){if(j.data&&j.isImage){j.texture=new e.Texture(new e.BaseTexture(j.data,null,e.utils.getResolutionOfUrl(j.url)));e.utils.TextureCache[j.url]=j.texture}i()}}},{"../core":29}],124:[function(h,i,g){var e=h("../core"),k=new e.Point(),f=new e.Polygon();function j(n,l,m,p,o){e.Container.call(this);this._texture=null;this.uvs=m||new Float32Array([0,1,1,1,1,0,0,1]);this.vertices=l||new Float32Array([0,0,100,0,100,100,0,100]);this.indices=p||new Uint16Array([0,1,2,3]);this.dirty=true;this.blendMode=e.BLEND_MODES.NORMAL;this.canvasPadding=0;this.drawMode=o||j.DRAW_MODES.TRIANGLE_MESH;this.texture=n}j.prototype=Object.create(e.Container.prototype);j.prototype.constructor=j;i.exports=j;Object.defineProperties(j.prototype,{texture:{get:function(){return this._texture},set:function(l){if(this._texture===l){return}this._texture=l;if(l){if(l.baseTexture.hasLoaded){this._onTextureUpdate()}else{l.once("update",this._onTextureUpdate,this)}}}}});j.prototype._renderWebGL=function(l){l.setObjectRenderer(l.plugins.mesh);l.plugins.mesh.render(this)};j.prototype._renderCanvas=function(n){var m=n.context;var l=this.worldTransform;if(n.roundPixels){m.setTransform(l.a,l.b,l.c,l.d,l.tx|0,l.ty|0)}else{m.setTransform(l.a,l.b,l.c,l.d,l.tx,l.ty)}if(this.drawMode===j.DRAW_MODES.TRIANGLE_MESH){this._renderCanvasTriangleMesh(m)}else{this._renderCanvasTriangles(m)}};j.prototype._renderCanvasTriangleMesh=function(p){var m=this.vertices;var o=this.uvs;var q=m.length/2;for(var n=0;n<q-2;n++){var l=n*2;this._renderCanvasDrawTriangle(p,m,o,l,(l+2),(l+4))}};j.prototype._renderCanvasTriangles=function(l){var q=this.vertices;var n=this.uvs;var t=this.indices;var m=t.length;for(var o=0;o<m;o+=3){var s=t[o]*2,r=t[o+1]*2,p=t[o+2]*2;this._renderCanvasDrawTriangle(l,q,n,s,r,p)}};j.prototype._renderCanvasDrawTriangle=function(q,w,G,y,v,u){var n=this._texture.baseTexture.source;var l=this._texture.baseTexture.width;var H=this._texture.baseTexture.height;var S=w[y],R=w[v],P=w[u];var t=w[y+1],s=w[v+1],p=w[u+1];var Q=G[y]*l,O=G[v]*l,N=G[u]*l;var r=G[y+1]*H,o=G[v+1]*H,m=G[u+1]*H;if(this.canvasPadding>0){var M=this.canvasPadding/this.worldTransform.a;var L=this.canvasPadding/this.worldTransform.d;var E=(S+R+P)/3;var C=(t+s+p)/3;var K=S-E;var J=t-C;var I=Math.sqrt(K*K+J*J);S=E+(K/I)*(I+M);t=C+(J/I)*(I+L);K=R-E;J=s-C;I=Math.sqrt(K*K+J*J);R=E+(K/I)*(I+M);s=C+(J/I)*(I+L);K=P-E;J=p-C;I=Math.sqrt(K*K+J*J);P=E+(K/I)*(I+M);p=C+(J/I)*(I+L)}q.save();q.beginPath();q.moveTo(S,t);q.lineTo(R,s);q.lineTo(P,p);q.closePath();q.clip();var T=(Q*o)+(r*N)+(O*m)-(o*N)-(r*O)-(Q*m);var F=(S*o)+(r*P)+(R*m)-(o*P)-(r*R)-(S*m);var D=(Q*R)+(S*N)+(O*P)-(R*N)-(S*O)-(Q*P);var B=(Q*o*P)+(r*R*N)+(S*O*m)-(S*o*N)-(r*O*P)-(Q*R*m);var A=(t*o)+(r*p)+(s*m)-(o*p)-(r*s)-(t*m);var z=(Q*s)+(t*N)+(O*p)-(s*N)-(t*O)-(Q*p);var x=(Q*o*p)+(r*s*N)+(t*O*m)-(t*o*N)-(r*O*p)-(Q*s*m);q.transform(F/T,A/T,D/T,z/T,B/T,x/T);q.drawImage(n,0,0);q.restore()};j.prototype.renderMeshFlat=function(q){var m=this.context;var t=q.vertices;var o=t.length/2;m.beginPath();for(var r=1;r<o-2;r++){var s=r*2;var p=t[s],n=t[s+2],l=t[s+4];var w=t[s+1],v=t[s+3],u=t[s+5];m.moveTo(p,w);m.lineTo(n,v);m.lineTo(l,u)}m.fillStyle="#FF0000";m.fill();m.closePath()};j.prototype._onTextureUpdate=function(){this.updateFrame=true};j.prototype.getBounds=function(u){if(!this._currentBounds){var t=u||this.worldTransform;var G=t.a;var E=t.b;var C=t.c;var z=t.d;var H=t.tx;var F=t.ty;var B=-Infinity;var w=-Infinity;var D=Infinity;var A=Infinity;var o=this.vertices;for(var v=0,s=o.length;v<s;v+=2){var m=o[v],l=o[v+1];var r=(G*m)+(C*l)+H;var q=(z*l)+(E*m)+F;D=r<D?r:D;A=q<A?q:A;B=r>B?r:B;w=q>w?q:w}if(D===-Infinity||w===Infinity){return e.Rectangle.EMPTY}var p=this._bounds;p.x=D;p.width=B-D;p.y=A;p.height=w-A;this._currentBounds=p}return this._currentBounds};j.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y)){return false}this.worldTransform.applyInverse(r,k);var o=this.vertices;var s=f.points;var l,n;if(this.drawMode===j.DRAW_MODES.TRIANGLES){var t=this.indices;n=this.indices.length;for(l=0;l<n;l+=3){var q=t[l]*2,p=t[l+1]*2,m=t[l+2]*2;s[0]=o[q];s[1]=o[q+1];s[2]=o[p];s[3]=o[p+1];s[4]=o[m];s[5]=o[m+1];if(f.contains(k.x,k.y)){return true}}}else{n=o.length;for(l=0;l<n;l+=6){s[0]=o[l];s[1]=o[l+1];s[2]=o[l+2];s[3]=o[l+3];s[4]=o[l+4];s[5]=o[l+5];if(f.contains(k.x,k.y)){return true}}}return false};j.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":29}],125:[function(g,i,f){var j=g("./Mesh");var e=g("../core");function h(l,k){j.call(this,l);this.points=k;this.vertices=new Float32Array(k.length*4);this.uvs=new Float32Array(k.length*4);this.colors=new Float32Array(k.length*2);this.indices=new Uint16Array(k.length*2);this._ready=true;this.refresh()}h.prototype=Object.create(j.prototype);h.prototype.constructor=h;i.exports=h;h.prototype.refresh=function(){var t=this.points;if(t.length<1||!this._texture._uvs){return}var m=this.uvs;var v=this.indices;var k=this.colors;var u=this._texture._uvs;var l=new e.Point(u.x0,u.y0);var q=new e.Point(u.x2-u.x0,u.y2-u.y0);m[0]=0+l.x;m[1]=0+l.y;m[2]=0+l.x;m[3]=1*q.y+l.y;k[0]=1;k[1]=1;v[0]=0;v[1]=1;var r=t.length,s,p,o;for(var n=1;n<r;n++){s=t[n];p=n*4;o=n/(r-1);m[p]=o*q.x+l.x;m[p+1]=0+l.y;m[p+2]=o*q.x+l.x;m[p+3]=1*q.y+l.y;p=n*2;k[p]=1;k[p+1]=1;p=n*2;v[p]=p;v[p+1]=p+1}this.dirty=true};h.prototype._onTextureUpdate=function(){j.prototype._onTextureUpdate.call(this);if(this._ready){this.refresh()}};h.prototype.updateTransform=function(){var u=this.points;if(u.length<1){return}var s=u[0];var q;var w=0;var v=0;var o=this.vertices;var r=u.length,t,n,p,k,m;for(var l=0;l<r;l++){t=u[l];n=l*4;if(l<u.length-1){q=u[l+1]}else{q=t}v=-(q.x-s.x);w=q.y-s.y;p=(1-(l/(r-1)))*10;if(p>1){p=1}k=Math.sqrt(w*w+v*v);m=this._texture.height/2;w/=k;v/=k;w*=m;v*=m;o[n]=t.x+w;o[n+1]=t.y+v;o[n+2]=t.x-w;o[n+3]=t.y-v;s=t}this.containerUpdateTransform()}},{"../core":29,"./Mesh":124}],126:[function(f,g,e){g.exports={Mesh:f("./Mesh"),Rope:f("./Rope"),MeshRenderer:f("./webgl/MeshRenderer"),MeshShader:f("./webgl/MeshShader")}},{"./Mesh":124,"./Rope":125,"./webgl/MeshRenderer":127,"./webgl/MeshShader":128}],127:[function(h,i,g){var e=h("../../core"),j=h("../Mesh");function f(m){e.ObjectRenderer.call(this,m);this.indices=new Uint16Array(15000);for(var l=0,k=0;l<15000;l+=6,k+=4){this.indices[l+0]=k+0;this.indices[l+1]=k+1;this.indices[l+2]=k+2;this.indices[l+3]=k+0;this.indices[l+4]=k+2;this.indices[l+5]=k+3}}f.prototype=Object.create(e.ObjectRenderer.prototype);f.prototype.constructor=f;i.exports=f;e.WebGLRenderer.registerPlugin("mesh",f);f.prototype.onContextChange=function(){};f.prototype.render=function(p){if(!p._vertexBuffer){this._initWebGL(p)}var n=this.renderer,o=n.gl,l=p._texture.baseTexture,k=n.shaderManager.plugins.meshShader;var m=p.drawMode===j.DRAW_MODES.TRIANGLE_MESH?o.TRIANGLE_STRIP:o.TRIANGLES;n.blendModeManager.setBlendMode(p.blendMode);o.uniformMatrix3fv(k.uniforms.translationMatrix._location,false,p.worldTransform.toArray(true));o.uniformMatrix3fv(k.uniforms.projectionMatrix._location,false,n.currentRenderTarget.projectionMatrix.toArray(true));o.uniform1f(k.uniforms.alpha._location,p.worldAlpha);if(!p.dirty){o.bindBuffer(o.ARRAY_BUFFER,p._vertexBuffer);o.bufferSubData(o.ARRAY_BUFFER,0,p.vertices);o.vertexAttribPointer(k.attributes.aVertexPosition,2,o.FLOAT,false,0,0);o.bindBuffer(o.ARRAY_BUFFER,p._uvBuffer);o.vertexAttribPointer(k.attributes.aTextureCoord,2,o.FLOAT,false,0,0);o.activeTexture(o.TEXTURE0);if(!l._glTextures[o.id]){this.renderer.updateTexture(l)}else{o.bindTexture(o.TEXTURE_2D,l._glTextures[o.id])}o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,p._indexBuffer);o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,p.indices)}else{p.dirty=false;o.bindBuffer(o.ARRAY_BUFFER,p._vertexBuffer);o.bufferData(o.ARRAY_BUFFER,p.vertices,o.STATIC_DRAW);o.vertexAttribPointer(k.attributes.aVertexPosition,2,o.FLOAT,false,0,0);o.bindBuffer(o.ARRAY_BUFFER,p._uvBuffer);o.bufferData(o.ARRAY_BUFFER,p.uvs,o.STATIC_DRAW);o.vertexAttribPointer(k.attributes.aTextureCoord,2,o.FLOAT,false,0,0);o.activeTexture(o.TEXTURE0);if(!l._glTextures[o.id]){this.renderer.updateTexture(l)}else{o.bindTexture(o.TEXTURE_2D,l._glTextures[o.id])}o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,p._indexBuffer);o.bufferData(o.ELEMENT_ARRAY_BUFFER,p.indices,o.STATIC_DRAW)}o.drawElements(m,p.indices.length,o.UNSIGNED_SHORT,0)};f.prototype._initWebGL=function(l){var k=this.renderer.gl;l._vertexBuffer=k.createBuffer();l._indexBuffer=k.createBuffer();l._uvBuffer=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,l._vertexBuffer);k.bufferData(k.ARRAY_BUFFER,l.vertices,k.DYNAMIC_DRAW);k.bindBuffer(k.ARRAY_BUFFER,l._uvBuffer);k.bufferData(k.ARRAY_BUFFER,l.uvs,k.STATIC_DRAW);if(l.colors){l._colorBuffer=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,l._colorBuffer);k.bufferData(k.ARRAY_BUFFER,l.colors,k.STATIC_DRAW)}k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,l._indexBuffer);k.bufferData(k.ELEMENT_ARRAY_BUFFER,l.indices,k.STATIC_DRAW)};f.prototype.flush=function(){};f.prototype.start=function(){var k=this.renderer.shaderManager.plugins.meshShader;this.renderer.shaderManager.setShader(k)};f.prototype.destroy=function(){}},{"../../core":29,"../Mesh":124}],128:[function(h,i,g){var e=h("../../core");function f(j){e.Shader.call(this,j,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}f.prototype=Object.create(e.Shader.prototype);f.prototype.constructor=f;i.exports=f;e.ShaderManager.registerPlugin("meshShader",f)},{"../../core":29}],129:[function(f,g,e){if(!Object.assign){Object.assign=f("object-assign")}},{"object-assign":12}],130:[function(f,g,e){f("./Object.assign");f("./requestAnimationFrame")},{"./Object.assign":129,"./requestAnimationFrame":131}],131:[function(f,g,e){(function(k){if(!(Date.now&&Date.prototype.getTime)){Date.now=function i(){return new Date().getTime()}}if(!(k.performance&&k.performance.now)){var j=Date.now();if(!k.performance){k.performance={}}k.performance.now=function(){return Date.now()-j}}var l=Date.now();var m=["ms","moz","webkit","o"];for(var h=0;h<m.length&&!k.requestAnimationFrame;++h){k.requestAnimationFrame=k[m[h]+"RequestAnimationFrame"];k.cancelAnimationFrame=k[m[h]+"CancelAnimationFrame"]||k[m[h]+"CancelRequestAnimationFrame"]}if(!k.requestAnimationFrame){k.requestAnimationFrame=function(p){if(typeof p!=="function"){throw new TypeError(p+"is not a function")}var o=Date.now(),n=16+l-o;if(n<0){n=0}l=o;return setTimeout(function(){l=Date.now();p(performance.now())},n)}}if(!k.cancelAnimationFrame){k.cancelAnimationFrame=function(n){clearTimeout(n)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1])(1)});
  </script>
  <script>
   var Stats=function(){function e(e,n,t){var r=document.createElement(e);return r.id=n,r.style.cssText=t,r}function n(n,t,r){var i=e("div",n,"padding:0 0 3px 3px;text-align:left;background:"+r),a=e("div",n+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+t);a.innerHTML=n.toUpperCase(),i.appendChild(a);var o=e("div",n+"Graph","width:74px;height:30px;background:"+t);i.appendChild(o);for(var d=0;d<74;d++)o.appendChild(e("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+r));return i}function t(e){for(var n=l.children,t=0;t<n.length;t++)n[t].style.display=t===e?"block":"none";p=e}function r(e,n){var t=e.appendChild(e.firstChild);t.style.height=Math.min(30,30-30*n)+"px"}var i=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,a=i(),o=a,d=0,p=0,l=e("div","stats","width:80px;opacity:0.9;cursor:pointer");l.addEventListener("mousedown",function(e){e.preventDefault(),t(++p%l.children.length)},!1);var f=0,h=1/0,c=0,m=n("fps","#0ff","#002"),s=m.children[0],u=m.children[1];l.appendChild(m);var v=0,x=1/0,g=0,M=n("ms","#0f0","#020"),C=M.children[0],y=M.children[1];if(l.appendChild(M),self.performance&&self.performance.memory){var b=0,w=1/0,S=0,k=n("mb","#f08","#201"),E=k.children[0],H=k.children[1];l.appendChild(k)}return t(p),{REVISION:14,domElement:l,setMode:t,begin:function(){a=i()},end:function(){var e=i();if(v=e-a,x=Math.min(x,v),g=Math.max(g,v),C.textContent=(0|v)+" MS ("+(0|x)+"-"+(0|g)+")",r(y,v/200),d++,e>o+1e3&&(f=Math.round(1e3*d/(e-o)),h=Math.min(h,f),c=Math.max(c,f),s.textContent=f+" FPS ("+h+"-"+c+")",r(u,f/100),o=e,d=0,void 0!==b)){var n=performance.memory.usedJSHeapSize,t=performance.memory.jsHeapSizeLimit;b=Math.round(9.54e-7*n),w=Math.min(w,b),S=Math.max(S,b),E.textContent=b+" MB ("+w+"-"+S+")",r(H,n/t)}return e},update:function(){a=this.end()}}};"object"==typeof module&&(module.exports=Stats);
  </script>
  <script>
   var project;
(function (project) {
    var ColorUtil = (function () {
        function ColorUtil() {
        }
        /**
         * Converts an HSL color value to RGB. Conversion formula
         * adapted from http://en.wikipedia.org/wiki/HSL_color_space.
         *
         * @param   {number}  h       The hue (0-360)
         * @param   {number}  s       The saturation (0-100)
         * @param   {number}  l       The lightness (0-100)
         * @return  {number}           The RGB representation
         */
        ColorUtil.hslToRgb = function (h, s, l) {
            h = h % 360;
            var m1, m2, hue;
            var r, g, b;
            s /= 100;
            l /= 100;
            if (s == 0) {
                r = g = b = (l * 255);
            }
            else {
                if (l <= 0.5)
                    m2 = l * (s + 1);
                else
                    m2 = l + s - l * s;
                m1 = l * 2 - m2;
                hue = h / 360;
                r = Math.round(ColorUtil.hueToRgb(m1, m2, hue + 1 / 3));
                g = Math.round(ColorUtil.hueToRgb(m1, m2, hue));
                b = Math.round(ColorUtil.hueToRgb(m1, m2, hue - 1 / 3));
            }
            var color = (r << 16) | (g << 8) | b;
            return color;
        };
        /**
         * HUE の値を RGB として返却します。
         * @param {number} m1
         * @param {number} m2
         * @param {number} hue
         * @returns {number}
         */
        ColorUtil.hueToRgb = function (m1, m2, hue) {
            var v;
            if (hue < 0)
                hue += 1;
            else if (hue > 1)
                hue -= 1;
            if (6 * hue < 1)
                v = m1 + (m2 - m1) * hue * 6;
            else if (2 * hue < 1)
                v = m2;
            else if (3 * hue < 2)
                v = m1 + (m2 - m1) * (2 / 3 - hue) * 6;
            else
                v = m1;
            return 255 * v;
        };
        return ColorUtil;
    })();
    project.ColorUtil = ColorUtil;
})(project || (project = {}));
var project;
(function (project) {
    /**
     * グラフィックのユーティリティークラスです。
     * @class project.GraphicUtil
     */
    var GraphicUtil = (function () {
        function GraphicUtil() {
        }
        /**
         * 五芒星の頂点座標を計算します。
         * @param radius {number}    半径
         * @returns {{x:number; y:number;}[]}
         */
        GraphicUtil.createStartPoints = function (radius, offsetX, offsetY) {
            //五芒星の時の角度
            var c1 = GraphicUtil.createCordinate(radius, -90, offsetX, offsetY);
            var c2 = GraphicUtil.createCordinate(radius, -234, offsetX, offsetY);
            var c3 = GraphicUtil.createCordinate(radius, -18, offsetX, offsetY);
            var c4 = GraphicUtil.createCordinate(radius, -162, offsetX, offsetY);
            var c5 = GraphicUtil.createCordinate(radius, -306, offsetX, offsetY);
            return [c1, c2, c3, c4, c5];
        };
        GraphicUtil.createCordinate = function (radius, angle, offsetX, offsetY) {
            var x = radius * Math.cos(angle / 180 * Math.PI);
            var y = radius * Math.sin(angle / 180 * Math.PI);
            return {
                "x": x + offsetX,
                "y": y + offsetY
            };
        };
        return GraphicUtil;
    })();
    project.GraphicUtil = GraphicUtil;
})(project || (project = {}));
/// <reference path="easeljs/easeljs.d.ts" />
var project;
(function (project) {
    /**
     * ベクトルパスのクラスです。
     */
    var Path = (function () {
        function Path() {
            this.prev = new createjs.Point();
            this.prev2 = new createjs.Point();
            this.point = new createjs.Point();
            this.mouse = new createjs.Point();
        }
        /**
         * セットアップします。
         * @param {number} x
         * @param {number} y
         * @param {number} _accele マウスから離れて行く時の加速値
         * @param {number} delayFrame
         * @param {number} percent
         */
        Path.prototype.setup = function (x, y, _accele, delayFrame, percent) {
            if (x === void 0) { x = 0; }
            if (y === void 0) { y = 0; }
            if (_accele === void 0) { _accele = 0.1; }
            if (delayFrame === void 0) { delayFrame = 0; }
            if (percent === void 0) { percent = 0.0; }
            this.xx = this.prev2.x = this.prev.x = this.point.x = innerWidth / 2;
            this.yy = this.prev2.y = this.prev.y = this.point.y = innerHeight / 2;
            this.delayFrame = delayFrame;
            this.percent = percent;
            //初期化
            this.vx = this.vy = 0.0;
            this.ac = _accele;
            this.de = 0.85;
            this.wd = 0.05;
            this.pivotX = 40 * ((Math.random() + Math.random() + Math.random()) / 3 - 0.5) >> 0;
            this.pivotY = 40 * ((Math.random() + Math.random() + Math.random()) / 3 - 0.5) >> 0;
        };
        Path.prototype.setMousePosition = function (x, y, needReset) {
            this.mouse.x = x + this.pivotX;
            this.mouse.y = y + this.pivotY;
            if (needReset) {
                this.resetPosition(x, y);
            }
        };
        /**
         * 更新します。
         */
        Path.prototype.update = function () {
            this.prev2.x = this.prev.x;
            this.prev2.y = this.prev.y;
            this.prev.x = this.point.x;
            this.prev.y = this.point.y;
            // 参考
            // http://gihyo.jp/design/feature/01/frocessing/0004?page=1
            //加速度運動
            this.vx += (this.mouse.x - this.xx) * this.ac;
            this.vy += (this.mouse.y - this.yy) * this.ac;
            this.xx += this.vx;
            this.yy += this.vy;
            //減衰処理
            this.vx *= this.de;
            this.vy *= this.de;
            this.point.x = this.xx;
            this.point.y = this.yy;
        };
        Path.prototype.resetPosition = function (x, y) {
            x += +this.pivotX;
            y += +this.pivotY;
            this.point.x = x;
            this.point.y = y;
            this.prev2.x = x;
            this.prev2.y = y;
            this.mouse.x = this.prev.x = this.xx = x;
            this.mouse.y = this.prev.y = this.yy = y;
            this.vx = this.vy = 0.0;
        };
        return Path;
    })();
    project.Path = Path;
})(project || (project = {}));
var project;
(function (project) {
    /**
     * パーティクルのテクスチャを生成する初期化用クラスです。
     */
    var ParticleInitializer = (function () {
        function ParticleInitializer() {
        }
        /**
         * パーティクルの模様を作成します。
         */
        ParticleInitializer.generate = function () {
            var spriteSheetBuilder = new createjs.SpriteSheetBuilder();
            spriteSheetBuilder.padding = 2;
            for (var i = 0; i < ParticleInitializer.NUM_PARTICLE; i++) {
                var shape = new createjs.Shape();
                var size = Math.random() * Math.random() * Math.random() * 120 + 4;
                var colorHsl = createjs.Graphics.getHSL(160 + 20 * Math.random(), 0 + Math.random() * 20, 50 + Math.random() * 50);
                shape.graphics.clear();
                // 円
                if (Math.random() < 0.7) {
                    if (Math.random() < 0.3) {
                        // もやっとした円
                        shape.graphics.beginRadialGradientFill([colorHsl, "#000000"], [0.0, 1.0], 0, 0, size / 10, 0, 0, size);
                    }
                    else if (Math.random() < 0.5) {
                        // キリッとした円
                        shape.graphics.beginFill(colorHsl);
                    }
                    else {
                        // 輪郭だけの円
                        shape.graphics
                            .setStrokeStyle(2) // 線の太さ
                            .beginStroke(createjs.Graphics.getRGB(255, 255, 255));
                    }
                    shape.graphics.drawCircle(0, 0, size);
                    shape.graphics.endFill();
                }
                else if (Math.random() < 0.5) {
                    if (Math.random() < 0.1) {
                        // キリッとした円
                        shape.graphics.beginFill(colorHsl);
                    }
                    else {
                        // 輪郭だけの円
                        shape.graphics
                            .setStrokeStyle(2) // 線の太さ
                            .beginStroke(createjs.Graphics.getRGB(255, 255, 255));
                    }
                    shape.graphics
                        .drawRect(-size, -size, size * 2, size * 2)
                        .endFill();
                }
                else {
                    if (Math.random() < 0.5) {
                        // キリッとした円
                        shape.graphics.beginFill(colorHsl);
                    }
                    else {
                        // 輪郭だけの円
                        shape.graphics
                            .setStrokeStyle(2) // 線の太さ
                            .beginStroke(createjs.Graphics.getRGB(255, 255, 255));
                    }
                    var takasa = size * Math.sin(Math.PI / 3);
                    shape.graphics
                        .moveTo(-size / 2, size / 2)
                        .lineTo(0, size / 2 - takasa)
                        .lineTo(+size / 2, size / 2)
                        .closePath()
                        .endFill();
                }
                var padding = 4;
                shape.cache(-size - padding, -size - padding, size * 2 + padding * 2, size * 2 + padding * 2);
                var frameNum = spriteSheetBuilder.addFrame(shape);
                spriteSheetBuilder.addAnimation("particle_" + i, [frameNum]);
            }
            spriteSheetBuilder.build();
            ParticleInitializer.convertSpriteSheet(spriteSheetBuilder.spriteSheet);
        };
        /**
         * CreateJS のスプライトシートビルダーを使られたスプライトシートを
         * Pixi.js のスプライトシート機能に展開するクラス。
         */
        ParticleInitializer.convertSpriteSheet = function (spriteSheet) {
            var textureOriginal = PIXI.Texture.fromCanvas(spriteSheet._images[0]);
            for (var frameLabel in spriteSheet._data) {
                var animation = spriteSheet.getAnimation(frameLabel);
                var frame = spriteSheet.getFrame(animation.frames[0]);
                var textureSize = new PIXI.Rectangle(frame.rect.x, frame.rect.y, frame.rect.width, frame.rect.height);
                PIXI.utils.TextureCache[frameLabel] = new PIXI.Texture(textureOriginal.baseTexture, textureSize);
            }
        };
        ParticleInitializer.NUM_PARTICLE = 200;
        return ParticleInitializer;
    })();
    project.ParticleInitializer = ParticleInitializer;
})(project || (project = {}));
/// <reference path="pixi/pixi.d.ts" />
/// <reference path="ParticleInitializer.ts" />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var project;
(function (project) {
    /**
     * パーティクル表示クラスです。
     * @class demo.Particle
     */
    var Particle = (function (_super) {
        __extends(Particle, _super);
        /**
         * コンストラクタ
         * @constructor
         */
        function Particle() {
            var texture = PIXI.Texture.fromFrame("particle_" + (project.ParticleInitializer.NUM_PARTICLE * Math.random() >> 0));
            _super.call(this, texture);
            this.blendMode = PIXI.BLEND_MODES.SCREEN;
            this.pivot.x = texture.frame.width / 2;
            this.pivot.y = texture.frame.height / 2;
            this._destroy = true;
        }
        /**
         * パーティクルをリセットします。
         * @param emitX
         * @param emitY
         * @param vx
         * @param vy
         * @param vAngular
         */
        Particle.prototype.resetParameters = function (emitX, emitY, vx, vy, vAngular) {
            this.x = emitX;
            this.y = emitY;
            this.vx = vx * 0.5 + (Math.random() - 0.5) * 10;
            this.vy = vy * 0.5 + (Math.random() - 0.5) * 10;
            this.life = Math.random() * Math.random() * 300 + 30;
            this._count = 0;
            this._destroy = false;
            this.rotation = 360 * Math.random();
            this._vAngular = vAngular;
            this.alpha = 1.0;
            this.scale.x = this.scale.y = 1.0;
        };
        /**
         * パーティクル個別の内部計算を行います。
         * @method
         */
        Particle.prototype.update = function () {
            // Gravity
            this.vy += 0.2;
            this.x += this.vx;
            this.y += this.vy;
            this.rotation += this._vAngular;
            this._count++;
            var maxD = (1 - this._count / this.life * 1 / 3);
            this.alpha = Math.random() * 0.4 + 0.6 * this._count / this.life;
            this.scale.x = this.scale.y = maxD;
            // 死亡フラグ
            if (this.life < this._count) {
                this._destroy = true;
                this.parent.removeChild(this);
            }
        };
        /**
         * パーティクルが死んでいるかどうかを確認します。
         * @returns {boolean}
         * @method
         */
        Particle.prototype.getIsDead = function () {
            return this._destroy;
        };
        return Particle;
    })(PIXI.Sprite);
    project.Particle = Particle;
})(project || (project = {}));
/// <reference path="Particle.ts" />
var project;
(function (project) {
    /**
     * パーティクル発生装置。マウス座標から速度を計算します。
     * @class project.Emitter
     */
    var Emitter = (function () {
        /**
         * @constructor
         */
        function Emitter() {
            /** 速度(X方向)です。 */
            this.vy = 0;
            /** 速度(Y方向)です。 */
            this.x = 0;
            /** マウスのX座標です。 */
            this.latestY = 0;
            /** マウスのY座標です。 */
            this.latestX = 0;
            /** パーティクル発生のX座標です。 */
            this.y = 0;
            /** パーティクル発生のY座標です。 */
            this.vx = 0;
            /** 現在のベクトルの角度です。 */
            this.angular = 0;
            /** 角速度です。 */
            this.vAngular = 0;
        }
        /**
         * パーティクルエミッターの計算を行います。この計算によりマウスの引力が計算されます。
         * @method
         */
        Emitter.prototype.update = function () {
            var dx = this.latestX - this.x;
            var dy = this.latestY - this.y;
            var d = Math.sqrt(dx * dx + dy * dy) * 0.2;
            var rad = Math.atan2(dy, dx);
            this.vx += Math.cos(rad) * d;
            this.vy += Math.sin(rad) * d;
            this.vx *= 0.4;
            this.vy *= 0.4;
            this.x += this.vx;
            this.y += this.vy;
            this.vAngular = rad - this.angular;
            this.angular = rad;
        };
        return Emitter;
    })();
    project.Emitter = Emitter;
    /**
     * パーティクルエミッターのクラスです。
     * @class project.ParticleEmitter
     */
    var ParticleEmitter = (function (_super) {
        __extends(ParticleEmitter, _super);
        /**
         * @constructor
         */
        function ParticleEmitter() {
            _super.call(this);
            this.numParticles = 10;
            this.PRE_CACHE_PARTICLES = 300;
            this.container = new PIXI.Container();
            this._particleActive = [];
            this._particlePool = [];
            /* 予め必要そうな分だけ作成しておく */
            for (var i = 0; i < this.PRE_CACHE_PARTICLES; i++) {
                this._particlePool.push(new project.Particle());
            }
        }
        /**
         * パーティクルを発生させます。
         * @param {number} x パーティクルの発生座標
         * @param {number} y パーティクルの発生座標
         * @method
         */
        ParticleEmitter.prototype.emit = function (x, y) {
            for (var i = 0; i < this.numParticles; i++) {
                this.getNewParticle(x, y);
            }
        };
        /**
         * パーティクルを更新します。
         * @method
         */
        ParticleEmitter.prototype.update = function () {
            _super.prototype.update.call(this);
            for (var i = 0; i < this._particleActive.length; i++) {
                var p = this._particleActive[i];
                if (!p.getIsDead()) {
                    if (p.y >= window.innerHeight) {
                        p.vy *= -0.9;
                        p.y = window.innerHeight;
                    }
                    else if (p.y <= 0) {
                        p.vy *= -0.9;
                        p.y = 0;
                    }
                    if (p.x >= window.innerWidth) {
                        p.vx *= -0.9;
                        p.x = window.innerWidth;
                    }
                    else if (p.x <= 0) {
                        p.vx *= -0.9;
                        p.x = 0;
                    }
                    p.update();
                }
                else {
                    this.removeParticle(p);
                }
            }
        };
        /**
         * パーティクルを追加します。
         * @param {THREE.Vector3} emitPoint
         * @return {project.Particle}
         * @method
         */
        ParticleEmitter.prototype.getNewParticle = function (emitX, emitY) {
            var p = this.fromPool();
            p.resetParameters(this.x, this.y, this.vx, this.vy, this.vAngular);
            this._particleActive.push(p);
            this.container.addChild(p);
            return p;
        };
        /**
         * パーティクルを削除します。
         * @param {Particle} particle
         * @method
         */
        ParticleEmitter.prototype.removeParticle = function (p) {
            this.container.removeChild(p);
            var index = this._particleActive.indexOf(p);
            if (index > -1) {
                this._particleActive.splice(index, 1);
            }
            this.toPool(p);
        };
        /**
         * アクティブなパーティクルを取り出します。
         * @returns {project.Particle[]}
         * @method
         */
        ParticleEmitter.prototype.getActiveParticles = function () {
            return this._particleActive;
        };
        /**
         * プールからインスタンスを取り出します。
         * プールになければ新しいインスタンスを作成します。
         * @returns {project.Particle}
         * @method
         */
        ParticleEmitter.prototype.fromPool = function () {
            if (this._particlePool.length > 0)
                return this._particlePool.shift();
            else
                return new project.Particle();
        };
        /**
         * プールにインスタンスを格納します。
         * @param {project.Particle}
         * @method
         */
        ParticleEmitter.prototype.toPool = function (particle) {
            this._particlePool.push(particle);
        };
        return ParticleEmitter;
    })(Emitter);
    project.ParticleEmitter = ParticleEmitter;
})(project || (project = {}));
/// <reference path="pixi/pixi.d.ts" />
/// <reference path="easeljs/easeljs.d.ts" />
/// <reference path="Path.ts" />
/// <reference path="ColorUtil.ts" />
/// <reference path="GraphicUtil.ts" />
/// <reference path="ParticleEmitter.ts" />
/// <reference path="Particle.ts" />
var project;
(function (project) {
    // 初期化命令
    window.addEventListener("load", function () {
        new project.Main();
    });
    /**
     * パーティクルデモのメインクラスです。
     * @class project.Main
     */
    var Main = (function () {
        /**
         * @constructor
         */
        function Main() {
            var _this = this;
            this.stage = new PIXI.Container();
            this.renderer = PIXI.autoDetectRenderer(800, 600, { backgroundColor: 0x000000 });
            document.body.appendChild(this.renderer.view);
            // パーティクルサンプルを作成
            var sample = new ParticleSample();
            this.stage.addChild(sample);
            // Tickerを作成
            createjs.Ticker.timingMode = createjs.Ticker.RAF;
            createjs.Ticker.on("tick", this.handleTick, this);
            this.stats = new Stats();
            document.body.appendChild(this.stats.domElement);
            // リサイズイベント
            this.handleResize();
            window.addEventListener("resize", function () {
                _this.handleResize();
            });
        }
        /**
         * エンターフレームイベント
         */
        Main.prototype.handleTick = function () {
            // create residual image effect
            this.renderer.render(this.stage);
            this.stats.update();
        };
        /**
         * リサイズイベント
         */
        Main.prototype.handleResize = function () {
            this.renderer.resize(innerWidth, innerHeight);
        };
        return Main;
    })();
    project.Main = Main;
    /**
     * 大量のパーティクルを発生させてみた
     * マウスを押してる間でてくるよ
     * @see http://wonderfl.net/c/4WjT
     * @class demo.ParticleSample
     */
    var ParticleSample = (function (_super) {
        __extends(ParticleSample, _super);
        function ParticleSample() {
            var _this = this;
            _super.call(this);
            // パーティクルを初期化
            project.ParticleInitializer.generate();
            this.interactive = true;
            this._count = 0;
            this._bg = new PIXI.Graphics();
            this.addChild(this._bg);
            this.canvasForDisplay = document.createElement("canvas");
            this.canvasForDisplay.className = "drawing";
            this.canvasForDisplay.style.pointerEvents = "none";
            var canvasForEasel = document.createElement("canvas");
            this.stageEaselJS = new createjs.Stage(canvasForEasel);
            document.body.appendChild(this.canvasForDisplay);
            var max = 1500;
            this.pathList = [];
            this.mousePositions = [];
            for (var i = 0; i < max; i++) {
                var p = new project.Path();
                p.setup(0, 0, 0.3 + i / max * 0.5, (180 * Math.random() >> 0), (i + 1) / max);
                this.pathList.push(p);
            }
            this._lines = new createjs.Shape();
            this.stageEaselJS.addChild(this._lines);
            this._linePoint = [];
            this._emitter = new project.ParticleEmitter();
            this._emitter.latestX = innerWidth / 2;
            this._emitter.latestY = innerHeight / 2;
            this.addChild(this._emitter.container);
            this._shadow = new PIXI.Sprite(PIXI.Texture.fromImage("imgs/Shadow-assets/Shadow.png"));
            this._shadow.blendMode = PIXI.BLEND_MODES.SCREEN;
            this.addChild(this._shadow);
            // -------------------------
            // オープニングアニメーション
            // -------------------------
            var sx = window.innerWidth / 2;
            var sy = window.innerHeight / 2;
            this._isAutoAnimation = true;
            var points = project.GraphicUtil.createStartPoints(window.innerWidth / 3, sx, sy);
            this._pointAutoMotion = new createjs.Point(points[4].x, points[4].y);
            this._emitter.latestX = this._emitter.x = points[0].x;
            this._emitter.latestY = this._emitter.y = points[0].y;
            var tw = createjs.Tween
                .get(this._pointAutoMotion);
            for (var i = 0; i < 2; i++) {
                for (var j = 0; j < points.length; j++) {
                    tw.to(points[j], 250 + 100 * Math.random(), createjs.Ease.quartInOut);
                }
            }
            tw.call(function () {
                _this._isAutoAnimation = false;
                _this._isDown = false;
                _this.buttonMode = true;
                document.getElementById("attention").classList.add("show");
            });
            this._isDown = true;
            this.buttonMode = false;
            // -------------------------
            // イベントの登録
            // -------------------------
            this
                .on("mousedown", this.handleMouseDown, this)
                .on('touchstart', this.handleMouseDown, this)
                .on("mousemove", this.handleMouseMove, this)
                .on('touchmove', this.handleMouseMove, this)
                .on("mouseup", this.handleMouseUp, this)
                .on("mouseupoutside", this.handleMouseUp, this)
                .on("touchend", this.handleMouseUp, this)
                .on("touchendoutside", this.handleMouseUp, this);
            createjs.Ticker.on("tick", this.enterFrameHandler, this);
            this.handleResize();
            window.addEventListener("resize", function () {
                _this.handleResize();
            });
        }
        /**
         * エンターフレームイベント
         * @param event
         */
        ParticleSample.prototype.enterFrameHandler = function (event) {
            if (this._isAutoAnimation == true) {
                // オープニング中は自動的に代入する
                this._emitter.latestX = this._pointAutoMotion.x;
                this._emitter.latestY = this._pointAutoMotion.y;
            }
            else {
            }
            if (this._isDown) {
                this.createParticle();
            }
            this.mousePositions.unshift({ x: this._emitter.latestX, y: this._emitter.latestY, isDown: this._isDown });
            for (var i = 0; i < this.pathList.length; i++) {
                var p = this.pathList[i];
                if (this.mousePositions.length > p.delayFrame) {
                    var position = this.mousePositions[p.delayFrame];
                    //    マウスの位置更新
                    p.setMousePosition(position.x, position.y, !position.isDown);
                    p.update();
                }
            }
            var gCurve = this._lines.graphics;
            gCurve.clear();
            gCurve.setStrokeStyle(1);
            for (var i = 0; i < this.pathList.length; i++) {
                var p = this.pathList[i];
                // マウスの軌跡を変数に保存
                var p0x = p.point.x;
                var p0y = p.point.y;
                var p1x = p.prev.x;
                var p1y = p.prev.y;
                var p2x = p.prev2.x;
                var p2y = p.prev2.y;
                if (p0x == p2x || p0y == p2y)
                    continue;
                if (p0x == p1x || p0y == p1y)
                    continue;
                // カーブ用の頂点を割り出す
                var curveStartX = (p2x + p1x) / 2;
                var curveStartY = (p2y + p1y) / 2;
                var curveEndX = (p0x + p1x) / 2;
                var curveEndY = (p0y + p1y) / 2;
                // カーブは中間点を結ぶ。マウスの座標は制御点として扱う。
                var colorLine = createjs.Graphics.getHSL(180, 100, 100, p.percent);
                gCurve
                    .beginStroke(colorLine)
                    .moveTo(curveStartX, curveStartY)
                    .curveTo(p1x, p1y, curveEndX, curveEndY)
                    .endStroke();
            }
            var color1 = { h: new Date().getTime() / 40, s: 30, l: 40 };
            var color2 = { h: (new Date().getTime() + 40 * 89) / 40, s: 70, l: 70 };
            this._bg.clear();
            // グラデーションを作るための無理矢理な手法
            for (var i = 0, max = 1024; i < max; i++) {
                var color = project.ColorUtil.hslToRgb(color1.h * (i / max) + color2.h * (1 - i / max), color1.s * (i / max) + color2.s * (1 - i / max), color1.l * (i / max) + color2.l * (1 - i / max));
                this._bg.beginFill(color, 1.0);
                this._bg.drawRect(0, window.innerHeight * i / max, window.innerWidth, window.innerHeight / max);
            }
            this._emitter.update();
            if (this._isDown) {
                this._linePoint.push({
                    x: this._emitter.x,
                    y: this._emitter.y,
                    vx: this._emitter.vx,
                    vy: this._emitter.vy,
                    angular: this._emitter.angular
                });
            }
            else {
                this._linePoint.shift();
            }
            if (max > 200) {
                this._linePoint.shift();
            }
            var contextForDisplay = this.canvasForDisplay.getContext("2d");
            contextForDisplay.globalCompositeOperation = "source-over";
            contextForDisplay.setTransform(1, 0, 0, 1, 0, 0);
            contextForDisplay.fillStyle = "rgba(0, 0, 0, 0.1)";
            contextForDisplay.fillRect(0, 0, innerWidth, innerHeight);
            contextForDisplay.drawImage(this.stageEaselJS.canvas, 0, 0);
            this.stageEaselJS.update();
        };
        ParticleSample.prototype.handleMouseDown = function (event) {
            if (this._isAutoAnimation == true) {
                return; // OPアニメーション中はイベントを無効化
            }
            var data = event.data;
            this._isDown = true;
            this._emitter.x = data.global.x;
            this._emitter.y = data.global.y;
            this._emitter.latestX = data.global.x;
            this._emitter.latestY = data.global.y;
        };
        ParticleSample.prototype.handleMouseMove = function (event) {
            if (this._isAutoAnimation == true) {
                return; // OPアニメーション中はイベントを無効化
            }
            var data = event.data;
            this._emitter.latestX = data.global.x;
            this._emitter.latestY = data.global.y;
        };
        ParticleSample.prototype.handleMouseUp = function (event) {
            if (this._isAutoAnimation == true) {
                return; // OPアニメーション中はイベントを無効化
            }
            var data = event.data;
            this._isDown = false;
            this._emitter.latestX = data.global.x;
            this._emitter.latestY = data.global.y;
        };
        ParticleSample.prototype.createParticle = function () {
            this._emitter.emit(this._emitter.latestX, this._emitter.latestY);
        };
        ParticleSample.prototype.handleResize = function () {
            this._shadow.scale.x = (window.innerWidth / 1024);
            this._shadow.scale.y = (window.innerHeight / 1024);
            this.stageEaselJS.canvas.width = innerWidth;
            this.stageEaselJS.canvas.height = innerHeight;
            this.canvasForDisplay.width = innerWidth;
            this.canvasForDisplay.height = innerHeight;
        };
        return ParticleSample;
    })(PIXI.Container);
})(project || (project = {}));
//# sourceMappingURL=main.js.map
  </script>

 </BODY>
</HTML>
